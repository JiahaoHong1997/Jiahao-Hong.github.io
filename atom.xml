<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ´ªç¬³æ·çš„ä¸ªäººåšå®¢</title>
  
  
  <link href="http://jiahaohong1997.github.io/atom.xml" rel="self"/>
  
  <link href="http://jiahaohong1997.github.io/"/>
  <updated>2022-04-16T03:46:14.009Z</updated>
  <id>http://jiahaohong1997.github.io/</id>
  
  <author>
    <name>æ´ªç¬³æ·</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 14ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/16/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%2014%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/16/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%2014%EF%BC%89/</id>
    <published>2022-04-16T03:00:00.000Z</published>
    <updated>2022-04-16T03:46:14.009Z</updated>
    
    <content type="html"><![CDATA[<p>åˆæ²¡æ—©èµ·ï¼Œä¸Šæµ·è¿™ç–«æƒ…ä½•æ—¶æ˜¯ä¸ªå¤´å•ŠğŸ˜®â€ğŸ’¨</p><h2 id="å‰‘æŒ‡-Offer-47-ç¤¼ç‰©çš„æœ€å¤§ä»·å€¼"><a href="#å‰‘æŒ‡-Offer-47-ç¤¼ç‰©çš„æœ€å¤§ä»·å€¼" class="headerlink" title="å‰‘æŒ‡ Offer 47. ç¤¼ç‰©çš„æœ€å¤§ä»·å€¼"></a><a class="link" href="https://leetcode-cn.com/problems/li-wu-de-zui-da-jie-zhi-lcof/">å‰‘æŒ‡ Offer 47. ç¤¼ç‰©çš„æœ€å¤§ä»·å€¼<i class="fas fa-external-link-alt"></i></a></h2><p>#åŠ¨æ€è§„åˆ’ </p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>åœ¨ä¸€ä¸ª m*n çš„æ£‹ç›˜çš„æ¯ä¸€æ ¼éƒ½æ”¾æœ‰ä¸€ä¸ªç¤¼ç‰©ï¼Œæ¯ä¸ªç¤¼ç‰©éƒ½æœ‰ä¸€å®šçš„ä»·å€¼ï¼ˆä»·å€¼å¤§äº 0ï¼‰ã€‚ä½ å¯ä»¥ä»æ£‹ç›˜çš„å·¦ä¸Šè§’å¼€å§‹æ‹¿æ ¼å­é‡Œçš„ç¤¼ç‰©ï¼Œå¹¶æ¯æ¬¡å‘å³æˆ–è€…å‘ä¸‹ç§»åŠ¨ä¸€æ ¼ã€ç›´åˆ°åˆ°è¾¾æ£‹ç›˜çš„å³ä¸‹è§’ã€‚ç»™å®šä¸€ä¸ªæ£‹ç›˜åŠå…¶ä¸Šé¢çš„ç¤¼ç‰©çš„ä»·å€¼ï¼Œè¯·è®¡ç®—ä½ æœ€å¤šèƒ½æ‹¿åˆ°å¤šå°‘ä»·å€¼çš„ç¤¼ç‰©ï¼Ÿ</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br><span class="line">è¾“å…¥: </span><br><span class="line">[</span><br><span class="line">Â  [1,3,1],</span><br><span class="line">Â  [1,5,1],</span><br><span class="line">Â  [4,2,1]</span><br><span class="line">]</span><br><span class="line">è¾“å‡º: 12</span><br><span class="line">è§£é‡Š: è·¯å¾„ 1â†’3â†’5â†’2â†’1 å¯ä»¥æ‹¿åˆ°æœ€å¤šä»·å€¼çš„ç¤¼ç‰©</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">0 &lt; grid.length &lt;&#x3D; 200</span><br><span class="line">0 &lt; grid[0].length &lt;&#x3D; 200</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). ä½¿ç”¨ BFS â€”â€” çˆ†å†…å­˜ï¼›<br>(2). ä½¿ç”¨ DFS â€”â€” è¶…æ—¶ï¼›<br>(3). é‚£å°±è€è€å®å®åŠ¨æ€è§„åˆ’å§ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(M*N)</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxValue</span><span class="params">(grid [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">dp := <span class="built_in">make</span>([][]<span class="keyword">int</span>, <span class="built_in">len</span>(grid))</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(dp); i++ &#123;</span><br><span class="line">dp[i] = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(grid[<span class="number">0</span>]))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dp[<span class="number">0</span>][<span class="number">0</span>] = grid[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(grid); i++ &#123;</span><br><span class="line">dp[i][<span class="number">0</span>] = dp[i<span class="number">-1</span>][<span class="number">0</span>] + grid[i][<span class="number">0</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(grid[<span class="number">0</span>]); i++ &#123;</span><br><span class="line">dp[<span class="number">0</span>][i] = dp[<span class="number">0</span>][i<span class="number">-1</span>] + grid[<span class="number">0</span>][i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(grid); i++ &#123;</span><br><span class="line"><span class="keyword">for</span> j:=<span class="number">1</span>; j&lt;<span class="built_in">len</span>(grid[<span class="number">0</span>]); j++ &#123;</span><br><span class="line">dp[i][j] = max(dp[i<span class="number">-1</span>][j],dp[i][j<span class="number">-1</span>])+grid[i][j]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> dp[<span class="built_in">len</span>(grid)<span class="number">-1</span>][<span class="built_in">len</span>(grid[<span class="number">0</span>])<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(a,b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &gt; b &#123;</span><br><span class="line"><span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode245-æœ€çŸ­å•è¯è·ç¦»-III"><a href="#LeetCode245-æœ€çŸ­å•è¯è·ç¦»-III" class="headerlink" title="LeetCode245. æœ€çŸ­å•è¯è·ç¦» III"></a><a class="link" href="https://leetcode-cn.com/problems/shortest-word-distance-iii/">LeetCode245. æœ€çŸ­å•è¯è·ç¦» III<i class="fas fa-external-link-alt"></i></a></h2><p>#æ•°ç»„ </p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„Â wordsDict å’Œä¸¤ä¸ªå­—ç¬¦ä¸² word1 å’Œ word2 ï¼Œè¿”å›åˆ—è¡¨ä¸­è¿™ä¸¤ä¸ªå•è¯ä¹‹é—´çš„æœ€çŸ­è·ç¦»ã€‚<br>æ³¨æ„ï¼šword1 å’Œ word2Â æ˜¯æœ‰å¯èƒ½ç›¸åŒçš„ï¼Œå¹¶ä¸”å®ƒä»¬å°†åˆ†åˆ«è¡¨ç¤ºä¸ºåˆ—è¡¨ä¸­ ä¸¤ä¸ªç‹¬ç«‹çš„å•è¯ ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šwordsDict &#x3D; [&quot;practice&quot;, &quot;makes&quot;, &quot;perfect&quot;, &quot;coding&quot;, &quot;makes&quot;], word1 &#x3D; &quot;makes&quot;, word2 &#x3D; &quot;coding&quot;</span><br><span class="line">è¾“å‡ºï¼š1</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šwordsDict &#x3D; [&quot;practice&quot;, &quot;makes&quot;, &quot;perfect&quot;, &quot;coding&quot;, &quot;makes&quot;], word1 &#x3D; &quot;makes&quot;, word2 &#x3D; &quot;makes&quot;</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D; wordsDict.length &lt;&#x3D; 105</span><br><span class="line">1 &lt;&#x3D; wordsDict[i].length &lt;&#x3D; 10</span><br><span class="line">wordsDict[i] ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</span><br><span class="line">word1 å’Œ word2 éƒ½åœ¨ wordsDict ä¸­</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼Œå½“ <code>word1 == word2</code> æ—¶ å’Œ <code>word1 != word2</code> æ—¶ï¼›<br>(2). å½“ <code>word1 == word2</code> æ—¶ï¼Œéå† <code>wordDict</code>ï¼Œå°† <code>word1</code> çš„ç´¢å¼•å·ç”¨æ•°ç»„ä¿å­˜ï¼Œä¹‹åå†é€šè¿‡ä¸€æ¬¡éå†ï¼Œè®¡ç®—ç›¸é‚»ç´¢å¼•å·æœ€å°çš„å·®ï¼›<br>(3). å½“ <code>word1 != word2</code> æ—¶ï¼Œé€šè¿‡ä¸¤ä¸ªæ ‡è®° <code>idx1</code> å’Œ <code>idx2</code>ï¼Œåˆ†åˆ«è®°å½•ä¸‹æ¯æ¬¡å‡ºç° <code>word1</code> å’Œ <code>word2</code> çš„ç´¢å¼•å·ï¼Œç„¶åé€šè¿‡ä¸€æ¬¡éå† <code>wordDict</code>ï¼Œè®¡ç®—å‡ºæœ€å°çš„å·®ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-1"><a href="#æ—¶é—´å¤æ‚åº¦-1" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N)</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">shortestWordDistance</span><span class="params">(wordsDict []<span class="keyword">string</span>, word1 <span class="keyword">string</span>, word2 <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">idx1, idx2 := <span class="number">-1</span>, <span class="number">-1</span></span><br><span class="line">ret := math.MaxInt32</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> word1 == word2 &#123;</span><br><span class="line">l := []<span class="keyword">int</span>&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(wordsDict); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> wordsDict[i] == word1 &#123;</span><br><span class="line">l = <span class="built_in">append</span>(l, i)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(l); i++ &#123;</span><br><span class="line">ret = min(ret, l[i]-l[i<span class="number">-1</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(wordsDict); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> wordsDict[i] == word1 &#123;</span><br><span class="line">idx1 = i</span><br><span class="line"><span class="keyword">if</span> idx2 != <span class="number">-1</span> &#123;</span><br><span class="line">ret = min(ret, abs(idx1,idx2))</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> wordsDict[i] == word2 &#123;</span><br><span class="line">idx2 = i</span><br><span class="line"><span class="keyword">if</span> idx1 != <span class="number">-1</span> &#123;</span><br><span class="line">ret = min(ret, abs(idx1,idx2))</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &lt; b &#123;</span><br><span class="line"><span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> b</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">abs</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &gt; b &#123;</span><br><span class="line"><span class="keyword">return</span> a-b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> b-a</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åˆæ²¡æ—©èµ·ï¼Œä¸Šæµ·è¿™ç–«æƒ…ä½•æ—¶æ˜¯ä¸ªå¤´å•ŠğŸ˜®â€ğŸ’¨&lt;/p&gt;
&lt;h2 id=&quot;å‰‘æŒ‡-Offer-47-ç¤¼ç‰©çš„æœ€å¤§ä»·å€¼&quot;&gt;&lt;a href=&quot;#å‰‘æŒ‡-Offer-47-ç¤¼ç‰©çš„æœ€å¤§ä»·å€¼&quot; class=&quot;headerlink&quot; title=&quot;å‰‘æŒ‡ Offer 47. ç¤¼ç‰©çš„æœ€å¤§ä»·å€¼&quot;&gt;&lt;/a</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 13ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/15/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%2013%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/15/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%2013%EF%BC%89/</id>
    <published>2022-04-14T23:00:00.000Z</published>
    <updated>2022-04-15T00:35:25.375Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LeetCode366-å¯»æ‰¾äºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹"><a href="#LeetCode366-å¯»æ‰¾äºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹" class="headerlink" title="LeetCode366. å¯»æ‰¾äºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹"></a><a class="link" href="https://leetcode-cn.com/problems/find-leaves-of-binary-tree/">LeetCode366. å¯»æ‰¾äºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹<i class="fas fa-external-link-alt"></i></a></h2><p>#äºŒå‰æ ‘ #DFS </p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€æ£µäºŒå‰æ ‘ï¼Œè¯·æŒ‰ä»¥ä¸‹è¦æ±‚çš„é¡ºåºæ”¶é›†å®ƒçš„å…¨éƒ¨èŠ‚ç‚¹ï¼š</p><ol><li> ä¾æ¬¡ä»å·¦åˆ°å³ï¼Œæ¯æ¬¡æ”¶é›†å¹¶åˆ é™¤æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹</li><li> é‡å¤å¦‚ä¸Šè¿‡ç¨‹ç›´åˆ°æ•´æ£µæ ‘ä¸ºç©º</li></ol></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹:</span><br><span class="line"></span><br><span class="line">è¾“å…¥: [1,2,3,4,5]</span><br><span class="line">Â  </span><br><span class="line">Â          1</span><br><span class="line">         &#x2F; \</span><br><span class="line">        2   3</span><br><span class="line">       &#x2F; \     </span><br><span class="line">      4   5    </span><br><span class="line"></span><br><span class="line">è¾“å‡º: [[4,5,3],[2],[1]]</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">è§£é‡Š:</span><br><span class="line"></span><br><span class="line">1. åˆ é™¤å¶å­èŠ‚ç‚¹Â [4,5,3] ï¼Œå¾—åˆ°å¦‚ä¸‹æ ‘ç»“æ„ï¼š</span><br><span class="line"></span><br><span class="line">          1</span><br><span class="line">         &#x2F; </span><br><span class="line">        2          </span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">2. ç°åœ¨åˆ å»å¶å­èŠ‚ç‚¹Â [2]Â ï¼Œå¾—åˆ°å¦‚ä¸‹æ ‘ç»“æ„ï¼š</span><br><span class="line"></span><br><span class="line">          1          </span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">3. ç°åœ¨åˆ å»å¶å­èŠ‚ç‚¹Â [1]Â ï¼Œå¾—åˆ°ç©ºæ ‘ï¼š</span><br><span class="line"></span><br><span class="line">          []         </span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). å°†å¶å­ç»“ç‚¹æ”¶é›†çš„è¿‡ç¨‹ç›¸å½“äºæ˜¯æ”¶é›†æ ‘é«˜ç›¸åŒçš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥åªéœ€è¦ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„é«˜åº¦å¹¶ä¸”å°†ç›¸åŒé«˜åº¦çš„èŠ‚ç‚¹åŠ å…¥åŒä¸€ç´¢å¼•çš„æ•°ç»„ä¸­ï¼›<br>(2). åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„ <code>ret [][]int</code> æ¥ä¿å­˜æ‰€æœ‰å¶å­ç»“ç‚¹ï¼Œå½“èŠ‚ç‚¹çš„é«˜åº¦å°äº <code>len(ret)</code> æ—¶ï¼Œå¯ä»¥ç›´æ¥åœ¨å¯¹åº”çš„é«˜åº¦ç´¢å¼•æ•°ç»„ä¸­æ’å…¥èŠ‚ç‚¹çš„å€¼ï¼›å¦åˆ™å°±è¦ <code>append</code> <code>ret</code>  çš„é•¿åº¦ã€‚</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Definition for a binary tree node.</span></span><br><span class="line"><span class="comment">* type TreeNode struct &#123;</span></span><br><span class="line"><span class="comment">* Val int</span></span><br><span class="line"><span class="comment">* Left *TreeNode</span></span><br><span class="line"><span class="comment">* Right *TreeNode</span></span><br><span class="line"><span class="comment">* &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findLeaves</span><span class="params">(root *TreeNode)</span> [][]<span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">ret := [][]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line"><span class="keyword">if</span> root == <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> backTracking <span class="function"><span class="keyword">func</span><span class="params">(*TreeNode)</span> <span class="title">int</span></span></span><br><span class="line">backTracking = <span class="function"><span class="keyword">func</span><span class="params">(p *TreeNode)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> p == <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">height := <span class="number">1</span>+max(backTracking(p.Left), backTracking(p.Right))</span><br><span class="line"><span class="keyword">if</span> height &lt; <span class="built_in">len</span>(ret) &#123;</span><br><span class="line">ret[height] = <span class="built_in">append</span>(ret[height], p.Val)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, []<span class="keyword">int</span>&#123;p.Val&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> height</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">backTracking(root)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &gt; b &#123;</span><br><span class="line"><span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode474-ä¸€å’Œé›¶"><a href="#LeetCode474-ä¸€å’Œé›¶" class="headerlink" title="LeetCode474. ä¸€å’Œé›¶"></a><a class="link" href="https://leetcode-cn.com/problems/ones-and-zeroes/">LeetCode474. ä¸€å’Œé›¶<i class="fas fa-external-link-alt"></i></a></h2><p>#åŠ¨æ€è§„åˆ’ </p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²æ•°ç»„ strs å’Œä¸¤ä¸ªæ•´æ•° m å’Œ n ã€‚<br>è¯·ä½ æ‰¾å‡ºå¹¶è¿”å› strs çš„æœ€å¤§å­é›†çš„é•¿åº¦ï¼Œè¯¥å­é›†ä¸­ æœ€å¤š æœ‰ m ä¸ª 0 å’Œ n ä¸ª 1 ã€‚<br>å¦‚æœ x çš„æ‰€æœ‰å…ƒç´ ä¹Ÿæ˜¯ y çš„å…ƒç´ ï¼Œé›†åˆ x æ˜¯é›†åˆ y çš„ å­é›† ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šstrs &#x3D; [&quot;10&quot;, &quot;0001&quot;, &quot;111001&quot;, &quot;1&quot;, &quot;0&quot;], m &#x3D; 5, n &#x3D; 3</span><br><span class="line">è¾“å‡ºï¼š4</span><br><span class="line">è§£é‡Šï¼šæœ€å¤šæœ‰ 5 ä¸ª 0 å’Œ 3 ä¸ª 1 çš„æœ€å¤§å­é›†æ˜¯ &#123;&quot;10&quot;,&quot;0001&quot;,&quot;1&quot;,&quot;0&quot;&#125; ï¼Œå› æ­¤ç­”æ¡ˆæ˜¯ 4 ã€‚</span><br><span class="line">å…¶ä»–æ»¡è¶³é¢˜æ„ä½†è¾ƒå°çš„å­é›†åŒ…æ‹¬ &#123;&quot;0001&quot;,&quot;1&quot;&#125; å’Œ &#123;&quot;10&quot;,&quot;1&quot;,&quot;0&quot;&#125; ã€‚&#123;&quot;111001&quot;&#125; ä¸æ»¡è¶³é¢˜æ„ï¼Œå› ä¸ºå®ƒå« 4 ä¸ª 1 ï¼Œå¤§äº n çš„å€¼ 3 ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šstrs &#x3D; [&quot;10&quot;, &quot;0&quot;, &quot;1&quot;], m &#x3D; 1, n &#x3D; 1</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line">è§£é‡Šï¼šæœ€å¤§çš„å­é›†æ˜¯ &#123;&quot;0&quot;, &quot;1&quot;&#125; ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ 2 ã€‚</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D; strs.length &lt;&#x3D; 600</span><br><span class="line">1 &lt;&#x3D; strs[i].length &lt;&#x3D; 100</span><br><span class="line">strs[i]Â ä»…ç”±Â &#39;0&#39; å’ŒÂ &#39;1&#39; ç»„æˆ</span><br><span class="line">1 &lt;&#x3D; m, n &lt;&#x3D; 100</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). è¿™é“é¢˜å¯ä»¥çœ‹ä½œæ˜¯èƒŒåŒ…é—®é¢˜ï¼Œä½†æ˜¯å’Œç»å…¸çš„èƒŒåŒ…é—®é¢˜åªæœ‰ä¸€ç§å®¹é‡ä¸åŒï¼Œè¿™é“é¢˜æœ‰ä¸¤ç§å®¹é‡ï¼Œå³é€‰å–çš„å­—ç¬¦ä¸²å­é›†ä¸­çš„ 0 å’Œ 1 çš„æ•°é‡ä¸Šé™ï¼›<br>(2). ç»å…¸çš„èƒŒåŒ…é—®é¢˜å¯ä»¥ä½¿ç”¨äºŒç»´åŠ¨æ€è§„åˆ’æ±‚è§£ï¼Œä¸¤ä¸ªç»´åº¦åˆ†åˆ«æ˜¯ç‰©å“å’Œå®¹é‡ã€‚è¿™é“é¢˜æœ‰ä¸¤ç§å®¹é‡ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ä¸‰ç»´åŠ¨æ€è§„åˆ’æ±‚è§£ï¼Œä¸‰ä¸ªç»´åº¦åˆ†åˆ«æ˜¯å­—ç¬¦ä¸²ã€0 çš„å®¹é‡å’Œ 1 çš„å®¹é‡ï¼›<br>(3). å®šä¹‰ä¸‰ç»´æ•°ç»„ <code>dp</code>ï¼Œå…¶ä¸­ <code>dp[i][j][k]</code> è¡¨ç¤ºåœ¨å‰ i ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œä½¿ç”¨ j ä¸ª 0 å’Œ k ä¸ª 1 çš„æƒ…å†µä¸‹æœ€å¤šå¯ä»¥å¾—åˆ°çš„å­—ç¬¦ä¸²æ•°é‡ã€‚å‡è®¾æ•°ç»„ <code>strs</code> çš„é•¿åº¦ä¸º lï¼Œåˆ™æœ€ç»ˆç­”æ¡ˆä¸º <code>dp[l][m][n]</code>ã€‚<br>(4). å½“ 0 å’Œ 1 çš„å®¹é‡åˆ†åˆ«æ˜¯ j å’Œ k æ—¶ï¼Œè€ƒè™‘ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><ul><li>å¦‚æœ <code>j&lt;zeros</code> æˆ– <code>k&lt;ones</code>ï¼Œåˆ™ä¸èƒ½é€‰ç¬¬ i ä¸ªå­—ç¬¦ä¸²ï¼Œæ­¤æ—¶æœ‰ <code>dp[i][j][k]=dp[iâˆ’1][j][k]</code>ï¼›</li><li>å¦‚æœ<code>jâ‰¥zeros</code> ä¸” <code>kâ‰¥ones</code>ï¼Œåˆ™å¦‚æœä¸é€‰ç¬¬ i ä¸ªå­—ç¬¦ä¸²ï¼Œæœ‰ <code>dp[i][j][k]=dp[iâˆ’1][j][k]</code>ï¼Œå¦‚æœé€‰ç¬¬ i ä¸ªå­—ç¬¦ä¸²ï¼Œæœ‰ <code>dp[i][j][k]=dp[iâˆ’1][jâˆ’zeros][kâˆ’ones]+1</code>ï¼Œ<code>dp[i][j][k]</code> çš„å€¼åº”å–ä¸Šé¢ä¸¤é¡¹ä¸­çš„æœ€å¤§å€¼ã€‚<br>å› æ­¤çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š<br>$d p[i][j][k]= \begin{cases}d p[i-1][j][k], &amp; j&lt;\text { zeros } \mid k&lt;\text { ones } \ \max (d p[i-1][j][k], d p[i-1][j-\text { zeros }][k-\text { ones }]+1), &amp; j \geq \text { zeros } &amp; k \geq \text { ones }\end{cases}$</li></ul><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(L*M*N)</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findMaxForm</span><span class="params">(strs []<span class="keyword">string</span>, m <span class="keyword">int</span>, n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">dp := <span class="built_in">make</span>([][][]<span class="keyword">int</span>, <span class="built_in">len</span>(strs)+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> numCount <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span></span><br><span class="line">numCount = <span class="function"><span class="keyword">func</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">zeros, ones := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> s[i] == <span class="string">&#x27;0&#x27;</span> &#123;</span><br><span class="line">zeros++</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">ones++</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> zeros, ones</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;=<span class="built_in">len</span>(strs); i++ &#123;</span><br><span class="line">dp[i] = <span class="built_in">make</span>([][]<span class="keyword">int</span>, m+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> j:=<span class="number">0</span>; j&lt;=m; j++ &#123;</span><br><span class="line">dp[i][j] = <span class="built_in">make</span>([]<span class="keyword">int</span>, n+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k:=<span class="number">0</span>; k&lt;=n; k++ &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> i == <span class="number">0</span> &#123;</span><br><span class="line">dp[i][j][k] = <span class="number">0</span></span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">zeros, ones := numCount(strs[i<span class="number">-1</span>])</span><br><span class="line"><span class="keyword">if</span> j&lt;zeros || k&lt;ones &#123;</span><br><span class="line">dp[i][j][k] = dp[i<span class="number">-1</span>][j][k]</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">dp[i][j][k] = max(dp[i<span class="number">-1</span>][j][k], dp[i<span class="number">-1</span>][j-zeros][k-ones]+<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> dp[<span class="built_in">len</span>(strs)][m][n]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &gt; b &#123;</span><br><span class="line"><span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LeetCode366-å¯»æ‰¾äºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹&quot;&gt;&lt;a href=&quot;#LeetCode366-å¯»æ‰¾äºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;LeetCode366. å¯»æ‰¾äºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹&quot;&gt;&lt;/a&gt;&lt;a class=&quot;link&quot; hre</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>GFS è®ºæ–‡é˜…è¯»</title>
    <link href="http://jiahaohong1997.github.io/2022/04/14/GFS%20%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"/>
    <id>http://jiahaohong1997.github.io/2022/04/14/GFS%20%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/</id>
    <published>2022-04-14T11:40:00.000Z</published>
    <updated>2022-04-14T11:51:16.850Z</updated>
    
    
    
    
    <category term="åˆ†å¸ƒå¼ç³»ç»Ÿ" scheme="http://jiahaohong1997.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="mit6.824" scheme="http://jiahaohong1997.github.io/tags/mit6-824/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 12ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/14/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%2012%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/14/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%2012%EF%BC%89/</id>
    <published>2022-04-14T02:00:00.000Z</published>
    <updated>2022-04-14T07:12:47.740Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥æœªæ—©èµ·ï¼Œæ·¦ï¼</p><h2 id="LeetCode1151-æœ€å°‘äº¤æ¢æ¬¡æ•°æ¥ç»„åˆæ‰€æœ‰çš„-1"><a href="#LeetCode1151-æœ€å°‘äº¤æ¢æ¬¡æ•°æ¥ç»„åˆæ‰€æœ‰çš„-1" class="headerlink" title="LeetCode1151. æœ€å°‘äº¤æ¢æ¬¡æ•°æ¥ç»„åˆæ‰€æœ‰çš„ 1"></a><a class="link" href="https://leetcode-cn.com/problems/minimum-swaps-to-group-all-1s-together/">LeetCode1151. æœ€å°‘äº¤æ¢æ¬¡æ•°æ¥ç»„åˆæ‰€æœ‰çš„ 1<i class="fas fa-external-link-alt"></i></a></h2><p>#æ»‘åŠ¨çª—å£</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å‡ºä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„Â <code>data</code>ï¼Œä½ éœ€è¦é€šè¿‡äº¤æ¢ä½ç½®ï¼Œå°†æ•°ç»„ä¸­ <strong>ä»»ä½•ä½ç½®</strong> ä¸Šçš„ 1 ç»„åˆåˆ°ä¸€èµ·ï¼Œå¹¶è¿”å›æ‰€æœ‰å¯èƒ½ä¸­æ‰€éœ€Â <strong>æœ€å°‘çš„äº¤æ¢æ¬¡æ•°</strong>ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br><span class="line">è¾“å…¥: data &#x3D; [1,0,1,0,1]</span><br><span class="line">è¾“å‡º: 1</span><br><span class="line">è§£é‡Š: </span><br><span class="line">æœ‰ä¸‰ç§å¯èƒ½çš„æ–¹æ³•å¯ä»¥æŠŠæ‰€æœ‰çš„ 1 ç»„åˆåœ¨ä¸€èµ·ï¼š</span><br><span class="line">[1,1,1,0,0]ï¼Œäº¤æ¢ 1 æ¬¡ï¼›</span><br><span class="line">[0,1,1,1,0]ï¼Œäº¤æ¢ 2 æ¬¡ï¼›</span><br><span class="line">[0,0,1,1,1]ï¼Œäº¤æ¢ 1 æ¬¡ã€‚</span><br><span class="line">æ‰€ä»¥æœ€å°‘çš„äº¤æ¢æ¬¡æ•°ä¸º 1ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹Â  2:</span><br><span class="line">è¾“å…¥ï¼šdata &#x3D;Â [0,0,0,1,0]</span><br><span class="line">è¾“å‡ºï¼š0</span><br><span class="line">è§£é‡Šï¼š </span><br><span class="line">ç”±äºæ•°ç»„ä¸­åªæœ‰ä¸€ä¸ª 1ï¼Œæ‰€ä»¥ä¸éœ€è¦äº¤æ¢ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 3:</span><br><span class="line">è¾“å…¥ï¼šdata &#x3D;Â [1,0,1,0,1,0,0,1,1,0,1]</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">äº¤æ¢ 3 æ¬¡ï¼Œä¸€ç§å¯è¡Œçš„åªç”¨ 3 æ¬¡äº¤æ¢çš„è§£å†³æ–¹æ¡ˆæ˜¯ [0,0,0,0,0,1,1,1,1,1,1]ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 4:</span><br><span class="line">è¾“å…¥: data &#x3D; [1,0,1,0,1,0,1,1,1,0,1,0,0,1,1,1,0,0,1,1,1,0,1,0,1,1,0,0,0,1,1,1,1,0,0,1]</span><br><span class="line">è¾“å‡º: 8</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤º:</span><br><span class="line">1 &lt;&#x3D; data.length &lt;&#x3D; 105</span><br><span class="line">data[i]Â &#x3D;&#x3D;Â 0Â orÂ 1.</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). æˆ‘ä»¬éœ€è¦å¾—åˆ°çš„è¾“å‡ºçš„æœ€ç»ˆæ•ˆæœæ˜¯æ•°ç»„ä¸­æ‰€æœ‰çš„ $1$ éƒ½è¢«èšé›†äºä¸€ä¸ªå­æ•°ç»„ä¸­ï¼Œè¿™ä¸ªå­æ•°ç»„çš„é•¿åº¦å°±æ˜¯æ•°ç»„ä¸­æ‰€æœ‰ $1$ çš„æ•°é‡ <code>totalOnes</code>ï¼›<br>(2). é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­æ‰€æœ‰é•¿åº¦ç­‰äº <code>totalOnes</code> çš„å­æ•°ç»„ä¸­å«æœ‰ $1$ æœ€å¤šçš„ä¸ªæ•°æ˜¯å¤šå°‘å°±å¯ä»¥äº†ï¼Œå› ä¸º $0$ çš„ä¸ªæ•°å°±æ˜¯éœ€è¦äº¤æ¢çš„æœ€å°‘æ¬¡æ•°ï¼›<br>(3). æ€ä¹ˆå¿«é€Ÿçš„ç»Ÿè®¡æ‰€æœ‰è¯¥é•¿åº¦çš„å­æ•°ç»„çš„å« $1$ æ•°é‡å‘¢ï¼Ÿè¿™é‡Œå°±å¯ä»¥ä½¿ç”¨æ»‘åŠ¨çª—å£ï¼›<br>(4). é¦–å…ˆç»Ÿè®¡ç¬¬ä¸€ä¸ªçª—å£å†… $1$ çš„ä¸ªæ•°ï¼Œä¹‹ååªéœ€è¦ç§»åŠ¨æ»‘åŠ¨çª—å£ï¼Œå†åˆ†åˆ«åŠ ä¸Šç§»å…¥çª—å£å’Œç§»å‡ºçª—å£çš„å…ƒç´ å³å¯ï¼Œé¿å…äº†å¯¹æ¯ä¸ªçª—å£éå†ç»Ÿè®¡ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N)</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minSwaps</span><span class="params">(data []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">totalOnes := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(data); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> data[i] == <span class="number">1</span> &#123;</span><br><span class="line">totalOnes++</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">l, r := <span class="number">0</span>, totalOnes</span><br><span class="line">countOnes := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i:=l; i&lt;r; i++ &#123;</span><br><span class="line"><span class="keyword">if</span> data[i] == <span class="number">1</span> &#123;</span><br><span class="line">countOnes++</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">maxWindowOnes := countOnes</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> r &lt; <span class="built_in">len</span>(data) &#123;</span><br><span class="line">x := data[r]</span><br><span class="line">r++</span><br><span class="line"></span><br><span class="line">countOnes += x-data[l]</span><br><span class="line">maxWindowOnes = max(maxWindowOnes, countOnes)</span><br><span class="line"></span><br><span class="line">l++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> totalOnes-maxWindowOnes</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &gt; b &#123;</span><br><span class="line"><span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="249-ç§»ä½å­—ç¬¦ä¸²åˆ†ç»„"><a href="#249-ç§»ä½å­—ç¬¦ä¸²åˆ†ç»„" class="headerlink" title="249. ç§»ä½å­—ç¬¦ä¸²åˆ†ç»„"></a><a class="link" href="https://leetcode-cn.com/problems/group-shifted-strings/">249. ç§»ä½å­—ç¬¦ä¸²åˆ†ç»„<i class="fas fa-external-link-alt"></i></a></h2><p>#map #å­—ç¬¦ä¸² </p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹è¯¥å­—ç¬¦ä¸²å¯ä»¥è¿›è¡Œ â€œç§»ä½â€ çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯å°†å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—æ¯éƒ½å˜ä¸ºå…¶åœ¨å­—æ¯è¡¨ä¸­åç»­çš„å­—æ¯ï¼Œæ¯”å¦‚ï¼šâ€abcâ€ -&gt; â€œbcdâ€ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŒç»­è¿›è¡Œ â€œç§»ä½â€ æ“ä½œï¼Œä»è€Œç”Ÿæˆå¦‚ä¸‹ç§»ä½åºåˆ—ï¼š<br><code>&quot;abc&quot; -&gt; &quot;bcd&quot; -&gt; ... -&gt; &quot;xyz&quot;</code><br>ç»™å®šä¸€ä¸ªåŒ…å«ä»…å°å†™å­—æ¯å­—ç¬¦ä¸²çš„åˆ—è¡¨ï¼Œå°†è¯¥åˆ—è¡¨ä¸­æ‰€æœ‰æ»¡è¶³Â â€œç§»ä½â€ æ“ä½œè§„å¾‹çš„ç»„åˆè¿›è¡Œåˆ†ç»„å¹¶è¿”å›ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼š[&quot;abc&quot;, &quot;bcd&quot;, &quot;acef&quot;, &quot;xyz&quot;, &quot;az&quot;, &quot;ba&quot;, &quot;a&quot;, &quot;z&quot;]</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">[</span><br><span class="line">  [&quot;abc&quot;,&quot;bcd&quot;,&quot;xyz&quot;],</span><br><span class="line">  [&quot;az&quot;,&quot;ba&quot;],</span><br><span class="line">  [&quot;acef&quot;],</span><br><span class="line">  [&quot;a&quot;,&quot;z&quot;]</span><br><span class="line">]</span><br><span class="line">è§£é‡Šï¼šå¯ä»¥è®¤ä¸ºå­—æ¯è¡¨é¦–å°¾ç›¸æ¥ï¼Œæ‰€ä»¥ &#39;z&#39; çš„åç»­ä¸º &#39;a&#39;ï¼Œæ‰€ä»¥ [&quot;az&quot;,&quot;ba&quot;] ä¹Ÿæ»¡è¶³ â€œç§»ä½â€ æ“ä½œè§„å¾‹ã€‚</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). å¯¹äºåˆå§‹å­—ç¬¦ä¸²æ•°ç»„ä¸­ç»™å®šçš„æ‰€æœ‰å…ƒç´ ï¼Œæˆ‘ä»¬éƒ½è¦æ‰¾åˆ°å…¶å¯¹åº”çš„æ‰€æœ‰å˜æ¢åçš„å­—ç¬¦ä¸²ï¼Œç„¶åå†åœ¨åˆå§‹å­—ç¬¦ä¸²æ•°ç»„ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰è¿™äº›å˜æ¢åçš„å­—ç¬¦ä¸²ï¼›<br>(2). å¯¹äºæŸ¥æ‰¾æ“ä½œï¼Œç”¨ <code>map</code> æ˜¯æ—¶é—´ä»£ä»·æœ€å°çš„æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆéå†æ•´ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œå°†æ‰€æœ‰å­—ç¬¦ä¸²å­˜å…¥ <code>map</code> ä¸­ï¼›<br>(4). åœ¨å¯¹æŸä¸€ä¸ªåºåˆ—ä¸­åº”è¯¥å‡ºç°çš„æ‰€æœ‰å­—ç¬¦ä¸²çš„å½¢æ€éƒ½è¿›è¡ŒæŸ¥æ‰¾åï¼Œå†æ¬¡éå†åˆ°å±äºè¯¥åºåˆ—çš„æŸä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œå°±ä¸ç”¨é‡æ–°æŸ¥æ‰¾æ•´ä¸ªåºåˆ—ã€‚æ‰€ä»¥è¦å†ä½¿ç”¨ä¸€ä¸ª <code>map</code> æ¥è®°å½•å·²ç»éå†è¿‡ä¸”åœ¨åˆå§‹å­—ç¬¦ä¸²æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå› ä¸ºå­˜åœ¨é‡å¤å…ƒç´ ï¼Œæ‰€ä»¥ <code>map</code> çš„ <code>value</code> è¦ä½¿ç”¨ <code>int</code> ç±»å‹è®°å½•å‡ºç°çš„æ¬¡æ•°ï¼Œå¹¶ä¸”åœ¨ç”Ÿæˆåºåˆ—çš„æ—¶å€™è¦ç”Ÿæˆå¯¹åº”æ¬¡æ•°çš„è¯¥å­—ç¬¦ä¸²ï¼›<br>(5). å› ä¸ºæœ€ç»ˆçš„åºåˆ—è¦æŒ‰ç…§å­—å…¸åºæ’åˆ—ï¼Œé‚£ä¹ˆå¯¹äºéå†åˆ°çš„æŸä¸€ä¸ªå…ƒç´ ï¼Œè¦åœ¨å…¶åºåˆ—çš„å¤´éƒ¨æ’å…¥å­—å…¸åºåœ¨å…¶å‰é¢çš„å­—ç¬¦ä¸²ï¼Œåœ¨å…¶åé¢æ’å…¥å­—å…¸åºåœ¨å…¶åé¢çš„å­—ç¬¦ä¸²ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-1"><a href="#æ—¶é—´å¤æ‚åº¦-1" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(26*N)</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">groupStrings</span><span class="params">(strings []<span class="keyword">string</span>)</span> [][]<span class="title">string</span></span> &#123;</span><br><span class="line"></span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">bool</span>)</span><br><span class="line">traveled := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(strings); i++ &#123;</span><br><span class="line">m[strings[i]] = <span class="literal">true</span></span><br><span class="line">traveled[strings[i]]++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> judgeUp <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">string</span>)</span> <span class="title">string</span></span></span><br><span class="line">judgeUp = <span class="function"><span class="keyword">func</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> ret <span class="keyword">string</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">x := s[i]</span><br><span class="line"><span class="keyword">if</span> x == <span class="string">&#x27;a&#x27;</span> &#123;</span><br><span class="line">ret += <span class="string">&quot;z&quot;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">ret += <span class="keyword">string</span>(x<span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> judgeDown <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">string</span>)</span> <span class="title">string</span></span></span><br><span class="line">judgeDown = <span class="function"><span class="keyword">func</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> ret <span class="keyword">string</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i&lt;<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">x := s[i]</span><br><span class="line"><span class="keyword">if</span> x == <span class="string">&#x27;z&#x27;</span> &#123;</span><br><span class="line">ret += <span class="string">&quot;a&quot;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">ret += <span class="keyword">string</span>(x+<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ret := [][]<span class="keyword">string</span>&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(strings); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> traveled[strings[i]] == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t := []<span class="keyword">string</span>&#123;&#125;</span><br><span class="line">x := strings[i]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x[<span class="number">0</span>] != <span class="string">&#x27;a&#x27;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> m[x] &#123;</span><br><span class="line"><span class="keyword">for</span> traveled[x] &gt; <span class="number">0</span> &#123;</span><br><span class="line">t = <span class="built_in">append</span>([]<span class="keyword">string</span>&#123;x&#125;, t...)</span><br><span class="line">traveled[x]--</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">x = judgeUp(x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> m[x] &amp;&amp; traveled[x] &gt; <span class="number">0</span> &#123;</span><br><span class="line">t = <span class="built_in">append</span>([]<span class="keyword">string</span>&#123;x&#125;, t...)</span><br><span class="line">traveled[x]--</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">x = judgeDown(strings[i])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x[<span class="number">0</span>] != <span class="string">&#x27;z&#x27;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> m[x] &#123;</span><br><span class="line"><span class="keyword">for</span> traveled[x] &gt; <span class="number">0</span> &#123;</span><br><span class="line">t = <span class="built_in">append</span>(t, x)</span><br><span class="line">traveled[x]--</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">x = judgeDown(x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x[<span class="number">0</span>] == <span class="string">&#x27;z&#x27;</span> &amp;&amp; m[x] &amp;&amp; traveled[x] &gt; <span class="number">0</span> &#123;</span><br><span class="line">t = <span class="built_in">append</span>(t, x)</span><br><span class="line">traveled[x]--</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ret = <span class="built_in">append</span>(ret, t)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="54-èºæ—‹çŸ©é˜µ"><a href="#54-èºæ—‹çŸ©é˜µ" class="headerlink" title="54. èºæ—‹çŸ©é˜µ"></a><a class="link" href="https://leetcode-cn.com/problems/spiral-matrix/">54. èºæ—‹çŸ©é˜µ<i class="fas fa-external-link-alt"></i></a></h2><p>#æ¨¡æ‹Ÿé¢˜ </p><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ª <code>m</code> è¡Œ <code>n</code> åˆ—çš„çŸ©é˜µ <code>matrix</code> ï¼Œè¯·æŒ‰ç…§ <strong>é¡ºæ—¶é’ˆèºæ—‹é¡ºåº</strong> ï¼Œè¿”å›çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br></pre></td></tr></table></figure><p><img lazyload src="/images/loading.svg" data-src="spiral1.jpg" alt="avatar"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šmatrix &#x3D; [[1,2,3],[4,5,6],[7,8,9]]</span><br><span class="line">è¾“å‡ºï¼š[1,2,3,6,9,8,7,4,5]</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br></pre></td></tr></table></figure><p><img lazyload src="/images/loading.svg" data-src="spiral2.jpg" alt="avatar"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šmatrix &#x3D; [[1,2,3,4],[5,6,7,8],[9,10,11,12]]</span><br><span class="line">è¾“å‡ºï¼š[1,2,3,4,8,12,11,10,9,5,6,7]</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">m &#x3D;&#x3D; matrix.length</span><br><span class="line">n &#x3D;&#x3D; matrix[i].length</span><br><span class="line">1 &lt;&#x3D; m, n &lt;&#x3D; 10</span><br><span class="line">-100 &lt;&#x3D; matrix[i][j] &lt;&#x3D; 100</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). æœ¬é¢˜ä¸»è¦æ³¨æ„ä¸¤ç‚¹ï¼šå¦‚ä½•ç¡®ä¿å¤–å±‚çŸ©é˜µä¸é‡å¤éå†ï¼›å¦‚æœä¿è¯éå†çš„æ–¹å‘ï¼›<br>(2). å¯¹äºå¤–å±‚çŸ©é˜µï¼Œå¯ä»¥é‡‡ç”¨å››ä¸ªå˜é‡ <code>left</code>ã€<code>right</code>ã€<code>top</code>ã€<code>bottom</code> é™åˆ¶çŸ©é˜µçš„æ”¶ç¼©èŒƒå›´ï¼›<br>(3). å¯¹äºæœ€ç»ˆè¡Œ/åˆ—çš„éå†æ–¹å‘é—®é¢˜ï¼Œè®¾ç½®ä¸¤ä¸ª <code>bool</code> å˜é‡ <code>down</code> å’Œ <code>turnRight</code>ï¼Œåœ¨å‘ä¸‹\å³éå†è¿‡åï¼Œå°†è¿™ä¸¤ä¸ªå˜é‡ç½®ä¸º <code>false</code>ï¼Œå¦åˆ™ç½®ä¸º <code>true</code>ï¼Œå°±èƒ½ä¿è¯ä¸‹æ¬¡æ˜¯å’Œä¸Šæ¬¡ç›¸åçš„éå†æ–¹å‘ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-2"><a href="#æ—¶é—´å¤æ‚åº¦-2" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(M*N)</p><h3 id="è§£é¢˜ä»£ç -2"><a href="#è§£é¢˜ä»£ç -2" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">spiralOrder</span><span class="params">(matrix [][]<span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">high = <span class="number">0</span></span><br><span class="line">low = <span class="built_in">len</span>(matrix)<span class="number">-1</span></span><br><span class="line">left = <span class="number">0</span></span><br><span class="line">right = <span class="built_in">len</span>(matrix[<span class="number">0</span>])<span class="number">-1</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ret := <span class="built_in">make</span>([]<span class="keyword">int</span>,<span class="number">0</span>)</span><br><span class="line">down := <span class="literal">true</span></span><br><span class="line">turnRight := <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> low &gt;= high &amp;&amp; right &gt;= left &#123;</span><br><span class="line"><span class="keyword">if</span> low == high &#123;</span><br><span class="line"><span class="keyword">var</span> x, y <span class="keyword">int</span></span><br><span class="line"><span class="keyword">if</span> turnRight &#123;</span><br><span class="line">x, y = left, right</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">x, y = right, left</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := x; i &lt;= y; i++ &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, matrix[low][i])</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> left == right &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x, y <span class="keyword">int</span></span><br><span class="line"><span class="keyword">if</span> down &#123;</span><br><span class="line">x, y = high, low</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">x, y = low, high</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=x; i&lt;=y; i++ &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, matrix[i][left])</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := left; i&lt;right; i++ &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, matrix[high][i])</span><br><span class="line">turnRight = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=high; i&lt;low; i++ &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, matrix[i][right])</span><br><span class="line">down = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=right; i&gt;left; i-- &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, matrix[low][i])</span><br><span class="line">turnRight = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=low; i&gt;high; i-- &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, matrix[i][left])</span><br><span class="line">down = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">high++</span><br><span class="line">left++</span><br><span class="line">low--</span><br><span class="line">right--</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥æœªæ—©èµ·ï¼Œæ·¦ï¼&lt;/p&gt;
&lt;h2 id=&quot;LeetCode1151-æœ€å°‘äº¤æ¢æ¬¡æ•°æ¥ç»„åˆæ‰€æœ‰çš„-1&quot;&gt;&lt;a href=&quot;#LeetCode1151-æœ€å°‘äº¤æ¢æ¬¡æ•°æ¥ç»„åˆæ‰€æœ‰çš„-1&quot; class=&quot;headerlink&quot; title=&quot;LeetCode1151. æœ€å°‘äº¤æ¢æ¬¡æ•°æ¥ç»„</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 11ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/13/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%2011%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/13/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%2011%EF%BC%89/</id>
    <published>2022-04-12T22:00:00.000Z</published>
    <updated>2022-04-13T00:16:01.759Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LeetCode353-è´ªåƒè›‡"><a href="#LeetCode353-è´ªåƒè›‡" class="headerlink" title="LeetCode353. è´ªåƒè›‡"></a><a class="link" href="https://leetcode-cn.com/problems/design-snake-game/">LeetCode353. è´ªåƒè›‡<i class="fas fa-external-link-alt"></i></a></h2><p>#é˜Ÿåˆ— #è®¾è®¡é¢˜</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>è¯·ä½ è®¾è®¡ä¸€ä¸ªÂ è´ªåƒè›‡æ¸¸æˆï¼Œè¯¥æ¸¸æˆå°†ä¼šåœ¨ä¸€ä¸ª å±å¹•å°ºå¯¸ = å®½åº¦ x é«˜åº¦Â çš„å±å¹•ä¸Šè¿è¡Œã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰è¿™ä¸ªæ¸¸æˆï¼Œå¯ä»¥Â ç‚¹å‡»è¿™é‡ŒÂ åœ¨çº¿è¯•ç©ã€‚<br>èµ·åˆæ—¶ï¼Œè›‡åœ¨å·¦ä¸Šè§’çš„ (0, 0) ä½ç½®ï¼Œèº«ä½“é•¿åº¦ä¸º 1 ä¸ªå•ä½ã€‚<br>ä½ å°†ä¼šè¢«ç»™å‡ºä¸€ä¸ªæ•°ç»„å½¢å¼çš„é£Ÿç‰©ä½ç½®åºåˆ— food ï¼Œå…¶ä¸­Â food[i] = (ri, ci) ã€‚å½“è›‡åƒåˆ°é£Ÿç‰©æ—¶ï¼Œèº«å­çš„é•¿åº¦ä¼šå¢åŠ  1 ä¸ªå•ä½ï¼Œå¾—åˆ†ä¹Ÿä¼š +1 ã€‚<br>é£Ÿç‰©ä¸ä¼šåŒæ—¶å‡ºç°ï¼Œä¼šæŒ‰åˆ—è¡¨çš„é¡ºåºé€ä¸€æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚æ¯”æ–¹è®²ï¼Œç¬¬ä¸€ä¸ªé£Ÿç‰©è¢«è›‡åƒæ‰åï¼Œç¬¬äºŒä¸ªé£Ÿç‰©æ‰ä¼šå‡ºç°ã€‚<br>å½“ä¸€ä¸ªé£Ÿç‰©åœ¨å±å¹•ä¸Šå‡ºç°æ—¶ï¼Œä¿è¯ ä¸ä¼š å‡ºç°åœ¨è¢«è›‡èº«ä½“å æ®çš„æ ¼å­é‡Œã€‚<br>å¦‚æœè›‡è¶Šç•Œï¼ˆä¸è¾¹ç•Œç›¸æ’ï¼‰æˆ–è€…å¤´ä¸ ç§»åŠ¨å çš„èº«ä½“ç›¸æ’ï¼ˆå³ï¼Œèº«é•¿ä¸º 4 çš„è›‡æ— æ³•ä¸è‡ªå·±ç›¸æ’ï¼‰ï¼Œæ¸¸æˆç»“æŸã€‚</p></blockquote><blockquote><p>å®ç° <code>SnakeGame</code> ç±»ï¼š<br>SnakeGame(int width, int height, int[][] food) åˆå§‹åŒ–å¯¹è±¡ï¼Œå±å¹•å¤§å°ä¸º height x width ï¼Œé£Ÿç‰©ä½ç½®åºåˆ—ä¸º food<br>int move(String direction) è¿”å›è›‡åœ¨æ–¹å‘ direction ä¸Šç§»åŠ¨åçš„å¾—åˆ†ã€‚å¦‚æœæ¸¸æˆç»“æŸï¼Œè¿”å› -1 ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br></pre></td></tr></table></figure><p><img lazyload src="/images/loading.svg" data-src="snake.jpg" alt="avatar"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">[&quot;SnakeGame&quot;, &quot;move&quot;, &quot;move&quot;, &quot;move&quot;, &quot;move&quot;, &quot;move&quot;, &quot;move&quot;]</span><br><span class="line">[[3, 2, [[1, 2], [0, 1]]], [&quot;R&quot;], [&quot;D&quot;], [&quot;R&quot;], [&quot;U&quot;], [&quot;L&quot;], [&quot;U&quot;]]</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">[null, 0, 0, 1, 1, 2, -1]</span><br><span class="line"></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">SnakeGame snakeGame &#x3D; new SnakeGame(3, 2, [[1, 2], [0, 1]]);</span><br><span class="line">snakeGame.move(&quot;R&quot;); &#x2F;&#x2F; è¿”å› 0</span><br><span class="line">snakeGame.move(&quot;D&quot;); &#x2F;&#x2F; è¿”å› 0</span><br><span class="line">snakeGame.move(&quot;R&quot;); &#x2F;&#x2F; è¿”å› 1 ï¼Œè›‡åƒæ‰äº†ç¬¬ä¸€ä¸ªé£Ÿç‰©ï¼ŒåŒæ—¶ç¬¬äºŒä¸ªé£Ÿç‰©å‡ºç°åœ¨ (0, 1)</span><br><span class="line">snakeGame.move(&quot;U&quot;); &#x2F;&#x2F; è¿”å› 1</span><br><span class="line">snakeGame.move(&quot;L&quot;); &#x2F;&#x2F; è¿”å› 2 ï¼Œè›‡åƒæ‰äº†ç¬¬äºŒä¸ªé£Ÿç‰©ï¼Œæ²¡æœ‰å‡ºç°æ›´å¤šé£Ÿç‰©</span><br><span class="line">snakeGame.move(&quot;U&quot;); &#x2F;&#x2F; è¿”å› -1 ï¼Œè›‡ä¸è¾¹ç•Œç›¸æ’ï¼Œæ¸¸æˆç»“æŸ</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D; width, height &lt;&#x3D; 104</span><br><span class="line">1 &lt;&#x3D; food.length &lt;&#x3D; 50</span><br><span class="line">food[i].length &#x3D;&#x3D; 2</span><br><span class="line">0 &lt;&#x3D; ri &lt; height</span><br><span class="line">0 &lt;&#x3D; ci &lt; width</span><br><span class="line">direction.length &#x3D;&#x3D; 1</span><br><span class="line">direction is &#39;U&#39;, &#39;D&#39;, &#39;L&#39;, or &#39;R&#39;.</span><br><span class="line">æœ€å¤šè°ƒç”¨ 104 æ¬¡ move æ–¹æ³•</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). é¦–å…ˆæ˜ç¡®ç»“æ„ä½“ä¸­éœ€è¦ä»€ä¹ˆå…ƒç´ ï¼Œé¦–å…ˆéœ€è¦ä¸€ä¸ªäºŒç»´æ•°ç»„æ¥è®°å½•è›‡èº«ä½“åœ¨çš„ä½ç½®ï¼Œå…¶æ¬¡è¿˜éœ€è¦ä¸€ä¸ªç´¢å¼•å·æ¥è®°å½•å½“å‰å‡ºç°çš„é£Ÿç‰©æ˜¯ç¬¬å‡ ä¸ªï¼›<br>(2). åœ¨ç§»åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆè¦æ ¹æ®ç§»åŠ¨çš„æ–¹å‘ç¡®è®¤ğŸå¤´åº”è¯¥å‡ºç°åœ¨çš„æ–°ä½ç½®çš„åæ ‡æ˜¯å¦åœ¨ç•Œé™å†…ã€‚ç„¶åæ ¹æ®é£Ÿç‰©åº”è¯¥å‡ºç°çš„ä½ç½®ï¼ˆæˆ–è€…é£Ÿç‰©è¢«åƒå®Œï¼‰ç¡®å®šğŸå¤´æ˜¯å¦ç¢°è§¦åˆ°é£Ÿç‰©ï¼›<br>(3). å¦‚æœç¢°è§¦åˆ°ï¼Œé‚£ä¹ˆå°±åƒæ‰ï¼Œå¹¶ä¸”é£Ÿç‰©ç´¢å¼•å· +1ï¼›å¦‚æœæ²¡æœ‰ç¢°è§¦åˆ°ï¼Œé‚£ä¹ˆå°±åˆ¤æ–­æ˜¯å¦ä¼šâ€œå’¬åˆ°â€è‡ªå·±çš„èº«ä½“ã€‚</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> SnakeGame <span class="keyword">struct</span> &#123;</span><br><span class="line">snakePos [][]<span class="keyword">int</span></span><br><span class="line">width <span class="keyword">int</span></span><br><span class="line">height <span class="keyword">int</span></span><br><span class="line">food [][]<span class="keyword">int</span></span><br><span class="line">foodIndex <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Constructor</span><span class="params">(width <span class="keyword">int</span>, height <span class="keyword">int</span>, food [][]<span class="keyword">int</span>)</span> <span class="title">SnakeGame</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> SnakeGame &#123;</span><br><span class="line">snakePos : [][]<span class="keyword">int</span>&#123;&#123;<span class="number">0</span>,<span class="number">0</span>&#125;&#125;,</span><br><span class="line">width : width,</span><br><span class="line">height : height,</span><br><span class="line">food : food,</span><br><span class="line">foodIndex : <span class="number">0</span>,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *SnakeGame)</span> <span class="title">Move</span><span class="params">(direction <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">h, w := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">switch</span> direction &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;R&quot;</span>:</span><br><span class="line">h, w = this.snakePos[<span class="number">0</span>][<span class="number">0</span>], this.snakePos[<span class="number">0</span>][<span class="number">1</span>]+<span class="number">1</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;L&quot;</span>:</span><br><span class="line">h, w = this.snakePos[<span class="number">0</span>][<span class="number">0</span>], this.snakePos[<span class="number">0</span>][<span class="number">1</span>]<span class="number">-1</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;U&quot;</span>:</span><br><span class="line">h, w = this.snakePos[<span class="number">0</span>][<span class="number">0</span>]<span class="number">-1</span>, this.snakePos[<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;D&quot;</span>:</span><br><span class="line">h, w = this.snakePos[<span class="number">0</span>][<span class="number">0</span>]+<span class="number">1</span>, this.snakePos[<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (h &lt; <span class="number">0</span> || h &gt;= this.height) || (w &lt; <span class="number">0</span> || w &gt;= this.width) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">this.snakePos = <span class="built_in">append</span>([][]<span class="keyword">int</span>&#123;&#123;h,w&#125;&#125;, this.snakePos...)</span><br><span class="line"><span class="keyword">if</span> this.foodIndex &lt; <span class="built_in">len</span>(this.food) &#123;</span><br><span class="line"><span class="keyword">if</span> h == this.food[this.foodIndex][<span class="number">0</span>] &amp;&amp; w == this.food[this.foodIndex][<span class="number">1</span>] &#123;</span><br><span class="line">this.foodIndex++</span><br><span class="line"><span class="keyword">return</span> this.foodIndex</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">this.snakePos = this.snakePos[:<span class="built_in">len</span>(this.snakePos)<span class="number">-1</span>]</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(this.snakePos); i++ &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> this.snakePos[i][<span class="number">0</span>] == h &amp;&amp; this.snakePos[i][<span class="number">1</span>] == w &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> this.foodIndex</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">this.snakePos = this.snakePos[:<span class="built_in">len</span>(this.snakePos)<span class="number">-1</span>]</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(this.snakePos); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> this.snakePos[i][<span class="number">0</span>] == h &amp;&amp; this.snakePos[i][<span class="number">1</span>] == w &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> this.foodIndex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Your SnakeGame object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment">* obj := Constructor(width, height, food);</span></span><br><span class="line"><span class="comment">* param_1 := obj.Move(direction);</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="LeetCode256-ç²‰åˆ·æˆ¿å­"><a href="#LeetCode256-ç²‰åˆ·æˆ¿å­" class="headerlink" title="LeetCode256. ç²‰åˆ·æˆ¿å­"></a><a class="link" href="https://leetcode-cn.com/problems/paint-house/">LeetCode256. ç²‰åˆ·æˆ¿å­<i class="fas fa-external-link-alt"></i></a></h2><p>#åŠ¨æ€è§„åˆ’</p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>å‡å¦‚æœ‰ä¸€æ’æˆ¿å­ï¼Œå…± n ä¸ªï¼Œæ¯ä¸ªæˆ¿å­å¯ä»¥è¢«ç²‰åˆ·æˆçº¢è‰²ã€è“è‰²æˆ–è€…ç»¿è‰²è¿™ä¸‰ç§é¢œè‰²ä¸­çš„ä¸€ç§ï¼Œä½ éœ€è¦ç²‰åˆ·æ‰€æœ‰çš„æˆ¿å­å¹¶ä¸”ä½¿å…¶ç›¸é‚»çš„ä¸¤ä¸ªæˆ¿å­é¢œè‰²ä¸èƒ½ç›¸åŒã€‚<br>å½“ç„¶ï¼Œå› ä¸ºå¸‚åœºä¸Šä¸åŒé¢œè‰²æ²¹æ¼†çš„ä»·æ ¼ä¸åŒï¼Œæ‰€ä»¥æˆ¿å­ç²‰åˆ·æˆä¸åŒé¢œè‰²çš„èŠ±è´¹æˆæœ¬ä¹Ÿæ˜¯ä¸åŒçš„ã€‚æ¯ä¸ªæˆ¿å­ç²‰åˆ·æˆä¸åŒé¢œè‰²çš„èŠ±è´¹æ˜¯ä»¥ä¸€ä¸ªÂ n x 3Â çš„æ­£æ•´æ•°çŸ©é˜µ costs æ¥è¡¨ç¤ºçš„ã€‚<br>ä¾‹å¦‚ï¼Œcosts[0][0] è¡¨ç¤ºç¬¬ 0 å·æˆ¿å­ç²‰åˆ·æˆçº¢è‰²çš„æˆæœ¬èŠ±è´¹ï¼›costs[1][2]Â è¡¨ç¤ºç¬¬ 1 å·æˆ¿å­ç²‰åˆ·æˆç»¿è‰²çš„èŠ±è´¹ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br>è¯·è®¡ç®—å‡ºç²‰åˆ·å®Œæ‰€æœ‰æˆ¿å­æœ€å°‘çš„èŠ±è´¹æˆæœ¬ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥: costs &#x3D; [[17,2,17],[16,16,5],[14,3,19]]</span><br><span class="line">è¾“å‡º: 10</span><br><span class="line">è§£é‡Š: å°† 0 å·æˆ¿å­ç²‰åˆ·æˆè“è‰²ï¼Œ1 å·æˆ¿å­ç²‰åˆ·æˆç»¿è‰²ï¼Œ2 å·æˆ¿å­ç²‰åˆ·æˆè“è‰²ã€‚</span><br><span class="line">Â     æœ€å°‘èŠ±è´¹: 2 + 5 + 3 &#x3D; 10ã€‚</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥: costs &#x3D; [[7,6,2]]</span><br><span class="line">è¾“å‡º: 2</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤º:</span><br><span class="line">costs.length &#x3D;&#x3D; n</span><br><span class="line">costs[i].length &#x3D;&#x3D; 3</span><br><span class="line">1 &lt;&#x3D; n &lt;&#x3D; 100</span><br><span class="line">1 &lt;&#x3D; costs[i][j] &lt;&#x3D; 20</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>åŠ¨æ€è§„åˆ’ï¼Œå®æ—¶æ›´æ–°åˆ†åˆ«ä½¿ç”¨ä¸‰ç§æ²¹æ¼†ä½œä¸ºæœ€åä¸€æ ‹æˆ¿å­çš„ç»“æœã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N)</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minCost</span><span class="params">(costs [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">a, b, c := costs[<span class="number">0</span>][<span class="number">0</span>], costs[<span class="number">0</span>][<span class="number">1</span>], costs[<span class="number">0</span>][<span class="number">2</span>]</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(costs); i++ &#123;</span><br><span class="line">a, b, c = min(b, c)+costs[i][<span class="number">0</span>], min(a, c)+costs[i][<span class="number">1</span>], min(a, b)+costs[i][<span class="number">2</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> min(a, min(b, c))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &lt; b &#123;</span><br><span class="line"><span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode186-ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯-II"><a href="#LeetCode186-ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯-II" class="headerlink" title="LeetCode186. ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯ II"></a><a class="link" href="https://leetcode-cn.com/problems/reverse-words-in-a-string-ii/">LeetCode186. ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯ II<i class="fas fa-external-link-alt"></i></a></h2><p>#å­—ç¬¦ä¸² #åŒæŒ‡é’ˆ</p><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€ä¸ªç¿»è½¬å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå•è¯ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">è¾“å…¥: [&quot;t&quot;,&quot;h&quot;,&quot;e&quot;,&quot; &quot;,&quot;s&quot;,&quot;k&quot;,&quot;y&quot;,&quot; &quot;,&quot;i&quot;,&quot;s&quot;,&quot; &quot;,&quot;b&quot;,&quot;l&quot;,&quot;u&quot;,&quot;e&quot;]</span><br><span class="line">è¾“å‡º: [&quot;b&quot;,&quot;l&quot;,&quot;u&quot;,&quot;e&quot;,&quot; &quot;,&quot;i&quot;,&quot;s&quot;,&quot; &quot;,&quot;s&quot;,&quot;k&quot;,&quot;y&quot;,&quot; &quot;,&quot;t&quot;,&quot;h&quot;,&quot;e&quot;]</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line">å•è¯çš„å®šä¹‰æ˜¯ä¸åŒ…å«ç©ºæ ¼çš„ä¸€ç³»åˆ—å­—ç¬¦</span><br><span class="line">è¾“å…¥å­—ç¬¦ä¸²ä¸­ä¸ä¼šåŒ…å«å‰ç½®æˆ–å°¾éšçš„ç©ºæ ¼</span><br><span class="line">å•è¯ä¸å•è¯ä¹‹é—´æ°¸è¿œæ˜¯ä»¥å•ä¸ªç©ºæ ¼éš”å¼€çš„</span><br><span class="line"></span><br><span class="line">è¿›é˜¶ï¼šä½¿ç”¨Â O(1) é¢å¤–ç©ºé—´å¤æ‚åº¦çš„åŸåœ°è§£æ³•ã€‚</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>å•è¯ä»¥ç©ºæ ¼åˆ†éš”ï¼Œå…ˆå¯¹æ¯ä¸ªå•è¯è¿›è¡Œreverseï¼Œå†å¯¹æ•´ä¸ªå­—ç¬¦ä¸²reverseï¼Œå³å¯å¾—åˆ°ç¿»è½¬å•è¯é¡ºåºï¼Œä½†æ˜¯å•è¯ä¸­å­—æ¯é¡ºåºä¸å˜çš„æ•ˆæœã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-1"><a href="#æ—¶é—´å¤æ‚åº¦-1" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N)</p><h3 id="è§£é¢˜ä»£ç -2"><a href="#è§£é¢˜ä»£ç -2" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reverseWords</span><span class="params">(s []<span class="keyword">byte</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reverse <span class="function"><span class="keyword">func</span><span class="params">([]<span class="keyword">byte</span>)</span></span></span><br><span class="line">reverse = <span class="function"><span class="keyword">func</span><span class="params">(b []<span class="keyword">byte</span>)</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(b)/<span class="number">2</span>; i++ &#123;</span><br><span class="line">b[i], b[<span class="built_in">len</span>(b)-i<span class="number">-1</span>] = b[<span class="built_in">len</span>(b)-i<span class="number">-1</span>], b[i]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">first := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;=<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> i == <span class="built_in">len</span>(s) || s[i] == <span class="string">&#x27; &#x27;</span> &#123;</span><br><span class="line">reverse(s[first:i])</span><br><span class="line">first = i+<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reverse(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LeetCode353-è´ªåƒè›‡&quot;&gt;&lt;a href=&quot;#LeetCode353-è´ªåƒè›‡&quot; class=&quot;headerlink&quot; title=&quot;LeetCode353. è´ªåƒè›‡&quot;&gt;&lt;/a&gt;&lt;a class=&quot;link&quot; href=&quot;https://leetcode-c</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 10ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/11/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%2010%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/11/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%2010%EF%BC%89/</id>
    <published>2022-04-10T22:00:00.000Z</published>
    <updated>2022-04-11T00:03:38.203Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LeetCode28-å®ç°-strStr"><a href="#LeetCode28-å®ç°-strStr" class="headerlink" title="LeetCode28. å®ç° strStr()"></a><a class="link" href="https://leetcode-cn.com/problems/implement-strstr/">LeetCode28. å®ç° strStr()<i class="fas fa-external-link-alt"></i></a></h2><p>#å­—ç¬¦ä¸²</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>å®ç°Â strStr()Â å‡½æ•°ã€‚<br>ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²Â haystack å’Œ needle ï¼Œè¯·ä½ åœ¨ haystack å­—ç¬¦ä¸²ä¸­æ‰¾å‡º needle å­—ç¬¦ä¸²å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›Â  -1 ã€‚<br>è¯´æ˜ï¼š<br>å½“Â needleÂ æ˜¯ç©ºå­—ç¬¦ä¸²æ—¶ï¼Œæˆ‘ä»¬åº”å½“è¿”å›ä»€ä¹ˆå€¼å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªåœ¨é¢è¯•ä¸­å¾ˆå¥½çš„é—®é¢˜ã€‚<br>å¯¹äºæœ¬é¢˜è€Œè¨€ï¼Œå½“Â needleÂ æ˜¯ç©ºå­—ç¬¦ä¸²æ—¶æˆ‘ä»¬åº”å½“è¿”å› 0 ã€‚è¿™ä¸ C è¯­è¨€çš„Â strstr()Â ä»¥åŠ Java çš„Â indexOf()Â å®šä¹‰ç›¸ç¬¦ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šhaystack &#x3D; &quot;hello&quot;, needle &#x3D; &quot;ll&quot;</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šhaystack &#x3D; &quot;aaaaa&quot;, needle &#x3D; &quot;bba&quot;</span><br><span class="line">è¾“å‡ºï¼š-1</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 3ï¼š</span><br><span class="line">è¾“å…¥ï¼šhaystack &#x3D; &quot;&quot;, needle &#x3D; &quot;&quot;</span><br><span class="line">è¾“å‡ºï¼š0</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D; haystack.length, needle.length &lt;&#x3D; 104</span><br><span class="line">haystack å’Œ needle ä»…ç”±å°å†™è‹±æ–‡å­—ç¬¦ç»„æˆ</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>ç›´æ¥ä¸€æ¬¡éå†æ¯”å¯¹å³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>$O(M-N)$</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">strStr</span><span class="params">(haystack <span class="keyword">string</span>, needle <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">m, n := <span class="built_in">len</span>(haystack), <span class="built_in">len</span>(needle)</span><br><span class="line"><span class="keyword">if</span> m &lt; n &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;m-n+<span class="number">1</span>; i++ &#123;</span><br><span class="line"><span class="keyword">if</span> haystack[i:i+n] == needle &#123;</span><br><span class="line"><span class="keyword">return</span> i</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode1442-å½¢æˆä¸¤ä¸ªå¼‚æˆ–ç›¸ç­‰æ•°ç»„çš„ä¸‰å…ƒç»„æ•°ç›®"><a href="#LeetCode1442-å½¢æˆä¸¤ä¸ªå¼‚æˆ–ç›¸ç­‰æ•°ç»„çš„ä¸‰å…ƒç»„æ•°ç›®" class="headerlink" title="LeetCode1442. å½¢æˆä¸¤ä¸ªå¼‚æˆ–ç›¸ç­‰æ•°ç»„çš„ä¸‰å…ƒç»„æ•°ç›®"></a><a class="link" href="https://leetcode-cn.com/problems/count-triplets-that-can-form-two-arrays-of-equal-xor/">LeetCode1442. å½¢æˆä¸¤ä¸ªå¼‚æˆ–ç›¸ç­‰æ•°ç»„çš„ä¸‰å…ƒç»„æ•°ç›®<i class="fas fa-external-link-alt"></i></a></h2><p>#ä½è¿ç®— #å‰ç¼€å¼‚æˆ–</p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ arr ã€‚<br>ç°éœ€è¦ä»æ•°ç»„ä¸­å–ä¸‰ä¸ªä¸‹æ ‡ iã€j å’Œ k ï¼Œå…¶ä¸­ (0 &lt;= i &lt; j &lt;= k &lt; arr.length) ã€‚<br>a å’Œ b å®šä¹‰å¦‚ä¸‹ï¼š<br>a = arr[i] ^ arr[i + 1] ^ â€¦ ^ arr[j - 1]<br>b = arr[j] ^ arr[j + 1] ^ â€¦ ^ arr[k]<br>æ³¨æ„ï¼š^ è¡¨ç¤º æŒ‰ä½å¼‚æˆ– æ“ä½œã€‚<br>è¯·è¿”å›èƒ½å¤Ÿä»¤ a == b æˆç«‹çš„ä¸‰å…ƒç»„ (i, j , k) çš„æ•°ç›®ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šarr &#x3D; [2,3,1,6,7]</span><br><span class="line">è¾“å‡ºï¼š4</span><br><span class="line">è§£é‡Šï¼šæ»¡è¶³é¢˜æ„çš„ä¸‰å…ƒç»„åˆ†åˆ«æ˜¯ (0,1,2), (0,2,2), (2,3,4) ä»¥åŠ (2,4,4)</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šarr &#x3D; [1,1,1,1,1]</span><br><span class="line">è¾“å‡ºï¼š10</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 3ï¼š</span><br><span class="line">è¾“å…¥ï¼šarr &#x3D; [2,3]</span><br><span class="line">è¾“å‡ºï¼š0</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 4ï¼š</span><br><span class="line">è¾“å…¥ï¼šarr &#x3D; [1,3,5,7,9]</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 5ï¼š</span><br><span class="line">è¾“å…¥ï¼šarr &#x3D; [7,11,12,9,5,2,7,17,22]</span><br><span class="line">è¾“å‡ºï¼š8</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D; arr.length &lt;&#x3D; 300</span><br><span class="line">1 &lt;&#x3D; arr[i] &lt;&#x3D; 10^8</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). ä¸€å¼€å§‹å¾ˆç›´è§‚æƒ³åˆ°æšä¸¾å…¨éƒ¨ä¸‰å…ƒç»„ï¼Œç„¶åå†æ ¹æ®è§„åˆ™ï¼Œä» <code>i</code> éå†åˆ° <code>j-1</code>ï¼Œå†ä» <code>j</code> éå†åˆ° <code>k</code> æ¥åˆ¤æ–­æ˜¯å¦æ˜¯åˆæ³•ä¸‰å…ƒç»„ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦æ˜¯ $O(N^4)$ï¼›<br>(2). ç„¶åæ€è€ƒä¼˜åŒ–çš„æ€è·¯ï¼Œé‚£ä¹ˆåœ¨å“ªé‡Œå¯ä»¥ç®€åŒ–å‘¢ï¼Ÿå…¶å®å¯ä»¥ä»å¼‚æˆ–çš„è¿‡ç¨‹å…¥æ‰‹ï¼Œæˆ‘ä»¬å¯èƒ½æ¯”è¾ƒç†Ÿæ‚‰ <code>å‰ç¼€å’Œ</code> äº†ï¼Œé‚£ä¹ˆåŒæ ·å¯ä»¥æ€è€ƒåˆ° <code>å‰ç¼€å¼‚æˆ–</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">å‡è®¾æˆ‘ä»¬æœ‰æ•°ç»„ arr: [1, 2, 3, 4, 7, 9]; </span><br><span class="line">å‰é›¶é¡¹çš„å¼‚æˆ–å€¼ä¸º: 0 &#x3D; 0</span><br><span class="line">å‰ä¸€é¡¹çš„å¼‚æˆ–å€¼ä¸º: 1 &#x3D; 1</span><br><span class="line">å‰äºŒé¡¹çš„å¼‚æˆ–å€¼ä¸º: 1 âŠ• 2 &#x3D; 3</span><br><span class="line">å‰ä¸‰é¡¹çš„å¼‚æˆ–å€¼ä¸º: 1 âŠ• 2 âŠ• 3 &#x3D; 0</span><br><span class="line">å‰å››é¡¹çš„å¼‚æˆ–å€¼ä¸º: 1 âŠ• 2 âŠ• 3 âŠ• 4 &#x3D; 4</span><br><span class="line">å‰äº”é¡¹çš„å¼‚æˆ–å€¼ä¸º: 1 âŠ• 2 âŠ• 3 âŠ• 4 âŠ• 7 &#x3D; 3</span><br><span class="line">å‰å…­é¡¹çš„å¼‚æˆ–å€¼ä¸º: 1 âŠ• 2 âŠ• 3 âŠ• 4 âŠ• 7 âŠ• 9 &#x3D; 10</span><br><span class="line"></span><br><span class="line">å› æ­¤å®ƒçš„å‰ç¼€å¼‚æˆ–æ•°ç»„ä¸º preXOR: [0, 1, 3, 0, 4, 3, 10];</span><br><span class="line"></span><br><span class="line">å‡è®¾ç°åœ¨æˆ‘ä»¬æƒ³æ±‚ç¬¬ 3 é¡¹åˆ°ç¬¬ 6 é¡¹çš„å¼‚æˆ–å€¼ï¼Œ æ­¤æ—¶æˆ‘ä»¬ä¸éœ€è¦å»æš´åŠ›è®¡ç®— &quot;3 âŠ• 4 âŠ• 7 âŠ• 9&quot;</span><br><span class="line">æˆ‘ä»¬çŸ¥é“ (3 âŠ• 4 âŠ• 7 âŠ• 9) &#x3D; (1 âŠ• 2) âŠ• (1 âŠ• 2 âŠ• 3 âŠ• 4 âŠ• 7 âŠ• 9) </span><br><span class="line">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰ç¼€å¼‚æˆ–çš„æ•°ç»„æ¥è®¡ç®—ç¬¬ 3 é¡¹åˆ°ç¬¬ 6 é¡¹çš„å¼‚æˆ–å€¼</span><br><span class="line">(1 âŠ• 2) ä¸ºå‰ 2 é¡¹çš„å¼‚æˆ–å€¼ä¸º â€œ3â€</span><br><span class="line">(1 âŠ• 2 âŠ• 3 âŠ• 4 âŠ• 7 âŠ• 9) ä¸ºå‰ 6 é¡¹å¼‚æˆ–å€¼ä¸º â€œ10â€</span><br><span class="line">å› æ­¤ç¬¬ 3 é¡¹åˆ°ç¬¬ 6 é¡¹çš„å¼‚æˆ–å€¼ä¸ºï¼š3 âŠ• 10 &#x3D; 9</span><br><span class="line">æ‰€æœ‰å¯¹äºå‰ç¼€å¼‚æˆ–æˆ‘ä»¬åŒæ ·ä¹Ÿå¯ä»¥ç”¨O(1)çš„æ—¶é—´è®¡ç®—åŒºé—´å†…çš„å¼‚æˆ–å€¼</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥æœ‰æ•ˆèŠ‚çœæ—¶é—´å¼€é”€ï¼Œæ­¤æ—¶æ—¶é—´å¤æ‚åº¦æ˜¯ $O(N^3)$ï¼›<br>(3). å†è€ƒè™‘è¿›è¡Œä¼˜åŒ–ï¼Œåˆ©ç”¨å¼‚æˆ–çš„æ€§è´¨ é¢˜ç›®è®©æˆ‘ä»¬æ‰¾åˆ°æ»¡è¶³ <code>a == b</code> çš„åæ ‡ï¼Œé‚£ä¹ˆå½“ <code>a</code> ç­‰äº <code>b</code> æ—¶æ»¡è¶³ä»€ä¹ˆæ€§è´¨? <code>a âŠ• b = 0</code>! æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ° <code>arr[i] ^...^ arr[j-1]^ arr[j] ^...^ arr[k] = 0</code>ã€‚å› æ­¤åœ¨ <code>i</code> ä¹‹å‰çš„å‰ç¼€å¼‚æˆ–å€¼åˆ° <code>k</code> æ—¶ä¸ä¼šå˜ã€‚å› ä¸º<code>[iï¼Œk]</code> çš„åŒºé—´å¼‚æˆ–å€¼ä¸º0ï¼Œå¯ä»¥å¾—åˆ°ï¼š <code>xor[i] == preXor[k+1]</code>ã€‚å…¶å¦ä¸€ç‚¹é‡ç‚¹åœ¨äºåœ¨åŒºé—´ <code>[i, k]</code>å†… <code>j</code> åœ¨å“ªå¹¶ä¸é‡è¦ï¼Œ å› ä¸ºæ— è®º <code>j</code> åœ¨å“ªï¼Œ<code>i</code> åˆ° <code>k</code> çš„å¼‚æˆ–å€¼éƒ½ç­‰äº 0ï¼Œä¸å½±å“ç»“æœã€‚æ­¤æ—¶æ—¶é—´å¤æ‚åº¦æ˜¯ <code>O(N^2)</code><br>(4). å¯¹äºä¸‹æ ‡ <code>k</code>ï¼Œè‹¥ä¸‹æ ‡ i=$i_1$,$i_2$,â€¦,$i_m$ æ—¶å‡æ»¡è¶³ $xor_i$ = $xor_{k+1}$ï¼Œæ ¹æ®ä¹‹å‰æ–¹æ³•ï¼Œè¿™äº›äºŒå…ƒç»„ $(i_1,k),(i_2,k),â€¦,(i_m,k)$å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¹‹å’Œä¸º:<br>$\left(k-i_{1}\right)+\left(k-i_{2}\right)+\cdots+\left(k-i_{m}\right)=m \cdot k-\left(i_{1}+i_{2}+\cdots+i_{m}\right)$<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“éå†ä¸‹æ ‡ <code>k</code> æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ‰€æœ‰æ»¡è¶³$xor_i$ = $xor_{k+1}$ çš„</p><ul><li>ä¸‹æ ‡ <code>i</code> çš„å‡ºç°æ¬¡æ•° <code>m</code></li><li>ä¸‹æ ‡ <code>i</code> ä¹‹å’Œ<br>æˆ‘ä»¬å¯ä»¥åœ¨è®¡ç®—å¼‚æˆ–å‰ç¼€å’Œçš„åŒæ—¶è®¡ç®—ç­”æ¡ˆï¼Œä»è€Œåšåˆ°ä»…éå† <code>arr</code> ä¸€æ¬¡å°±è®¡ç®—å‡ºç­”æ¡ˆã€‚æ­¤æ—¶æ—¶é—´å¤æ‚åº¦å¯ä»¥å‹ç¼©åˆ° $O(N)$</li></ul><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><p>æš´åŠ›ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countTriplets</span><span class="params">(arr []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;  </span><br><span class="line">  </span><br><span class="line">   <span class="keyword">var</span> opration <span class="function"><span class="keyword">func</span><span class="params">(i, j, k <span class="keyword">int</span>)</span> <span class="title">bool</span></span>  </span><br><span class="line"> opration = <span class="function"><span class="keyword">func</span><span class="params">(i, j, k <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;  </span><br><span class="line">a, b := <span class="number">0</span>, <span class="number">0</span>  </span><br><span class="line"><span class="keyword">for</span> idx1 := i; idx1 &lt;= j<span class="number">-1</span>; idx1++ &#123;  </span><br><span class="line"> a ^= arr[idx1]  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">for</span> idx2 := j; idx2 &lt;= k; idx2++ &#123;  </span><br><span class="line"> b ^= arr[idx2]  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> a == b  </span><br><span class="line">   &#125;  </span><br><span class="line">  </span><br><span class="line">   count := <span class="number">0</span>  </span><br><span class="line"> path := []<span class="keyword">int</span>&#123;&#125;  </span><br><span class="line">   <span class="keyword">var</span> backTacking <span class="function"><span class="keyword">func</span><span class="params">(start <span class="keyword">int</span>, k <span class="keyword">int</span>)</span></span>  </span><br><span class="line">   backTacking = <span class="function"><span class="keyword">func</span><span class="params">(start <span class="keyword">int</span>, k <span class="keyword">int</span>)</span></span> &#123;  </span><br><span class="line">      <span class="keyword">if</span> k == <span class="number">0</span> &#123;  </span><br><span class="line">         <span class="keyword">if</span> opration(path[<span class="number">0</span>], path[<span class="number">1</span>], path[<span class="number">2</span>]) &#123;  </span><br><span class="line">            <span class="comment">// fmt.Println(path)  </span></span><br><span class="line"> count++  </span><br><span class="line"> &#125;  </span><br><span class="line">       <span class="keyword">return</span>  </span><br><span class="line"> &#125;  </span><br><span class="line">  </span><br><span class="line">      <span class="keyword">for</span> i := start; i &lt; <span class="built_in">len</span>(arr); i++ &#123;  </span><br><span class="line">         path = <span class="built_in">append</span>(path, i)  </span><br><span class="line">         <span class="keyword">if</span> k == <span class="number">3</span> &#123;  </span><br><span class="line">            backTacking(i+<span class="number">1</span>, k<span class="number">-1</span>)  </span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            backTacking(i, k<span class="number">-1</span>)  </span><br><span class="line">         &#125;  </span><br><span class="line">  </span><br><span class="line">         path = path[:<span class="built_in">len</span>(path)<span class="number">-1</span>]  </span><br><span class="line">      &#125;  </span><br><span class="line">   &#125;  </span><br><span class="line">  </span><br><span class="line">   backTacking(<span class="number">0</span>, <span class="number">3</span>)  </span><br><span class="line">   <span class="keyword">return</span> count  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æš´åŠ›+å‰ç¼€å’Œä¼˜åŒ–ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countTriplets</span><span class="params">(arr []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;  </span><br><span class="line">  </span><br><span class="line">   xor := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(arr)+<span class="number">1</span>)  </span><br><span class="line">   <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="built_in">len</span>(arr); i++ &#123;  </span><br><span class="line">      xor[i] = xor[i<span class="number">-1</span>] ^ arr[i<span class="number">-1</span>]  </span><br><span class="line">   &#125;  </span><br><span class="line">  </span><br><span class="line">   <span class="keyword">var</span> opration <span class="function"><span class="keyword">func</span><span class="params">(i, j, k <span class="keyword">int</span>)</span> <span class="title">bool</span></span>  </span><br><span class="line"> opration = <span class="function"><span class="keyword">func</span><span class="params">(i, j, k <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;  </span><br><span class="line">      a, b := <span class="number">0</span>, <span class="number">0</span>  </span><br><span class="line"> a = xor[j] ^ xor[i]  </span><br><span class="line">      b = xor[k+<span class="number">1</span>] ^ xor[j]  </span><br><span class="line">  </span><br><span class="line">      <span class="keyword">return</span> a == b  </span><br><span class="line">   &#125;  </span><br><span class="line">  </span><br><span class="line">   count := <span class="number">0</span>  </span><br><span class="line"> path := []<span class="keyword">int</span>&#123;&#125;  </span><br><span class="line">   <span class="keyword">var</span> backTacking <span class="function"><span class="keyword">func</span><span class="params">(start <span class="keyword">int</span>, k <span class="keyword">int</span>)</span></span>  </span><br><span class="line">   backTacking = <span class="function"><span class="keyword">func</span><span class="params">(start <span class="keyword">int</span>, k <span class="keyword">int</span>)</span></span> &#123;  </span><br><span class="line">      <span class="keyword">if</span> k == <span class="number">0</span> &#123;  </span><br><span class="line">         <span class="keyword">if</span> opration(path[<span class="number">0</span>], path[<span class="number">1</span>], path[<span class="number">2</span>]) &#123;  </span><br><span class="line">            <span class="comment">// fmt.Println(path)  </span></span><br><span class="line"> count++  </span><br><span class="line"> &#125;  </span><br><span class="line">         <span class="keyword">return</span>  </span><br><span class="line"> &#125;  </span><br><span class="line">  </span><br><span class="line">      <span class="keyword">for</span> i := start; i &lt; <span class="built_in">len</span>(arr); i++ &#123;  </span><br><span class="line">         path = <span class="built_in">append</span>(path, i)  </span><br><span class="line">         <span class="keyword">if</span> k == <span class="number">3</span> &#123;  </span><br><span class="line">            backTacking(i+<span class="number">1</span>, k<span class="number">-1</span>)  </span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            backTacking(i, k<span class="number">-1</span>)  </span><br><span class="line">         &#125;  </span><br><span class="line">  </span><br><span class="line">         path = path[:<span class="built_in">len</span>(path)<span class="number">-1</span>]  </span><br><span class="line">      &#125;  </span><br><span class="line">   &#125;  </span><br><span class="line">  </span><br><span class="line">   backTacking(<span class="number">0</span>, <span class="number">3</span>)  </span><br><span class="line">   <span class="keyword">return</span> count  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨å¼‚æˆ–æ€§è´¨ä¸¤æ¬¡éå†</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countTriplets</span><span class="params">(arr []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">xor := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(arr)+<span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;=<span class="built_in">len</span>(arr); i++ &#123;</span><br><span class="line">xor[i] = xor[i<span class="number">-1</span>]^arr[i<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">count := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(arr)<span class="number">-1</span>; i++ &#123;</span><br><span class="line"><span class="keyword">for</span> k:=i+<span class="number">1</span>; k&lt;<span class="built_in">len</span>(arr); k++ &#123;</span><br><span class="line"><span class="keyword">if</span> xor[i] == xor[k+<span class="number">1</span>] &#123;</span><br><span class="line">count += k-i</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€æ¬¡éå†</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countTriplets</span><span class="params">(arr []<span class="keyword">int</span>)</span> <span class="params">(ans <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">cnt := <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">total := <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">s := <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k, val := <span class="keyword">range</span> arr &#123;</span><br><span class="line"><span class="keyword">if</span> m, has := cnt[s^val]; has &#123;</span><br><span class="line">ans += m*k - total[s^val]</span><br><span class="line">&#125;</span><br><span class="line">cnt[s]++</span><br><span class="line">total[s] += k</span><br><span class="line">s ^= val</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LeetCode28-å®ç°-strStr&quot;&gt;&lt;a href=&quot;#LeetCode28-å®ç°-strStr&quot; class=&quot;headerlink&quot; title=&quot;LeetCode28. å®ç° strStr()&quot;&gt;&lt;/a&gt;&lt;a class=&quot;link&quot; href=&quot;h</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 9ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/10/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%209%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/10/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%209%EF%BC%89/</id>
    <published>2022-04-10T14:00:00.000Z</published>
    <updated>2022-04-10T15:25:45.257Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ˜¯å¯¹ 2022.04.09 å‘¨èµ›çš„å¤ç›˜</p><h2 id="LeetCode6037-æŒ‰å¥‡å¶æ€§äº¤æ¢åçš„æœ€å¤§æ•°å­—"><a href="#LeetCode6037-æŒ‰å¥‡å¶æ€§äº¤æ¢åçš„æœ€å¤§æ•°å­—" class="headerlink" title="LeetCode6037. æŒ‰å¥‡å¶æ€§äº¤æ¢åçš„æœ€å¤§æ•°å­—"></a><a class="link" href="https://leetcode-cn.com/problems/largest-number-after-digit-swaps-by-parity/">LeetCode6037. æŒ‰å¥‡å¶æ€§äº¤æ¢åçš„æœ€å¤§æ•°å­—<i class="fas fa-external-link-alt"></i></a></h2><p>#æ•°ç»„</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° <code>num</code> ã€‚ä½ å¯ä»¥äº¤æ¢ <code>num</code> ä¸­ <strong>å¥‡å¶æ€§</strong> ç›¸åŒçš„ä»»æ„ä¸¤ä½æ•°å­—ï¼ˆå³ï¼Œéƒ½æ˜¯å¥‡æ•°æˆ–è€…å¶æ•°ï¼‰ã€‚<br>è¿”å›äº¤æ¢ <strong>ä»»æ„</strong> æ¬¡ä¹‹å <code>num</code> çš„ <strong>æœ€å¤§</strong> å¯èƒ½å€¼ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šnum &#x3D; 1234</span><br><span class="line">è¾“å‡ºï¼š3412</span><br><span class="line">è§£é‡Šï¼šäº¤æ¢æ•°å­— 3 å’Œæ•°å­— 1 ï¼Œç»“æœå¾—åˆ° 3214 ã€‚</span><br><span class="line">äº¤æ¢æ•°å­— 2 å’Œæ•°å­— 4 ï¼Œç»“æœå¾—åˆ° 3412 ã€‚</span><br><span class="line">æ³¨æ„ï¼Œå¯èƒ½å­˜åœ¨å…¶ä»–äº¤æ¢åºåˆ—ï¼Œä½†æ˜¯å¯ä»¥è¯æ˜ 3412 æ˜¯æœ€å¤§å¯èƒ½å€¼ã€‚</span><br><span class="line">æ³¨æ„ï¼Œä¸èƒ½äº¤æ¢æ•°å­— 4 å’Œæ•°å­— 1 ï¼Œå› ä¸ºå®ƒä»¬å¥‡å¶æ€§ä¸åŒã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šnum &#x3D; 65875</span><br><span class="line">è¾“å‡ºï¼š87655</span><br><span class="line">è§£é‡Šï¼šäº¤æ¢æ•°å­— 8 å’Œæ•°å­— 6 ï¼Œç»“æœå¾—åˆ° 85675 ã€‚</span><br><span class="line">äº¤æ¢æ•°å­— 5 å’Œæ•°å­— 7 ï¼Œç»“æœå¾—åˆ° 87655 ã€‚</span><br><span class="line">æ³¨æ„ï¼Œå¯èƒ½å­˜åœ¨å…¶ä»–äº¤æ¢åºåˆ—ï¼Œä½†æ˜¯å¯ä»¥è¯æ˜ 87655 æ˜¯æœ€å¤§å¯èƒ½å€¼ã€‚</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D; num &lt;&#x3D; 109</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). åˆå§‹åŒ–ä¸‰ä¸ªæ•°ç»„ <code>array</code>ã€<code>array1</code>ã€<code>array2</code>ï¼Œ<code>array</code>ç”¨äºè®°å½•æ•°å­—å¯¹åº”ä½ç½®ä¸Šæ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°ã€<code>array1</code>ç”¨äºä¿å­˜å¹¶æ’åºæ‰€æœ‰çš„å¶æ•°ã€<code>array2</code>ç”¨äºä¿å­˜å¹¶æ’åºæ‰€æœ‰çš„å¥‡æ•°ï¼›<br>(2). æ ¹æ® <code>array</code> ä¿å­˜çš„å¯¹åº”ä½ç½®çš„å¥‡å¶è¡Œï¼Œä»å¤§åˆ°å°ä¾æ¬¡å–å‡º<code>array1</code>æˆ–<code>array2</code> ä¸­çš„æ•°ï¼›</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N)</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">largestInteger</span><span class="params">(num <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">array1 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">array2 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">array := <span class="built_in">make</span>([]<span class="keyword">bool</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> num &gt; <span class="number">0</span> &#123;</span><br><span class="line">x := num % <span class="number">10</span></span><br><span class="line"><span class="keyword">if</span> x%<span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line">array1 = <span class="built_in">append</span>(array1, x)</span><br><span class="line">array = <span class="built_in">append</span>(array, <span class="literal">true</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">array2 = <span class="built_in">append</span>(array2, x)</span><br><span class="line">array = <span class="built_in">append</span>(array, <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">num /= <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sort.Ints(array1)</span><br><span class="line">sort.Ints(array2)</span><br><span class="line"></span><br><span class="line">ret := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="built_in">len</span>(array)<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i-- &#123;</span><br><span class="line">ret *= <span class="number">10</span></span><br><span class="line"><span class="keyword">if</span> array[i] &#123;</span><br><span class="line">ret += array1[<span class="built_in">len</span>(array1)<span class="number">-1</span>]</span><br><span class="line">array1 = array1[:<span class="built_in">len</span>(array1)<span class="number">-1</span>]</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">ret += array2[<span class="built_in">len</span>(array2)<span class="number">-1</span>]</span><br><span class="line">array2 = array2[:<span class="built_in">len</span>(array2)<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode6038-å‘è¡¨è¾¾å¼æ·»åŠ æ‹¬å·åçš„æœ€å°ç»“æœ"><a href="#LeetCode6038-å‘è¡¨è¾¾å¼æ·»åŠ æ‹¬å·åçš„æœ€å°ç»“æœ" class="headerlink" title="LeetCode6038. å‘è¡¨è¾¾å¼æ·»åŠ æ‹¬å·åçš„æœ€å°ç»“æœ"></a><a class="link" href="https://leetcode-cn.com/problems/minimize-result-by-adding-parentheses-to-expression/">LeetCode6038. å‘è¡¨è¾¾å¼æ·»åŠ æ‹¬å·åçš„æœ€å°ç»“æœ<i class="fas fa-external-link-alt"></i></a></h2><p>#å­—ç¬¦ä¸²</p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„å­—ç¬¦ä¸² expression ï¼Œæ ¼å¼ä¸º â€œ&lt;num1&gt;+&lt;num2&gt;â€ ï¼Œå…¶ä¸­ &lt;num1&gt; å’Œ &lt;num2&gt; è¡¨ç¤ºæ­£æ•´æ•°ã€‚<br>è¯·ä½ å‘ expression ä¸­æ·»åŠ ä¸€å¯¹æ‹¬å·ï¼Œä½¿å¾—åœ¨æ·»åŠ ä¹‹åï¼Œ expression ä»ç„¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ•°å­¦è¡¨è¾¾å¼ï¼Œå¹¶ä¸”è®¡ç®—åå¯ä»¥å¾—åˆ° æœ€å° å¯èƒ½å€¼ã€‚å·¦æ‹¬å· å¿…é¡» æ·»åŠ åœ¨ â€˜+â€™ çš„å·¦ä¾§ï¼Œè€Œå³æ‹¬å·å¿…é¡»æ·»åŠ åœ¨ â€˜+â€™ çš„å³ä¾§ã€‚<br>è¿”å›æ·»åŠ ä¸€å¯¹æ‹¬å·åå½¢æˆçš„è¡¨è¾¾å¼Â expression ï¼Œä¸”æ»¡è¶³ expression è®¡ç®—å¾—åˆ° æœ€å° å¯èƒ½å€¼ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªç­”æ¡ˆéƒ½èƒ½äº§ç”Ÿç›¸åŒç»“æœï¼Œè¿”å›ä»»æ„ä¸€ä¸ªç­”æ¡ˆã€‚<br>ç”Ÿæˆçš„è¾“å…¥æ»¡è¶³ï¼šexpression çš„åŸå§‹å€¼å’Œæ·»åŠ æ»¡è¶³è¦æ±‚çš„ä»»ä¸€å¯¹æ‹¬å·ä¹‹å expression çš„å€¼ï¼Œéƒ½ç¬¦åˆ 32-bit å¸¦ç¬¦å·æ•´æ•°èŒƒå›´ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šexpression &#x3D; &quot;247+38&quot;</span><br><span class="line">è¾“å‡ºï¼š&quot;2(47+38)&quot;</span><br><span class="line">è§£é‡Šï¼šè¡¨è¾¾å¼è®¡ç®—å¾—åˆ° 2 * (47 + 38) &#x3D; 2 * 85 &#x3D; 170 ã€‚</span><br><span class="line">æ³¨æ„ &quot;2(4)7+38&quot; ä¸æ˜¯æœ‰æ•ˆçš„ç»“æœï¼Œå› ä¸ºå³æ‹¬å·å¿…é¡»æ·»åŠ åœ¨ &#39;+&#39; çš„å³ä¾§ã€‚</span><br><span class="line">å¯ä»¥è¯æ˜ 170 æ˜¯æœ€å°å¯èƒ½å€¼ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šexpression &#x3D; &quot;12+34&quot;</span><br><span class="line">è¾“å‡ºï¼š&quot;1(2+3)4&quot;</span><br><span class="line">è§£é‡Šï¼šè¡¨è¾¾å¼è®¡ç®—å¾—åˆ° 1 * (2 + 3) * 4 &#x3D; 1 * 5 * 4 &#x3D; 20 ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 3ï¼š</span><br><span class="line">è¾“å…¥ï¼šexpression &#x3D; &quot;999+999&quot;</span><br><span class="line">è¾“å‡ºï¼š&quot;(999+999)&quot;</span><br><span class="line">è§£é‡Šï¼šè¡¨è¾¾å¼è®¡ç®—å¾—åˆ° 999 + 999 &#x3D; 1998 ã€‚</span><br><span class="line">Â </span><br><span class="line">æç¤ºï¼š</span><br><span class="line">3 &lt;&#x3D; expression.length &lt;&#x3D; 10</span><br><span class="line">expression ä»…ç”±æ•°å­— &#39;1&#39; åˆ° &#39;9&#39; å’Œ &#39;+&#39; ç»„æˆ</span><br><span class="line">expression ç”±æ•°å­—å¼€å§‹å’Œç»“æŸ</span><br><span class="line">expression æ°å¥½ä»…å«æœ‰ä¸€ä¸ª &#39;+&#39;.</span><br><span class="line">expression çš„åŸå§‹å€¼å’Œæ·»åŠ æ»¡è¶³è¦æ±‚çš„ä»»ä¸€å¯¹æ‹¬å·ä¹‹å expression çš„å€¼ï¼Œéƒ½ç¬¦åˆ 32-bit å¸¦ç¬¦å·æ•´æ•°èŒƒå›´</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). é¦–å…ˆè¦å®Œæˆä¸€ä¸ªå¯¹ç‰¹å®šå­—ç¬¦ä¸²ç»“æœçš„è®¡ç®—å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯ç­›é€‰å‡ºè®¡ç®—è¡¨è¾¾å¼çš„å‰ä¸­åä¸‰ä¸ªéƒ¨åˆ†å³å¯ï¼›<br>(2). åˆ†åˆ«å°† â€œ+â€ å‰åçš„æ•°å­—å­—ç¬¦ä¸²æå–å‡ºæ¥ï¼Œåˆ†åˆ«åœ¨å¯èƒ½çš„ä½ç½®æ·»åŠ æ­£åæ‹¬å·ï¼›<br>(3). å¯¹äº â€˜(â€˜ è€Œè¨€ï¼Œå¯èƒ½æ·»åŠ çš„ä½ç½®åœ¨ <code>b1</code> çš„ <code>[0,len(b1))</code>ï¼›<br>(3). å¯¹äº â€˜)â€™ è€Œè¨€ï¼Œå¯èƒ½æ·»åŠ çš„ä½ç½®åœ¨ <code>b2</code> çš„ <code>[1,len(b2)]</code>ï¼›</p><h3 id="æ—¶é—´å¤æ‚åº¦-1"><a href="#æ—¶é—´å¤æ‚åº¦-1" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p><code>O(len(s1)*len(s2))</code></p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minimizeResult</span><span class="params">(expression <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cal <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">string</span>)</span> <span class="title">int</span></span></span><br><span class="line">cal = <span class="function"><span class="keyword">func</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">s1 := <span class="string">&quot;&quot;</span></span><br><span class="line">i := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> ; i&lt;<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> s[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s[i] &lt;= <span class="string">&#x27;9&#x27;</span> &#123;</span><br><span class="line">s1 += s[i:i+<span class="number">1</span>]</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">i++</span><br><span class="line">a, b, pre := <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="literal">true</span></span><br><span class="line"><span class="keyword">for</span> ; i&lt;<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> s[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s[i] &lt;= <span class="string">&#x27;9&#x27;</span> &amp;&amp; pre &#123;</span><br><span class="line">a += s[i:i+<span class="number">1</span>]</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> s[i] == <span class="string">&#x27;+&#x27;</span> &#123;</span><br><span class="line">pre = <span class="literal">false</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> s[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s[i] &lt;= <span class="string">&#x27;9&#x27;</span> &amp;&amp; !pre &#123;</span><br><span class="line">b += s[i:i+<span class="number">1</span>]</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> s[i] == <span class="string">&#x27;)&#x27;</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> preNum <span class="keyword">int</span></span><br><span class="line"><span class="keyword">if</span> s1 == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">preNum = <span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">preNum, _ = strconv.Atoi(s1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mid1, _ := strconv.Atoi(a)</span><br><span class="line">mid2, _ := strconv.Atoi(b)</span><br><span class="line"></span><br><span class="line">s2 := <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> ; i&lt;<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> s[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s[i] &lt;= <span class="string">&#x27;9&#x27;</span> &#123;</span><br><span class="line">s2 += s[i:i+<span class="number">1</span>]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> s2 != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">lastNum, _ := strconv.Atoi(s2)</span><br><span class="line"><span class="keyword">return</span> preNum*(mid1+mid2)*lastNum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> preNum*(mid1+mid2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">str := strings.Split(expression, <span class="string">&quot;+&quot;</span>)</span><br><span class="line">x1, _ := strconv.Atoi((str[<span class="number">0</span>]))</span><br><span class="line">x2, _ := strconv.Atoi(str[<span class="number">1</span>])</span><br><span class="line">ret := x1+x2</span><br><span class="line">retS := <span class="string">&quot;(&quot;</span>+expression+<span class="string">&quot;)&quot;</span></span><br><span class="line"></span><br><span class="line">b1 := []<span class="keyword">byte</span>(str[<span class="number">0</span>])</span><br><span class="line">b2 := []<span class="keyword">byte</span>(str[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(b1); i++ &#123;</span><br><span class="line">b1 = <span class="built_in">append</span>(b1[:i], <span class="built_in">append</span>([]<span class="keyword">byte</span>&#123;<span class="string">&#x27;(&#x27;</span>&#125;, b1[i:]...)...)</span><br><span class="line"><span class="comment">// fmt.Println(b1)</span></span><br><span class="line"><span class="keyword">for</span> j:=<span class="number">1</span>; j&lt;=<span class="built_in">len</span>(b2); j++ &#123;</span><br><span class="line"></span><br><span class="line">b2 = <span class="built_in">append</span>(b2[:j], <span class="built_in">append</span>([]<span class="keyword">byte</span>&#123;<span class="string">&#x27;)&#x27;</span>&#125;, b2[j:]...)...)</span><br><span class="line">t := cal(<span class="keyword">string</span>(b1)+<span class="string">&quot;+&quot;</span>+<span class="keyword">string</span>(b2))</span><br><span class="line"><span class="comment">//fmt.Println(string(b1)+&quot;+&quot;+string(b2), t)</span></span><br><span class="line"><span class="keyword">if</span> t &lt; ret &#123;</span><br><span class="line">ret = t</span><br><span class="line">retS = <span class="keyword">string</span>(b1)+<span class="string">&quot;+&quot;</span>+<span class="keyword">string</span>(b2)</span><br><span class="line">&#125;</span><br><span class="line">b2 = <span class="built_in">append</span>(b2[:j], b2[j+<span class="number">1</span>:]...)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">b1 = <span class="built_in">append</span>(b1[:i], b1[i+<span class="number">1</span>:]...)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> retS</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode6039-K-æ¬¡å¢åŠ åçš„æœ€å¤§ä¹˜ç§¯"><a href="#LeetCode6039-K-æ¬¡å¢åŠ åçš„æœ€å¤§ä¹˜ç§¯" class="headerlink" title="LeetCode6039. K æ¬¡å¢åŠ åçš„æœ€å¤§ä¹˜ç§¯"></a><a class="link" href="https://leetcode-cn.com/problems/maximum-product-after-k-increments/">LeetCode6039. K æ¬¡å¢åŠ åçš„æœ€å¤§ä¹˜ç§¯<i class="fas fa-external-link-alt"></i></a></h2><p>#æ•°ç»„</p><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„Â numsÂ å’Œä¸€ä¸ªæ•´æ•°Â kÂ ã€‚æ¯æ¬¡æ“ä½œï¼Œä½ å¯ä»¥é€‰æ‹©Â numsÂ ä¸­ ä»»ä¸€Â å…ƒç´ å¹¶å°†å®ƒ å¢åŠ Â 1Â ã€‚<br>è¯·ä½ è¿”å› è‡³å¤šÂ kÂ æ¬¡æ“ä½œåï¼Œèƒ½å¾—åˆ°çš„Â numsçš„Â æœ€å¤§ä¹˜ç§¯Â ã€‚ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·ä½ å°†ç­”æ¡ˆå¯¹Â 109 + 7Â å–ä½™åè¿”å›ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šnums &#x3D; [0,4], k &#x3D; 5</span><br><span class="line">è¾“å‡ºï¼š20</span><br><span class="line">è§£é‡Šï¼šå°†ç¬¬ä¸€ä¸ªæ•°å¢åŠ  5 æ¬¡ã€‚</span><br><span class="line">å¾—åˆ° nums &#x3D; [5, 4] ï¼Œä¹˜ç§¯ä¸º 5 * 4 &#x3D; 20 ã€‚</span><br><span class="line">å¯ä»¥è¯æ˜ 20 æ˜¯èƒ½å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› 20 ã€‚</span><br><span class="line">å­˜åœ¨å…¶ä»–å¢åŠ  nums çš„æ–¹æ³•ï¼Œä¹Ÿèƒ½å¾—åˆ°æœ€å¤§ä¹˜ç§¯ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šnums &#x3D; [6,3,3,2], k &#x3D; 2</span><br><span class="line">è¾“å‡ºï¼š216</span><br><span class="line">è§£é‡Šï¼šå°†ç¬¬äºŒä¸ªæ•°å¢åŠ  1 æ¬¡ï¼Œå°†ç¬¬å››ä¸ªæ•°å¢åŠ  1 æ¬¡ã€‚</span><br><span class="line">å¾—åˆ° nums &#x3D; [6, 4, 3, 3] ï¼Œä¹˜ç§¯ä¸º 6 * 4 * 3 * 3 &#x3D; 216 ã€‚</span><br><span class="line">å¯ä»¥è¯æ˜ 216 æ˜¯èƒ½å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› 216 ã€‚</span><br><span class="line">å­˜åœ¨å…¶ä»–å¢åŠ  nums çš„æ–¹æ³•ï¼Œä¹Ÿèƒ½å¾—åˆ°æœ€å¤§ä¹˜ç§¯ã€‚</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D; nums.length, k &lt;&#x3D; 105</span><br><span class="line">0 &lt;&#x3D; nums[i] &lt;&#x3D; 106</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). å…ˆä»å¤§åˆ°å°æ’åºæ•°ç»„ï¼›<br>(2). è¿›å…¥å¾ªç¯ï¼Œå¾ªç¯çš„ç»“æŸæ¡ä»¶æ˜¯ <code>k&lt;0</code>ï¼›<br>(3). ä»æ•°ç»„çš„æœ«å°¾å‘å‰éå†ï¼Œå¦‚æœå½“å‰æ•°å­—ç­‰äºä¸Šä¸€æ¬¡å¾ªç¯ä¸­æœªè¿›è¡Œæ›´æ”¹çš„åé¢æ•°å­—ï¼Œé‚£ä¹ˆå°†å½“å‰æ•°å­—åŠ  1ï¼›<br>(4). å¦‚æœå½“å‰æ•°å­—å¤§äºè¾“ä¸€æ¬¡å¾ªç¯ä¸­ä¸ºè¿›è¡Œæ›´æ”¹çš„åé¢æ•°å­—ï¼Œé‚£ä¹ˆå›åˆ°æ•°ç»„æœ«å°¾è¿›è¡Œå¾ªç¯ï¼›<br>(5). å½“ä»åå‘å‰éå†å®Œæ•´ä¸ªæ•°ç»„ï¼Œå†æ¬¡å›åˆ°æ•°ç»„æœ«å°¾ï¼›<br>(6). è·³å‡ºå¾ªç¯åï¼Œä»å¤´åˆ°å°¾è®¡ç®—ç»“æœã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-2"><a href="#æ—¶é—´å¤æ‚åº¦-2" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(k*N)</p><h3 id="è§£é¢˜ä»£ç -2"><a href="#è§£é¢˜ä»£ç -2" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maximumProduct</span><span class="params">(nums []<span class="keyword">int</span>, k <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Max = <span class="number">1000000007</span></span><br><span class="line">sort.Slice(nums, <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> nums[i] &gt; nums[j]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">i := <span class="built_in">len</span>(nums)<span class="number">-1</span></span><br><span class="line">x := nums[i]</span><br><span class="line"><span class="keyword">for</span> k &gt; <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">if</span> i &gt;= <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">if</span> nums[i] == x &#123;</span><br><span class="line">nums[i]++</span><br><span class="line">i--</span><br><span class="line">k--</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> nums[i] &gt;= x+<span class="number">1</span> &#123;</span><br><span class="line">i = <span class="built_in">len</span>(nums)<span class="number">-1</span></span><br><span class="line">x = nums[i]</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">i = <span class="built_in">len</span>(nums)<span class="number">-1</span></span><br><span class="line">x = nums[i]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//fmt.Println(nums)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//fmt.Println(nums)</span></span><br><span class="line">ret := <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">ret = ret*nums[i]%Max</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode6040-èŠ±å›­çš„æœ€å¤§æ€»ç¾ä¸½å€¼"><a href="#LeetCode6040-èŠ±å›­çš„æœ€å¤§æ€»ç¾ä¸½å€¼" class="headerlink" title="LeetCode6040. èŠ±å›­çš„æœ€å¤§æ€»ç¾ä¸½å€¼"></a><a class="link" href="https://leetcode-cn.com/problems/maximum-total-beauty-of-the-gardens/">LeetCode6040. èŠ±å›­çš„æœ€å¤§æ€»ç¾ä¸½å€¼<i class="fas fa-external-link-alt"></i></a></h2><p>#äºŒåˆ†æŸ¥æ‰¾ #å‰ç¼€å’Œ</p><h3 id="é¢˜ç›®æè¿°-3"><a href="#é¢˜ç›®æè¿°-3" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>Alice æ˜¯Â nÂ ä¸ªèŠ±å›­çš„å›­ä¸ï¼Œå¥¹æƒ³é€šè¿‡ç§èŠ±ï¼Œæœ€å¤§åŒ–å¥¹æ‰€æœ‰èŠ±å›­çš„æ€»ç¾ä¸½å€¼ã€‚<br>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0Â å¼€å§‹å¤§å°ä¸º nÂ çš„æ•´æ•°æ•°ç»„Â flowersÂ ï¼Œå…¶ä¸­Â flowers[i]Â æ˜¯ç¬¬ iÂ ä¸ªèŠ±å›­é‡Œå·²ç»ç§çš„èŠ±çš„æ•°ç›®ã€‚å·²ç»ç§äº†çš„èŠ± ä¸èƒ½Â ç§»èµ°ã€‚åŒæ—¶ç»™ä½ Â newFlowersÂ ï¼Œè¡¨ç¤º Alice é¢å¤–å¯ä»¥ç§èŠ±çš„Â æœ€å¤§æ•°ç›®Â ã€‚åŒæ—¶ç»™ä½ çš„è¿˜æœ‰æ•´æ•°Â targetÂ ï¼ŒfullÂ å’ŒÂ partialÂ ã€‚<br>å¦‚æœä¸€ä¸ªèŠ±å›­æœ‰ è‡³å°‘Â targetÂ æœµèŠ±ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ±å›­ç§°ä¸º å®Œå–„çš„Â ï¼ŒèŠ±å›­çš„ æ€»ç¾ä¸½å€¼Â ä¸ºä»¥ä¸‹åˆ†æ•°ä¹‹ å’Œ ï¼š<br>å®Œå–„ èŠ±å›­æ•°ç›®ä¹˜ä»¥Â full.<br>å‰©ä½™ ä¸å®Œå–„Â èŠ±å›­é‡Œï¼ŒèŠ±çš„ æœ€å°‘æ•°ç›®Â ä¹˜ä»¥Â partialÂ ã€‚å¦‚æœæ²¡æœ‰ä¸å®Œå–„èŠ±å›­ï¼Œé‚£ä¹ˆè¿™ä¸€éƒ¨åˆ†çš„å€¼ä¸ºÂ 0Â ã€‚<br>è¯·ä½ è¿”å› Alice ç§æœ€å¤š newFlowersÂ æœµèŠ±ä»¥åï¼Œèƒ½å¾—åˆ°çš„Â æœ€å¤§Â æ€»ç¾ä¸½å€¼ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šflowers &#x3D; [1,3,1,1], newFlowers &#x3D; 7, target &#x3D; 6, full &#x3D; 12, partial &#x3D; 1</span><br><span class="line">è¾“å‡ºï¼š14</span><br><span class="line">è§£é‡Šï¼šAlice å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹æ¡ˆç§èŠ±</span><br><span class="line">- åœ¨ç¬¬ 0 ä¸ªèŠ±å›­ç§ 2 æœµèŠ±</span><br><span class="line">- åœ¨ç¬¬ 1 ä¸ªèŠ±å›­ç§ 3 æœµèŠ±</span><br><span class="line">- åœ¨ç¬¬ 2 ä¸ªèŠ±å›­ç§ 1 æœµèŠ±</span><br><span class="line">- åœ¨ç¬¬ 3 ä¸ªèŠ±å›­ç§ 1 æœµèŠ±</span><br><span class="line">èŠ±å›­é‡ŒèŠ±çš„æ•°ç›®ä¸º [3,6,2,2] ã€‚æ€»å…±ç§äº† 2 + 3 + 1 + 1 &#x3D; 7 æœµèŠ±ã€‚</span><br><span class="line">åªæœ‰ 1 ä¸ªèŠ±å›­æ˜¯å®Œå–„çš„ã€‚</span><br><span class="line">ä¸å®Œå–„èŠ±å›­é‡ŒèŠ±çš„æœ€å°‘æ•°ç›®æ˜¯ 2 ã€‚</span><br><span class="line">æ‰€ä»¥æ€»ç¾ä¸½å€¼ä¸º 1 * 12 + 2 * 1 &#x3D; 12 + 2 &#x3D; 14 ã€‚</span><br><span class="line">æ²¡æœ‰å…¶ä»–æ–¹æ¡ˆå¯ä»¥è®©èŠ±å›­æ€»ç¾ä¸½å€¼è¶…è¿‡ 14 ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šflowers &#x3D; [2,4,5,3], newFlowers &#x3D; 10, target &#x3D; 5, full &#x3D; 2, partial &#x3D; 6</span><br><span class="line">è¾“å‡ºï¼š30</span><br><span class="line">è§£é‡Šï¼šAlice å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹æ¡ˆç§èŠ±</span><br><span class="line">- åœ¨ç¬¬ 0 ä¸ªèŠ±å›­ç§ 3 æœµèŠ±</span><br><span class="line">- åœ¨ç¬¬ 1 ä¸ªèŠ±å›­ç§ 0 æœµèŠ±</span><br><span class="line">- åœ¨ç¬¬ 2 ä¸ªèŠ±å›­ç§ 0 æœµèŠ±</span><br><span class="line">- åœ¨ç¬¬ 3 ä¸ªèŠ±å›­ç§ 2 æœµèŠ±</span><br><span class="line">èŠ±å›­é‡ŒèŠ±çš„æ•°ç›®ä¸º [5,4,5,5] ã€‚æ€»å…±ç§äº† 3 + 0 + 0 + 2 &#x3D; 5 æœµèŠ±ã€‚</span><br><span class="line">æœ‰ 3 ä¸ªèŠ±å›­æ˜¯å®Œå–„çš„ã€‚</span><br><span class="line">ä¸å®Œå–„èŠ±å›­é‡ŒèŠ±çš„æœ€å°‘æ•°ç›®ä¸º 4 ã€‚</span><br><span class="line">æ‰€ä»¥æ€»ç¾ä¸½å€¼ä¸º 3 * 2 + 4 * 6 &#x3D; 6 + 24 &#x3D; 30 ã€‚</span><br><span class="line">æ²¡æœ‰å…¶ä»–æ–¹æ¡ˆå¯ä»¥è®©èŠ±å›­æ€»ç¾ä¸½å€¼è¶…è¿‡ 30 ã€‚</span><br><span class="line">æ³¨æ„ï¼ŒAliceå¯ä»¥è®©æ‰€æœ‰èŠ±å›­éƒ½å˜æˆå®Œå–„çš„ï¼Œä½†è¿™æ ·å¥¹çš„æ€»ç¾ä¸½å€¼åè€Œæ›´å°ã€‚</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D; flowers.length &lt;&#x3D; 105</span><br><span class="line">1 &lt;&#x3D; flowers[i], target &lt;&#x3D; 105</span><br><span class="line">1 &lt;&#x3D; newFlowers &lt;&#x3D; 1010</span><br><span class="line">1 &lt;&#x3D; full, partial &lt;&#x3D; 105</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-3"><a href="#è§£é¢˜æ€è·¯-3" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). å°† <code>flowers</code> ä»å°åˆ°å¤§æ’åºï¼›<br>(2). è´ªå¿ƒï¼šè®©é åçš„ <code>flowers[i]</code> å¢åŠ è‡³ <code>target</code>ï¼Œå…¶ä½™çš„ <code>flowers</code> çš„æœ€å°å€¼å°½é‡å¤§ï¼›<br>(3). å¤–å±‚å¾ªç¯åœ¨æšä¸¾å®Œå–„èŠ±å›­ä¸ªæ•°çš„å‰æä¸‹ï¼Œå†…å±‚å¾ªç¯æˆ‘ä»¬è¦å»è®¡ç®—å‰©ä½™<code>newFlowers</code> èŠ±æœµæ•°ç›®ä¸‹ä¸å®Œå–„èŠ±å›­åŒºé—´å†…èƒ½æ‹¿åˆ°çš„æœ€å°å€¼ï¼Œè¿™é‡Œé¢æˆ‘ä»¬é€šè¿‡äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼æ¥æšä¸¾æœ€å°å€¼ï¼ˆå…·æœ‰äºŒæ®µæ€§ï¼‰ï¼Œ<code>check</code> å‡½æ•°é‡Œé¢å…ˆæ‰¾åˆ°å¤§äºç­‰äº<code>mid</code> çš„ä½ç½®ï¼Œç„¶ååˆ¤æ–­å‰©ä¸‹çš„æ•°å…¨éƒ¨è¡¥å……åˆ° <code>mid</code> æœµèŠ±å¤Ÿä¸å¤Ÿï¼Œæœ€åäºŒåˆ†çš„ç»“æœå°±æ˜¯å½“å‰ä¸å®Œå–„èŠ±å›­åŒºé—´å†…èƒ½æ‹¿åˆ°çš„æœ€å°å€¼ï¼Œæ›´æ–°ç­”æ¡ˆå³å¯ã€‚<br>æ³¨ï¼š å¤–å±‚å¾ªç¯æšä¸¾æ—¶ç‰¹åˆ¤ä¸€ä¸‹iiç­‰äº00çš„æƒ…å†µï¼Œå› ä¸ºæ­¤æ—¶<code>j = i - 1</code>ä¼šè¶Šç•Œã€‚</p><h3 id="è§£é¢˜ä»£ç -3"><a href="#è§£é¢˜ä»£ç -3" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maximumBeauty</span><span class="params">(flowers []<span class="keyword">int</span>, newFlowers <span class="keyword">int64</span>, target <span class="keyword">int</span>, full <span class="keyword">int</span>, partial <span class="keyword">int</span>)</span> <span class="title">int64</span></span> &#123;  </span><br><span class="line">   sort.Ints(flowers)  </span><br><span class="line">   n := <span class="built_in">len</span>(flowers)  </span><br><span class="line">  </span><br><span class="line">   <span class="comment">// count:å·²ç»å®Œå–„çš„ä¸ªæ•°  </span></span><br><span class="line"> count := <span class="number">0</span>  </span><br><span class="line"> <span class="comment">// è®¡ç®— &gt;= targetæ•°ç›®, é€€å‡ºå¾ªç¯å flowers[0, idx] &lt; target idx := n - 1  </span></span><br><span class="line"> <span class="keyword">for</span> idx &gt;= <span class="number">0</span> &amp;&amp; flowers[idx] &gt;= target &#123;  </span><br><span class="line">      count++  </span><br><span class="line"> idx--  </span><br><span class="line"> &#125;  </span><br><span class="line">   <span class="comment">//fmt.Println(&quot;idx:&quot;, idx, &quot;count:&quot;, count)  </span></span><br><span class="line">  </span><br><span class="line"> <span class="comment">// å…¨éƒ¨éƒ½æ˜¯å®Œå–„çš„  </span></span><br><span class="line"> <span class="keyword">if</span> idx == <span class="number">-1</span> &#123;  </span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">int64</span>(n * full)  </span><br><span class="line">   &#125;  </span><br><span class="line">  </span><br><span class="line">   sum := <span class="built_in">make</span>([]<span class="keyword">int64</span>, n + <span class="number">1</span>)  </span><br><span class="line">   <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;  </span><br><span class="line">      sum[i] = sum[i - <span class="number">1</span>] + <span class="keyword">int64</span>(flowers[i - <span class="number">1</span>])  </span><br><span class="line">   &#125;  </span><br><span class="line">  </span><br><span class="line">   check := <span class="function"><span class="keyword">func</span><span class="params">(left, right, remain, t <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;  </span><br><span class="line">      <span class="comment">// 1.æ‰¾åˆ°å€¼ &lt; tçš„åŒºé—´çš„å³ç«¯ç‚¹  </span></span><br><span class="line"> <span class="keyword">for</span> left &lt; right &#123;  </span><br><span class="line">         mid := left + (right - left + <span class="number">1</span>) / <span class="number">2</span>  </span><br><span class="line"> <span class="keyword">if</span> flowers[mid] &lt; t &#123;  </span><br><span class="line">            left = mid  </span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            right = mid - <span class="number">1</span>  </span><br><span class="line"> &#125;  </span><br><span class="line">      &#125;  </span><br><span class="line">      <span class="comment">// 2.æ£€æŸ¥åŒºé—´[0, left] æ˜¯å¦å¯ä»¥å®Œå–„ä¸ºt  </span></span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">int64</span>(remain) &gt;= <span class="keyword">int64</span>(t * (left + <span class="number">1</span>)) - sum[left + <span class="number">1</span>]  </span><br><span class="line">  </span><br><span class="line">   &#125;  </span><br><span class="line">  </span><br><span class="line">   <span class="keyword">var</span> res <span class="keyword">int64</span>  </span><br><span class="line">  </span><br><span class="line"> <span class="comment">// cnt: æ–°çš„å˜æˆå®Œå–„çš„ä¸ªæ•°, ä»å³å¾€å·¦å¡«  </span></span><br><span class="line"> <span class="keyword">for</span> cnt := <span class="number">0</span>; cnt &lt;= idx + <span class="number">1</span>; cnt++ &#123;  </span><br><span class="line">      <span class="comment">// åŒºé—´ï¼š[idx - cnt + 1,idx]å®Œå–„, [0, idx - cnt]ä¸å®Œå–„ï¼Œå¹¶è®¡ç®—[0, idx - cnt]ä¸­çš„æœ€å°å€¼çš„æœ€å¤§å€¼  </span></span><br><span class="line"> <span class="comment">// å¡«å……å®ŒåŒºé—´[idx - cnt + 1, idx]åå‰©ä½™å¯ç§çš„èŠ±çš„æ•°ç›®  </span></span><br><span class="line"> remain := newFlowers - (<span class="keyword">int64</span>(target * cnt) - (sum[idx + <span class="number">1</span>] - sum[idx - cnt + <span class="number">1</span>]))  </span><br><span class="line">  </span><br><span class="line">      <span class="comment">//fmt.Println(&quot;remain:&quot;, remain)  </span></span><br><span class="line"> <span class="keyword">if</span> remain &lt; <span class="number">0</span> &#123;  </span><br><span class="line">         <span class="keyword">break</span>  </span><br><span class="line"> &#125;  </span><br><span class="line">  </span><br><span class="line">      <span class="comment">// è®¡ç®— [0, i - 1]ä¸­çš„æœ€å°å€¼, ç›´æ¥äºŒåˆ†ç­”æ¡ˆã€‚  </span></span><br><span class="line"> left, right := flowers[<span class="number">0</span>], target - <span class="number">1</span>  </span><br><span class="line">  </span><br><span class="line"> <span class="keyword">for</span> left &lt; right &#123;  </span><br><span class="line">         mid := left + (right - left + <span class="number">1</span>) / <span class="number">2</span>  </span><br><span class="line"> <span class="comment">// æ£€æŸ¥æ˜¯å¦èƒ½å¤Ÿå°†åŒºé—´[0, idx -cnt]ä¸­ï¼Œå€¼ &lt; midçš„åŒºé—´ï¼ˆå‡è®¾æ˜¯åŒºé—´[0, j]ï¼‰å…¨éƒ¨å®Œå–„ä¸ºmid  </span></span><br><span class="line"> <span class="keyword">if</span> check(<span class="number">0</span>, idx - cnt, <span class="keyword">int</span>(remain), mid) &#123;  </span><br><span class="line">            left = mid  </span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            right = mid - <span class="number">1</span>  </span><br><span class="line"> &#125;  </span><br><span class="line">  </span><br><span class="line">      &#125;  </span><br><span class="line">  </span><br><span class="line">      <span class="comment">//fmt.Println(i, count + idx - i + 1, left)  </span></span><br><span class="line">  </span><br><span class="line"> <span class="comment">// å¦‚æœå…¨éƒ¨å®Œå–„ï¼Œ åˆ™åªæœ‰ å®Œå–„æ•°ç›® * full if count + cnt == n &#123;  </span></span><br><span class="line">         res = max(res, <span class="keyword">int64</span>((count + cnt) * full))  </span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">         <span class="comment">// å®Œå–„çš„æ•°é‡ï¼šcount + cnt, æœªå®Œå–„ä¸­æœ€å°å€¼ï¼šleft  </span></span><br><span class="line"> res = max(res, <span class="keyword">int64</span>((count + cnt) * full + left * partial))  </span><br><span class="line">      &#125;  </span><br><span class="line">  </span><br><span class="line">   &#125;  </span><br><span class="line">  </span><br><span class="line">   <span class="keyword">return</span> res  </span><br><span class="line">  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(a, b <span class="keyword">int64</span>)</span> <span class="title">int64</span></span> &#123;  </span><br><span class="line">   <span class="keyword">if</span> a &gt;= b &#123;  </span><br><span class="line">      <span class="keyword">return</span> a  </span><br><span class="line">   &#125;  </span><br><span class="line">   <span class="keyword">return</span> b  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ¬æ–‡æ˜¯å¯¹ 2022.04.09 å‘¨èµ›çš„å¤ç›˜&lt;/p&gt;
&lt;h2 id=&quot;LeetCode6037-æŒ‰å¥‡å¶æ€§äº¤æ¢åçš„æœ€å¤§æ•°å­—&quot;&gt;&lt;a href=&quot;#LeetCode6037-æŒ‰å¥‡å¶æ€§äº¤æ¢åçš„æœ€å¤§æ•°å­—&quot; class=&quot;headerlink&quot; title=&quot;LeetCode6037.</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 8ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/08/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%208%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/08/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%208%EF%BC%89/</id>
    <published>2022-04-07T22:00:00.000Z</published>
    <updated>2022-04-09T15:15:15.105Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LeetCode536-ä»å­—ç¬¦ä¸²ç”ŸæˆäºŒå‰æ ‘"><a href="#LeetCode536-ä»å­—ç¬¦ä¸²ç”ŸæˆäºŒå‰æ ‘" class="headerlink" title="LeetCode536. ä»å­—ç¬¦ä¸²ç”ŸæˆäºŒå‰æ ‘"></a><a class="link" href="https://leetcode-cn.com/problems/construct-binary-tree-from-string/">LeetCode536. ä»å­—ç¬¦ä¸²ç”ŸæˆäºŒå‰æ ‘<i class="fas fa-external-link-alt"></i></a></h2><p>#é€’å½’ #æ ˆ #äºŒå‰æ ‘</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ä½ éœ€è¦ç”¨ä¸€ä¸ªåŒ…æ‹¬æ‹¬å·å’Œæ•´æ•°çš„å­—ç¬¦ä¸²æ„å»ºä¸€æ£µäºŒå‰æ ‘ã€‚<br>è¾“å…¥çš„å­—ç¬¦ä¸²ä»£è¡¨ä¸€æ£µäºŒå‰æ ‘ã€‚å®ƒåŒ…æ‹¬æ•´æ•°å’Œéšåçš„ 0 ã€1 æˆ– 2 å¯¹æ‹¬å·ã€‚æ•´æ•°ä»£è¡¨æ ¹çš„å€¼ï¼Œä¸€å¯¹æ‹¬å·å†…è¡¨ç¤ºåŒæ ·ç»“æ„çš„å­æ ‘ã€‚<br>è‹¥å­˜åœ¨å­ç»“ç‚¹ï¼Œåˆ™ä»å·¦å­ç»“ç‚¹å¼€å§‹æ„å»ºã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br></pre></td></tr></table></figure><p><img lazyload src="/images/loading.svg" data-src="butree.jpg" alt="avatar"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š s &#x3D; &quot;4(2(3)(1))(6(5))&quot;</span><br><span class="line">è¾“å‡ºï¼š [4,2,6,3,1,5]</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2:</span><br><span class="line">è¾“å…¥ï¼š s &#x3D; &quot;4(2(3)(1))(6(5)(7))&quot;</span><br><span class="line">è¾“å‡ºï¼š [4,2,6,3,1,5,7]</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 3:</span><br><span class="line">è¾“å…¥ï¼š s &#x3D; &quot;-4(2(3)(1))(6(5)(7))&quot;</span><br><span class="line">è¾“å‡ºï¼š [-4,2,6,3,1,5,7]</span><br><span class="line">Â </span><br><span class="line">æç¤ºï¼š</span><br><span class="line">0 &lt;&#x3D; s.length &lt;&#x3D; 3 * 104</span><br><span class="line">è¾“å…¥å­—ç¬¦ä¸²ä¸­åªåŒ…å«Â &#39;(&#39;, &#39;)&#39;, &#39;-&#39;Â å’ŒÂ &#39;0&#39; ~ &#39;9&#39;Â </span><br><span class="line">ç©ºæ ‘ç”±Â &quot;&quot;Â è€Œé&quot;()&quot;è¡¨ç¤ºã€‚</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). å¾ˆæ˜æ˜¾çš„é€’å½’é¢˜ï¼Œè€Œä¸”é¢˜ç›®ä¸­åŒ…å«æœ‰å¯¹æ‹¬å·çš„å¤„ç†ï¼Œé‡åˆ°æ‹¬å·é¦–å…ˆå°±æ˜¯è€ƒè™‘ä½¿ç”¨æ ˆæ¥è®°å½•ä¸‹åˆæ³•æ‹¬å·å†…çš„å­—ç¬¦ä¸²ï¼›<br>(2). é¦–å…ˆè¦å°†çˆ¶èŠ‚ç‚¹çš„å€¼ä»å­—ç¬¦ä¸²ä¸­æŠ å‡ºæ¥ï¼Œç„¶ååˆ†åˆ«è®°å½•ä¸‹å·¦å­æ ‘å’Œå³å­æ ‘çš„å­—ç¬¦ä¸²ï¼Œè¿™é‡Œå¯ä»¥è®¾ç½®ä¸€ä¸ªå“¨å…µï¼Œå½“å·¦å­æ ‘è¢«åˆ†ç¦»å‡ºæ¥åï¼Œç”¨å“¨å…µè®°å½•ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡è®°å½•çš„åˆæ³•å­—ç¬¦ä¸²å°±æ˜¯å³å­æ ‘ã€‚</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Definition for a binary tree node.</span></span><br><span class="line"><span class="comment">* type TreeNode struct &#123;</span></span><br><span class="line"><span class="comment">* Val int</span></span><br><span class="line"><span class="comment">* Left *TreeNode</span></span><br><span class="line"><span class="comment">* Right *TreeNode</span></span><br><span class="line"><span class="comment">* &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">str2tree</span><span class="params">(s <span class="keyword">string</span>)</span> *<span class="title">TreeNode</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> s == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> backTracking <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">string</span>)</span> *<span class="title">TreeNode</span></span></span><br><span class="line">backTracking = <span class="function"><span class="keyword">func</span><span class="params">(b <span class="keyword">string</span>)</span> *<span class="title">TreeNode</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(b) == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> h* TreeNode</span><br><span class="line"><span class="keyword">var</span> index <span class="keyword">int</span></span><br><span class="line"><span class="keyword">var</span> x <span class="keyword">int</span></span><br><span class="line">num := <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ; index&lt;<span class="built_in">len</span>(b); index++ &#123;</span><br><span class="line"><span class="keyword">if</span> b[index] != <span class="string">&#x27;(&#x27;</span> &#123;</span><br><span class="line">num += b[index:index+<span class="number">1</span>]</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">x,_ = strconv.Atoi(num)</span><br><span class="line">h = &amp;TreeNode&#123;</span><br><span class="line">Val : x,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bb := <span class="string">&quot;&quot;</span></span><br><span class="line">l := <span class="number">0</span></span><br><span class="line">f := <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ; index&lt;<span class="built_in">len</span>(b); index++ &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> b[index] == <span class="string">&#x27;(&#x27;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> l == <span class="number">0</span> &#123;</span><br><span class="line">l++</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">l++</span><br><span class="line">bb += <span class="string">&quot;(&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (b[index] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; b[index] &lt;= <span class="string">&#x27;9&#x27;</span>) || b[index] == <span class="string">&#x27;-&#x27;</span> &#123;</span><br><span class="line">bb += b[index:index+<span class="number">1</span>]</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">l--</span><br><span class="line"><span class="keyword">if</span> l != <span class="number">0</span> &#123;</span><br><span class="line">bb += <span class="string">&quot;)&quot;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> f == <span class="number">0</span> &#123;</span><br><span class="line">leftNode := backTracking(bb)</span><br><span class="line">h.Left = leftNode</span><br><span class="line">bb = <span class="string">&quot;&quot;</span></span><br><span class="line">f = <span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">rightNode := backTracking(bb)</span><br><span class="line">h.Right = rightNode</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> h</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> backTracking(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode370-åŒºé—´åŠ æ³•"><a href="#LeetCode370-åŒºé—´åŠ æ³•" class="headerlink" title="LeetCode370. åŒºé—´åŠ æ³•"></a><a class="link" href="https://leetcode-cn.com/problems/range-addition/">LeetCode370. åŒºé—´åŠ æ³•<i class="fas fa-external-link-alt"></i></a></h2><p>#å·®åˆ†æ•°ç»„</p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªé•¿åº¦ä¸ºÂ nÂ çš„æ•°ç»„ï¼Œåˆå§‹æƒ…å†µä¸‹æ‰€æœ‰çš„æ•°å­—å‡ä¸ºÂ 0ï¼Œä½ å°†ä¼šè¢«ç»™å‡ºÂ k ä¸ªæ›´æ–°çš„æ“ä½œã€‚<br>å…¶ä¸­ï¼Œæ¯ä¸ªæ“ä½œä¼šè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªä¸‰å…ƒç»„ï¼š[startIndex, endIndex, inc]ï¼Œä½ éœ€è¦å°†å­æ•°ç»„Â A[startIndex â€¦ endIndex]ï¼ˆåŒ…æ‹¬ startIndex å’Œ endIndexï¼‰å¢åŠ Â incã€‚<br>è¯·ä½ è¿”å›Â kÂ æ¬¡æ“ä½œåçš„æ•°ç»„ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹:</span><br><span class="line">è¾“å…¥: length &#x3D; 5, updates &#x3D; [[1,3,2],[2,4,3],[0,2,-2]]</span><br><span class="line">è¾“å‡º: [-2,0,3,5,3]</span><br><span class="line">è§£é‡Š:</span><br><span class="line"></span><br><span class="line">åˆå§‹çŠ¶æ€:</span><br><span class="line">[0,0,0,0,0]</span><br><span class="line"></span><br><span class="line">è¿›è¡Œäº†æ“ä½œ [1,3,2] åçš„çŠ¶æ€:</span><br><span class="line">[0,2,2,2,0]</span><br><span class="line"></span><br><span class="line">è¿›è¡Œäº†æ“ä½œ [2,4,3] åçš„çŠ¶æ€:</span><br><span class="line">[0,2,5,5,3]</span><br><span class="line"></span><br><span class="line">è¿›è¡Œäº†æ“ä½œ [0,2,-2] åçš„çŠ¶æ€:</span><br><span class="line">[-2,0,3,5,3]</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). å¦‚æœé‡‡ç”¨æš´åŠ›çš„æ–¹å¼ï¼Œéœ€è¦åœ¨éå† <code>updates</code> çš„åŒæ—¶éå†ç»“æœæ•°ç»„ï¼Œæ—¶é—´ä»£ä»·å·¨å¤§ï¼›<br>(2). è§‚å¯Ÿåˆ°æ‰§è¡Œ <code>updates</code> çš„é¡ºåºä¸æœ€ç»ˆç»“æœæ— å…³ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é’ˆå¯¹åŒºé—´è¿›è¡Œæ›´æ–°ï¼›<br>(3). å…·ä½“çš„æ€è·¯æ˜¯ï¼šå¯¹äºæ¯ä¸€ç»„ <code>updates[i]</code>ï¼Œæˆ‘ä»¬æå–å‡º <code>left</code>ã€<code>right</code>ã€<code>val</code> è¿™ä¸‰ä¸ªå€¼åˆ†åˆ«ä»£è¡¨å·¦è¾¹ç•Œã€å³è¾¹ç•Œã€æ›´æ–°å€¼ã€‚æˆ‘ä»¬åªéœ€è¦å»ºç«‹ä¸€ä¸ªå·®åˆ†æ•°ç»„ <code>diff</code>ï¼Œå¯¹ <code>diff[left]</code> åŠ ä¸Š <code>val</code>ï¼Œå¯¹ <code>diff[right+1]</code> å‡å» <code>val</code>ï¼Œé‚£ä¹ˆä¹‹åå°±å¯ä»¥é€šè¿‡åŒºé—´çš„è®°å½•è¿˜åŸæœ€ç»ˆçš„è¾“å‡ºç»“æœï¼›<br>(4). æœ€åé€šè¿‡å‰ç¼€å’Œè®¡ç®—æœ€ç»ˆçš„è¾“å‡ºç»“æœ</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N)</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getModifiedArray</span><span class="params">(length <span class="keyword">int</span>, updates [][]<span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">nums := <span class="built_in">make</span>([]<span class="keyword">int</span>, length)</span><br><span class="line">diff := <span class="built_in">make</span>([]<span class="keyword">int</span>, length)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(updates); i++ &#123;</span><br><span class="line">left, right, val := updates[i][<span class="number">0</span>], updates[i][<span class="number">1</span>], updates[i][<span class="number">2</span>]</span><br><span class="line">diff[left] += val</span><br><span class="line"><span class="keyword">if</span> right+<span class="number">1</span> &gt;= length &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line">diff[right+<span class="number">1</span>] -= val</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">nums[<span class="number">0</span>] = diff[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;length; i++ &#123;</span><br><span class="line">nums[i] = nums[i<span class="number">-1</span>]+diff[i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode692-å‰Kä¸ªé«˜é¢‘å•è¯"><a href="#LeetCode692-å‰Kä¸ªé«˜é¢‘å•è¯" class="headerlink" title="LeetCode692. å‰Kä¸ªé«˜é¢‘å•è¯"></a><a class="link" href="https://leetcode-cn.com/problems/top-k-frequent-words/">LeetCode692. å‰Kä¸ªé«˜é¢‘å•è¯<i class="fas fa-external-link-alt"></i></a></h2><p>#ä¼˜å…ˆé˜Ÿåˆ— #å­—å…¸åº </p><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ä¸ªå•è¯åˆ—è¡¨Â wordsÂ å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¿”å›å‰Â kÂ ä¸ªå‡ºç°æ¬¡æ•°æœ€å¤šçš„å•è¯ã€‚<br>è¿”å›çš„ç­”æ¡ˆåº”è¯¥æŒ‰å•è¯å‡ºç°é¢‘ç‡ç”±é«˜åˆ°ä½æ’åºã€‚å¦‚æœä¸åŒçš„å•è¯æœ‰ç›¸åŒå‡ºç°é¢‘ç‡ï¼Œ æŒ‰å­—å…¸é¡ºåº æ’åºã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥: words &#x3D; [&quot;i&quot;, &quot;love&quot;, &quot;leetcode&quot;, &quot;i&quot;, &quot;love&quot;, &quot;coding&quot;], k &#x3D; 2</span><br><span class="line">è¾“å‡º: [&quot;i&quot;, &quot;love&quot;]</span><br><span class="line">è§£æ: &quot;i&quot; å’Œ &quot;love&quot; ä¸ºå‡ºç°æ¬¡æ•°æœ€å¤šçš„ä¸¤ä¸ªå•è¯ï¼Œå‡ä¸º2æ¬¡ã€‚</span><br><span class="line">    æ³¨æ„ï¼ŒæŒ‰å­—æ¯é¡ºåº &quot;i&quot; åœ¨ &quot;love&quot; ä¹‹å‰ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥: [&quot;the&quot;, &quot;day&quot;, &quot;is&quot;, &quot;sunny&quot;, &quot;the&quot;, &quot;the&quot;, &quot;the&quot;, &quot;sunny&quot;, &quot;is&quot;, &quot;is&quot;], k &#x3D; 4</span><br><span class="line">è¾“å‡º: [&quot;the&quot;, &quot;is&quot;, &quot;sunny&quot;, &quot;day&quot;]</span><br><span class="line">è§£æ: &quot;the&quot;, &quot;is&quot;, &quot;sunny&quot; å’Œ &quot;day&quot; æ˜¯å‡ºç°æ¬¡æ•°æœ€å¤šçš„å››ä¸ªå•è¯ï¼Œ</span><br><span class="line">    å‡ºç°æ¬¡æ•°ä¾æ¬¡ä¸º 4, 3, 2 å’Œ 1 æ¬¡ã€‚</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line">1 &lt;&#x3D; words.length &lt;&#x3D; 500</span><br><span class="line">1 &lt;&#x3D; words[i] &lt;&#x3D; 10</span><br><span class="line">words[i]Â ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆã€‚</span><br><span class="line">k çš„å–å€¼èŒƒå›´æ˜¯Â [1, ä¸åŒ words[i] çš„æ•°é‡]</span><br><span class="line">Â </span><br><span class="line">è¿›é˜¶ï¼šå°è¯•ä»¥Â O(n log k) æ—¶é—´å¤æ‚åº¦å’ŒÂ O(n) ç©ºé—´å¤æ‚åº¦è§£å†³ã€‚</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). ä»¥Â O(n log k) æ—¶é—´å¤æ‚åº¦å’ŒÂ O(n) ç©ºé—´å¤æ‚åº¦è§£å†³ï¼Œæœ¬é¢˜é€‚åˆä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå¯¹äºè¿™ç§æ—¢è¦è€ƒè™‘ä¼˜å…ˆçº§ï¼Œåˆè¦è€ƒè™‘å­—ç¬¦ä¸²æ„æˆçš„æƒ…å†µï¼Œæ€æ ·æ„å»ºä¼˜å…ˆé˜Ÿåˆ—å¯ä»¥å‚è€ƒ <a href="https://jiahaohong1997.github.io/2021/09/27/%E5%A0%86%E7%9A%84Go%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/">å †çš„Goè¯­è¨€å®ç°</a><br>(2). æ³¨æ„è€ƒè™‘åœ¨å‡ºç°æ¬¡æ•°ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œè¦ä¾èµ–å­—ç¬¦ä¸²çš„å­—å…¸åºæ’åºï¼Œå¯ä»¥ä½¿ç”¨ <code>strings.Compare</code> æ–¹æ³•æ¥æ¯”è¾ƒå­—å…¸åºï¼›<br>(3). è¦è¾“å‡ºæœ€å¤§çš„ <code>k</code> ä¸ªï¼Œå¯ä»¥é‡‡å–å»ºç«‹å®¹é‡ä¸Šé™ä¸º <code>k</code> çš„å°æ ¹å †çš„åšæ³•ã€‚</p><h3 id="è§£é¢˜ä»£ç -2"><a href="#è§£é¢˜ä»£ç -2" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> wordCount <span class="keyword">struct</span> &#123;</span><br><span class="line">word <span class="keyword">string</span></span><br><span class="line">priority <span class="keyword">int</span></span><br><span class="line">index <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> priorityQueue []*wordCount</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(pq priorityQueue)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">len</span>(pq)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(pq priorityQueue)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">pq[i], pq[j] = pq[j], pq[i]</span><br><span class="line">pq[i].index = j</span><br><span class="line">pq[j].index = i</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(pq priorityQueue)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> pq[i].priority == pq[j].priority &#123;</span><br><span class="line"><span class="keyword">if</span> strings.Compare(pq[i].word, pq[j].word) == <span class="number">1</span> &#123;</span><br><span class="line"><span class="comment">// pq[i].word çš„å­—å…¸åºåœ¨ pq[j].word çš„åé¢ï¼Œé‚£åœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­å°±æ’å‰é¢</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> strings.Compare(pq[i].word, pq[j].word) == <span class="number">-1</span> &#123;</span><br><span class="line"><span class="comment">// pq[i].word çš„å­—å…¸åºåœ¨ pq[j].word çš„å‰é¢ï¼Œé‚£åœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­å°±æ’åé¢</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> pq[i].priority &lt; pq[j].priority</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(pq *priorityQueue)</span> <span class="title">Push</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">n := <span class="built_in">len</span>(*pq)</span><br><span class="line">item := x.(*wordCount)</span><br><span class="line">item.index = n</span><br><span class="line">*pq = <span class="built_in">append</span>(*pq, item)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(pq *priorityQueue)</span> <span class="title">Pop</span><span class="params">()</span> <span class="title">interface</span></span>&#123;&#125; &#123;</span><br><span class="line">old := *pq</span><br><span class="line">n := <span class="built_in">len</span>(old)</span><br><span class="line">item := old[n<span class="number">-1</span>]</span><br><span class="line">old[n<span class="number">-1</span>] = <span class="literal">nil</span></span><br><span class="line">item.index = <span class="number">-1</span></span><br><span class="line">*pq = old[:n<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> item</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">topKFrequent</span><span class="params">(words []<span class="keyword">string</span>, k <span class="keyword">int</span>)</span> []<span class="title">string</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pq priorityQueue</span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(words); i++ &#123;</span><br><span class="line">m[words[i]]++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">i := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> w, v := <span class="keyword">range</span> m &#123;</span><br><span class="line"><span class="keyword">if</span> i &lt; k &#123;</span><br><span class="line">wc := &amp;wordCount &#123;</span><br><span class="line">word : w,</span><br><span class="line">index : i,</span><br><span class="line">priority : v,</span><br><span class="line">&#125;</span><br><span class="line">i++</span><br><span class="line">heap.Push(&amp;pq, wc)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> v &gt; pq[<span class="number">0</span>].priority || (v == pq[<span class="number">0</span>].priority &amp;&amp; strings.Compare(w, pq[<span class="number">0</span>].word) == <span class="number">-1</span>) &#123;</span><br><span class="line">heap.Pop(&amp;pq)</span><br><span class="line">wc := &amp;wordCount &#123;</span><br><span class="line">word : w,</span><br><span class="line">index : k<span class="number">-1</span>,</span><br><span class="line">priority : v,</span><br><span class="line">&#125;</span><br><span class="line">heap.Push(&amp;pq, wc)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ret := <span class="built_in">make</span>([]<span class="keyword">string</span>, k)</span><br><span class="line"><span class="keyword">for</span> k &gt; <span class="number">0</span> &#123;</span><br><span class="line">ret[k<span class="number">-1</span>] = heap.Pop(&amp;pq).(*wordCount).word</span><br><span class="line">k--</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LeetCode536-ä»å­—ç¬¦ä¸²ç”ŸæˆäºŒå‰æ ‘&quot;&gt;&lt;a href=&quot;#LeetCode536-ä»å­—ç¬¦ä¸²ç”ŸæˆäºŒå‰æ ‘&quot; class=&quot;headerlink&quot; title=&quot;LeetCode536. ä»å­—ç¬¦ä¸²ç”ŸæˆäºŒå‰æ ‘&quot;&gt;&lt;/a&gt;&lt;a class=&quot;link&quot; href=&quot;</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸ç”¨æ’åºç®—æ³•</title>
    <link href="http://jiahaohong1997.github.io/2022/04/07/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <id>http://jiahaohong1997.github.io/2022/04/07/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</id>
    <published>2022-04-07T11:51:00.000Z</published>
    <updated>2022-04-12T02:02:02.737Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h2><h2 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><h3 id="Go-è¯­è¨€ä»£ç "><a href="#Go-è¯­è¨€ä»£ç " class="headerlink" title="Go è¯­è¨€ä»£ç "></a>Go è¯­è¨€ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">quickSort</span><span class="params">(nums []<span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> backTracking <span class="function"><span class="keyword">func</span><span class="params">(arr []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(arr) == <span class="number">0</span> || <span class="built_in">len</span>(arr) == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">l, r := <span class="number">0</span>, <span class="built_in">len</span>(arr)<span class="number">-1</span></span><br><span class="line">mid := l</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> l &lt; r &#123;</span><br><span class="line"><span class="keyword">for</span> l &lt; r &amp;&amp; arr[r] &gt;= arr[mid] &#123;</span><br><span class="line">r--</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> l &lt; r &amp;&amp; arr[l] &lt;= arr[mid] &#123;</span><br><span class="line">l++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">arr[l], arr[r] = arr[r], arr[l]</span><br><span class="line">&#125;</span><br><span class="line">arr[l], arr[mid] = arr[mid], arr[l]</span><br><span class="line"></span><br><span class="line">backTracking(arr[:l])</span><br><span class="line">backTracking(arr[l+<span class="number">1</span>:])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">backTracking(nums)</span><br><span class="line"><span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h2><h3 id="Go-è¯­è¨€ä»£ç -1"><a href="#Go-è¯­è¨€ä»£ç -1" class="headerlink" title="Go è¯­è¨€ä»£ç "></a>Go è¯­è¨€ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mergeSort</span><span class="params">(nums []<span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> backTracking <span class="function"><span class="keyword">func</span><span class="params">(arr []<span class="keyword">int</span>)</span> []<span class="title">int</span></span></span><br><span class="line">backTracking = <span class="function"><span class="keyword">func</span><span class="params">(arr []<span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(arr) == <span class="number">0</span> || <span class="built_in">len</span>(arr) == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">n := <span class="built_in">len</span>(arr)</span><br><span class="line">a := backTracking(arr[:n/<span class="number">2</span>])</span><br><span class="line">b := backTracking(arr[n/<span class="number">2</span>:])</span><br><span class="line"></span><br><span class="line">ret := []<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">i, j := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i &lt; <span class="built_in">len</span>(a) || j &lt; <span class="built_in">len</span>(b) &#123;</span><br><span class="line"><span class="keyword">if</span> i == <span class="built_in">len</span>(a) &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, b...)</span><br><span class="line">j = <span class="built_in">len</span>(b)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> j == <span class="built_in">len</span>(b) &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, a...)</span><br><span class="line">i = <span class="built_in">len</span>(a)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> a[i] &lt;= b[j] &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, a[i])</span><br><span class="line">i++</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, b[j])</span><br><span class="line">j++</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> backTracking(nums)</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h2 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h2><h2 id="åŸºæ•°æ’åº"><a href="#åŸºæ•°æ’åº" class="headerlink" title="åŸºæ•°æ’åº"></a>åŸºæ•°æ’åº</h2><h3 id="ç®—æ³•ä»‹ç»"><a href="#ç®—æ³•ä»‹ç»" class="headerlink" title="ç®—æ³•ä»‹ç»"></a>ç®—æ³•ä»‹ç»</h3><p>&emsp;&emsp;<strong>åŸºæ•°æ’åº</strong>ï¼ˆè‹±è¯­ï¼šRadix sortï¼‰æ˜¯ä¸€ç§éæ¯”è¾ƒå‹æ•´æ•°æ’åºç®—æ³•ï¼Œå…¶åŸç†æ˜¯å°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ç”±äºæ•´æ•°ä¹Ÿå¯ä»¥è¡¨è¾¾å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚åå­—æˆ–æ—¥æœŸï¼‰å’Œç‰¹å®šæ ¼å¼çš„æµ®ç‚¹æ•°ï¼Œæ‰€ä»¥åŸºæ•°æ’åºä¹Ÿä¸æ˜¯åªèƒ½ä½¿ç”¨äºæ•´æ•°ã€‚å®ƒæ˜¯è¿™æ ·å®ç°çš„ï¼šå°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ï¼ˆæ­£æ•´æ•°ï¼‰ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ã€‚ç„¶åï¼Œä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åºã€‚è¿™æ ·ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥åï¼Œæ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚åŸºæ•°æ’åºçš„æ–¹å¼å¯ä»¥é‡‡ç”¨LSDï¼ˆLeast significant digitalï¼‰æˆ–MSDï¼ˆMost significant digitalï¼‰ï¼ŒLSDçš„æ’åºæ–¹å¼ç”±é”®å€¼çš„æœ€å³è¾¹å¼€å§‹ï¼Œè€ŒMSDåˆ™ç›¸åï¼Œç”±é”®å€¼çš„æœ€å·¦è¾¹å¼€å§‹ã€‚</p><h3 id="æ•ˆç‡"><a href="#æ•ˆç‡" class="headerlink" title="æ•ˆç‡"></a>æ•ˆç‡</h3><p>&emsp;&emsp;åŸºæ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(k * N)$ï¼Œå…¶ä¸­ $N$æ˜¯æ’åºå…ƒç´ ä¸ªæ•°ï¼Œ$k$ æ˜¯æ•°å­—ä½æ•°ã€‚æ³¨æ„è¿™ä¸æ˜¯è¯´è¿™ä¸ªæ—¶é—´å¤æ‚åº¦ä¸€å®šä¼˜äº $O(NlogN)$ï¼Œ$k$ çš„å¤§å°å–å†³äºæ•°å­—ä½çš„é€‰æ‹©ï¼ˆæ¯”å¦‚æ¯”ç‰¹ä½æ•°ï¼‰ï¼Œå’Œå¾…æ’åºæ•°æ®æ‰€å±æ•°æ®ç±»å‹çš„å…¨é›†çš„å¤§å°ï¼›$k$ å†³å®šäº†è¿›è¡Œå¤šå°‘è½®å¤„ç†ï¼Œè€Œ $N$ æ˜¯æ¯è½®å¤„ç†çš„æ“ä½œæ•°ç›®ã€‚</p><h3 id="Go-è¯­è¨€ä»£ç -2"><a href="#Go-è¯­è¨€ä»£ç -2" class="headerlink" title="Go è¯­è¨€ä»£ç "></a>Go è¯­è¨€ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">radixSort</span><span class="params">(nums []<span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> maxNum <span class="function"><span class="keyword">func</span><span class="params">(...<span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line">maxNum = <span class="function"><span class="keyword">func</span><span class="params">(array ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">max := array[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(array); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> array[i] &gt; max &#123;</span><br><span class="line">max = array[i]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> max</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cnt := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">buf := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(nums))</span><br><span class="line"><span class="keyword">for</span> exp:=<span class="number">1</span>; exp&lt;=maxNum(nums...); exp*=<span class="number">10</span> &#123;</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">digit := nums[i] / exp % <span class="number">10</span></span><br><span class="line">cnt[digit]++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="number">10</span>; i++ &#123;</span><br><span class="line">cnt[i] += cnt[i<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="built_in">len</span>(nums)<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i-- &#123;</span><br><span class="line">digit := nums[i] / exp % <span class="number">10</span></span><br><span class="line">buf[cnt[digit]<span class="number">-1</span>] = nums[i]</span><br><span class="line">cnt[digit]--</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é€‰æ‹©æ’åº&quot;&gt;&lt;a href=&quot;#é€‰æ‹©æ’åº&quot; class=&quot;headerlink&quot; title=&quot;é€‰æ‹©æ’åº&quot;&gt;&lt;/a&gt;é€‰æ‹©æ’åº&lt;/h2&gt;&lt;h2 id=&quot;æ’å…¥æ’åº&quot;&gt;&lt;a href=&quot;#æ’å…¥æ’åº&quot; class=&quot;headerlink&quot; title=&quot;æ’å…¥æ’åº&quot;&gt;&lt;/a</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ’åº" scheme="http://jiahaohong1997.github.io/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 7ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/06/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%207%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/06/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%207%EF%BC%89/</id>
    <published>2022-04-06T09:38:00.000Z</published>
    <updated>2022-04-08T00:08:22.610Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æ²¡æ—©èµ·åˆ·é¢˜ï¼Œæ—©èµ·æŠ¢èœå»äº†ã€‚æ·¦ï¼</p><h2 id="LeetCode253-ä¼šè®®å®¤-II"><a href="#LeetCode253-ä¼šè®®å®¤-II" class="headerlink" title="LeetCode253. ä¼šè®®å®¤ II"></a><a class="link" href="https://leetcode-cn.com/problems/meeting-rooms-ii/">LeetCode253. ä¼šè®®å®¤ II<i class="fas fa-external-link-alt"></i></a></h2><p>#å †æ’åº</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªä¼šè®®æ—¶é—´å®‰æ’çš„æ•°ç»„ intervals ï¼Œæ¯ä¸ªä¼šè®®æ—¶é—´éƒ½ä¼šåŒ…æ‹¬å¼€å§‹å’Œç»“æŸçš„æ—¶é—´ intervals[i] = [starti, endi] ï¼Œè¿”å› æ‰€éœ€ä¼šè®®å®¤çš„æœ€å°æ•°é‡ ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šintervals &#x3D; [[0,30],[5,10],[15,20]]</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šintervals &#x3D; [[7,10],[2,4]]</span><br><span class="line">è¾“å‡ºï¼š1</span><br><span class="line">Â </span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D;Â intervals.length &lt;&#x3D; 104</span><br><span class="line">0 &lt;&#x3D; starti &lt; endi &lt;&#x3D; 106</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). æŒ‰ç…§æœ€æœ´ç´ çš„æƒ³æ³•ï¼Œè¦ç»™å…¬å¸éƒ¨é—¨å®‰æ’ä¼šè®®ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯ä¼˜å…ˆè€ƒè™‘ä¼šè®®å¼€å§‹å¾—æ—©çš„éƒ¨é—¨ï¼Œé‚£ä¹ˆé¦–å…ˆå°±æ˜¯è¦æ’åºã€‚æ’åºçš„æ¡ä»¶å°±æ˜¯å¼€å§‹æ—¶é—´è¶Šæ—©è¶Šé å‰ï¼›<br>(2). å®‰æ’æ–°ä¼šè®®å®¤çš„åŸåˆ™æ˜¯æ‰€æœ‰å·²ç”³è¯·çš„ä¼šè®®å®¤éƒ½è¢«å ç”¨ã€‚é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæœ€å°å †ï¼Œå †ä¸­ä¿å­˜çš„æ˜¯æ¯åœºä¼šè®®çš„ç»“æŸæ—¶é—´ï¼›<br>(3). å½“å½“å‰ä¼šè®®å¼€å§‹æ—¶ï¼Œå †é¡¶çš„ä¼šè®®è¿˜æ²¡ç»“æŸï¼Œè¯´æ˜å †ä¸­æ‰€æœ‰çš„ä¼šè®®éƒ½ä¸å¯èƒ½ç»“æŸï¼Œé‚£ä¹ˆå°±è¦ç”³è¯·æ–°çš„ä¼šè®®å®¤ï¼›<br>(4). éå†å®Œæ•´ä¸ªä¼šè®®çš„è®°å½•ï¼Œå°±å¯ä»¥å¾—åˆ°è¦å¼€è¾Ÿçš„æœ€å¤§ä¼šè®®å®¤æ•°é‡ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(Nlog(N))</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> intHeap []<span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h intHeap)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">len</span>(h)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h intHeap)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">h[i], h[j] = h[j], h[i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h intHeap)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> h[i] &lt; h[j]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *intHeap)</span> <span class="title">Push</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">*h = <span class="built_in">append</span>(*h, x.(<span class="keyword">int</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *intHeap)</span> <span class="title">Pop</span><span class="params">()</span> <span class="title">interface</span></span>&#123;&#125; &#123;</span><br><span class="line">old := *h</span><br><span class="line">n := <span class="built_in">len</span>(old)</span><br><span class="line">x := old[n<span class="number">-1</span>]</span><br><span class="line">*h = old[:n<span class="number">-1</span>]</span><br><span class="line"><span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minMeetingRooms</span><span class="params">(intervals [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">sort.Slice(intervals, <span class="function"><span class="keyword">func</span><span class="params">(i,j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> intervals[i][<span class="number">0</span>] == intervals[j][<span class="number">0</span>] &#123;</span><br><span class="line"><span class="keyword">return</span> intervals[i][<span class="number">1</span>] &lt; intervals[j][<span class="number">1</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> intervals[i][<span class="number">0</span>] &lt; intervals[j][<span class="number">0</span>]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> h intHeap</span><br><span class="line">heap.Push(&amp;h, intervals[<span class="number">0</span>][<span class="number">1</span>])</span><br><span class="line">room := <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(intervals); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> intervals[i][<span class="number">0</span>] &gt;= h[<span class="number">0</span>] &#123;</span><br><span class="line">heap.Pop(&amp;h)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">room++</span><br><span class="line">&#125;</span><br><span class="line">heap.Push(&amp;h, intervals[i][<span class="number">1</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> room</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode163-ç¼ºå¤±çš„åŒºé—´"><a href="#LeetCode163-ç¼ºå¤±çš„åŒºé—´" class="headerlink" title="LeetCode163. ç¼ºå¤±çš„åŒºé—´"></a><a class="link" href="https://leetcode-cn.com/problems/missing-ranges/">LeetCode163. ç¼ºå¤±çš„åŒºé—´<i class="fas fa-external-link-alt"></i></a></h2><p>#æ¨¡æ‹Ÿé¢˜</p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ä¸ªæ’åºçš„æ•´æ•°æ•°ç»„ _<strong>nums</strong>_ ï¼Œå…¶ä¸­å…ƒç´ çš„èŒƒå›´åœ¨ <strong>é—­åŒºé—´</strong> <strong>[<em>lower, upper</em>]</strong> å½“ä¸­ï¼Œè¿”å›ä¸åŒ…å«åœ¨æ•°ç»„ä¸­çš„ç¼ºå¤±åŒºé—´ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">è¾“å…¥: nums &#x3D; [0, 1, 3, 50, 75], lower &#x3D; 0 å’Œ upper &#x3D; 99,</span><br><span class="line">è¾“å‡º: [&quot;2&quot;, &quot;4-&gt;49&quot;, &quot;51-&gt;74&quot;, &quot;76-&gt;99&quot;]</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). è¿™é“æ¨¡æ‹Ÿé¢˜æŒºæ¶å¿ƒçš„ï¼Œè¾¹ç•Œå¤„ç†æ˜¯å…³é”®ï¼›<br>(2). æ ¹æ®æ•°æ®èŒƒå›´éå† <code>nums</code>ï¼Œä¸èƒ½æŒ‰ä» <code>lower</code> åˆ° <code>upper</code>ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-1"><a href="#æ—¶é—´å¤æ‚åº¦-1" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N)</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findMissingRanges</span><span class="params">(nums []<span class="keyword">int</span>, lower <span class="keyword">int</span>, upper <span class="keyword">int</span>)</span> []<span class="title">string</span></span> &#123;</span><br><span class="line"></span><br><span class="line">ret := []<span class="keyword">string</span>&#123;&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">if</span> lower == upper &#123;</span><br><span class="line">s := strconv.Itoa(lower)</span><br><span class="line">ret = <span class="built_in">append</span>(ret, s)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">s := strconv.Itoa(lower) + <span class="string">&quot;-&gt;&quot;</span> + strconv.Itoa(upper)</span><br><span class="line">ret = <span class="built_in">append</span>(ret, s)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre := lower</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line"><span class="keyword">var</span> s <span class="keyword">string</span></span><br><span class="line"><span class="keyword">if</span> i == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">if</span> nums[i] != pre &#123;</span><br><span class="line"><span class="keyword">if</span> nums[i] == pre+<span class="number">1</span> &#123;</span><br><span class="line">s = strconv.Itoa(pre)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">s = strconv.Itoa(pre) + <span class="string">&quot;-&gt;&quot;</span> + strconv.Itoa(nums[i]<span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, s)</span><br><span class="line">pre = nums[i]</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> nums[i] == pre + <span class="number">2</span> &#123;</span><br><span class="line">s = strconv.Itoa(nums[i]<span class="number">-1</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> nums[i] == pre + <span class="number">1</span> &#123;</span><br><span class="line">s = <span class="string">&quot;&quot;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">s = strconv.Itoa(pre+<span class="number">1</span>) + <span class="string">&quot;-&gt;&quot;</span> + strconv.Itoa(nums[i]<span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre = nums[i]</span><br><span class="line"><span class="keyword">if</span> s != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, s)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> i == <span class="built_in">len</span>(nums)<span class="number">-1</span> &#123;</span><br><span class="line"><span class="keyword">if</span> nums[i] != upper &#123;</span><br><span class="line"><span class="keyword">if</span> nums[i] == upper<span class="number">-1</span> &#123;</span><br><span class="line">s = strconv.Itoa(upper)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">s = strconv.Itoa(nums[i]+<span class="number">1</span>) + <span class="string">&quot;-&gt;&quot;</span> + strconv.Itoa(upper)</span><br><span class="line">&#125;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, s)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode694-ä¸åŒå²›å±¿çš„æ•°é‡"><a href="#LeetCode694-ä¸åŒå²›å±¿çš„æ•°é‡" class="headerlink" title="LeetCode694. ä¸åŒå²›å±¿çš„æ•°é‡"></a><a class="link" href="https://leetcode-cn.com/problems/number-of-distinct-islands/">LeetCode694. ä¸åŒå²›å±¿çš„æ•°é‡<i class="fas fa-external-link-alt"></i></a></h2><p>#DFS</p><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ä¸ªéç©º 01 äºŒç»´æ•°ç»„è¡¨ç¤ºçš„ç½‘æ ¼ï¼Œä¸€ä¸ªå²›å±¿ç”±å››è¿é€šï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘ï¼‰çš„ 1 ç»„æˆï¼Œä½ å¯ä»¥è®¤ä¸ºç½‘æ ¼çš„å››å‘¨è¢«æµ·æ°´åŒ…å›´ã€‚<br>è¯·ä½ è®¡ç®—è¿™ä¸ªç½‘æ ¼ä¸­å…±æœ‰å¤šå°‘ä¸ªå½¢çŠ¶ä¸åŒçš„å²›å±¿ã€‚ä¸¤ä¸ªå²›å±¿è¢«è®¤ä¸ºæ˜¯ç›¸åŒçš„ï¼Œå½“ä¸”ä»…å½“ä¸€ä¸ªå²›å±¿å¯ä»¥é€šè¿‡å¹³ç§»å˜æ¢ï¼ˆä¸å¯ä»¥æ—‹è½¬ã€ç¿»è½¬ï¼‰å’Œå¦ä¸€ä¸ªå²›å±¿é‡åˆã€‚</p></blockquote><p>Â <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">11000</span><br><span class="line">11000</span><br><span class="line">00011</span><br><span class="line">00011</span><br><span class="line">ç»™å®šä¸Šå›¾ï¼Œè¿”å›ç»“æœ 1 ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">11011</span><br><span class="line">10000</span><br><span class="line">00001</span><br><span class="line">11011</span><br><span class="line">ç»™å®šä¸Šå›¾ï¼Œè¿”å›ç»“æœ 3 ã€‚</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line"></span><br><span class="line">11</span><br><span class="line">1</span><br><span class="line">å’Œ</span><br><span class="line"></span><br><span class="line"> 1</span><br><span class="line">11</span><br><span class="line">æ˜¯ä¸åŒçš„å²›å±¿ï¼Œå› ä¸ºæˆ‘ä»¬ä¸è€ƒè™‘æ—‹è½¬ã€ç¿»è½¬æ“ä½œã€‚</span><br></pre></td></tr></table></figure></p><h3 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). æµ·å²›é—®é¢˜çš„æ‹“å±•ï¼Œä¸€èˆ¬æ€è·¯å°±ä¸¤ç§ï¼šdfs æˆ– bfsï¼›<br>(2). è¿™é“é¢˜è¦æ±‚è¾“å‡ºçš„æ˜¯ä¸åŒå½¢çŠ¶æµ·å²›çš„æ•°é‡ï¼Œé‚£ä¹ˆå…³é”®é—®é¢˜å°±æ˜¯æ€æ ·è¡¨ç¤ºæµ·å²›çš„å½¢çŠ¶ï¼›<br>(3). å›å¿†ä¸€ä¸‹æˆ‘ä»¬é€šè¿‡ dfs æ‰¾æµ·å²›çš„è¿‡ç¨‹ï¼Œæ¯æ¬¡éƒ½æ˜¯å…ˆæ‰¾åˆ°æµ·å²›æœ€å·¦ä¸Šè§’çš„ç‚¹ï¼Œç„¶åæ ¹æ®æˆ‘ä»¬é¢„è®¾çš„æ–¹å‘æ•°ç»„æ¥æ§åˆ¶å¯»æ‰¾çš„è·¯å¾„ï¼Œé‚£ä¹ˆé€šè¿‡è¿™æ¡å¯»æ‰¾è·¯å¾„ï¼Œå°±èƒ½ç¡®å®šæµ·å²›çš„å½¢çŠ¶ï¼›<br>(4). è¦æ³¨æ„çš„æ˜¯æ¯ä¸ªæµ·å²›å·¦ä¸Šè§’çš„èµ·å§‹ç‚¹éƒ½æ˜¯å…¶åæ ‡ï¼Œè¦å°†å…¶å½’é›¶æ‰å¯ä»¥åœ¨åŒä¸€æ•°å€¼èŒƒå›´å†…è¿›è¡Œåˆ¤æ–­ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨éå† <code>grid</code> çš„ç‚¹çš„æ—¶å€™è®°å½•ä¸‹æ­¤æ—¶çš„åæ ‡ï¼Œå°±å¯ä»¥è®¡ç®—è¯¥æµ·å²›ä¸Šæ¯ä¸ªç‚¹ç›¸å¯¹äºå·¦ä¸Šè§’ç‚¹çš„åæ ‡ä½ç½®ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-2"><a href="#æ—¶é—´å¤æ‚åº¦-2" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N^2)</p><h3 id="è§£é¢˜ä»£ç -2"><a href="#è§£é¢˜ä»£ç -2" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">numDistinctIslands</span><span class="params">(grid [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">struct</span>&#123;&#125;)</span><br><span class="line">h_idx := []<span class="keyword">int</span>&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;</span><br><span class="line">w_idx := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;</span><br><span class="line"></span><br><span class="line">height, weight := <span class="built_in">len</span>(grid), <span class="built_in">len</span>(grid[<span class="number">0</span>])</span><br><span class="line">s := <span class="string">&quot;&quot;</span></span><br><span class="line">bi, bj := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dfs <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>,<span class="keyword">int</span>)</span></span></span><br><span class="line">dfs = <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">grid[i][j] = <span class="number">0</span></span><br><span class="line">s += fmt.Sprintf(<span class="string">&quot;-%d-%d&quot;</span>, i-bi, j-bj)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k:=<span class="number">0</span>; k&lt;<span class="number">4</span>; k++ &#123;</span><br><span class="line">h, w := i+h_idx[k], j+w_idx[k]</span><br><span class="line"><span class="keyword">if</span> h &gt;= <span class="number">0</span> &amp;&amp; h &lt; height &amp;&amp; w &gt;= <span class="number">0</span> &amp;&amp; w &lt; weight &amp;&amp; grid[h][w] == <span class="number">1</span> &#123;</span><br><span class="line">dfs(h,w)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;height; i++ &#123;</span><br><span class="line"><span class="keyword">for</span> j:=<span class="number">0</span>; j&lt;weight; j++ &#123;</span><br><span class="line"><span class="keyword">if</span> grid[i][j] == <span class="number">1</span> &#123;</span><br><span class="line">bi, bj, s = i, j, <span class="string">&quot;&quot;</span></span><br><span class="line">dfs(i,j)</span><br><span class="line">m[s] = <span class="keyword">struct</span>&#123;&#125;&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for k, _ := range m &#123;</span></span><br><span class="line"><span class="comment">// fmt.Println(k)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">len</span>(m)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="164-æœ€å¤§é—´è·"><a href="#164-æœ€å¤§é—´è·" class="headerlink" title="164. æœ€å¤§é—´è·"></a><a class="link" href="https://leetcode-cn.com/problems/maximum-gap/">164. æœ€å¤§é—´è·<i class="fas fa-external-link-alt"></i></a></h2><p>#åŸºæ•°æ’åº</p><h3 id="é¢˜ç›®æè¿°-3"><a href="#é¢˜ç›®æè¿°-3" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ä¸ªæ— åºçš„æ•°ç»„Â numsï¼Œè¿”å› æ•°ç»„åœ¨æ’åºä¹‹åï¼Œç›¸é‚»å…ƒç´ ä¹‹é—´æœ€å¤§çš„å·®å€¼ ã€‚å¦‚æœæ•°ç»„å…ƒç´ ä¸ªæ•°å°äº 2ï¼Œåˆ™è¿”å› 0 ã€‚<br>æ‚¨å¿…é¡»ç¼–å†™ä¸€ä¸ªåœ¨ã€Œçº¿æ€§æ—¶é—´ã€å†…è¿è¡Œå¹¶ä½¿ç”¨ã€Œçº¿æ€§é¢å¤–ç©ºé—´ã€çš„ç®—æ³•ã€‚</p></blockquote><p>Â <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> ç¤ºä¾‹Â 1:</span><br><span class="line">è¾“å…¥: nums &#x3D; [3,6,9,1]</span><br><span class="line">è¾“å‡º: 3</span><br><span class="line">è§£é‡Š: æ’åºåçš„æ•°ç»„æ˜¯ [1,3,6,9], å…¶ä¸­ç›¸é‚»å…ƒç´  (3,6) å’Œ (6,9) ä¹‹é—´éƒ½å­˜åœ¨æœ€å¤§å·®å€¼ 3ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹Â 2:</span><br><span class="line">è¾“å…¥: nums &#x3D; [10]</span><br><span class="line">è¾“å‡º: 0</span><br><span class="line">è§£é‡Š: æ•°ç»„å…ƒç´ ä¸ªæ•°å°äº 2ï¼Œå› æ­¤è¿”å› 0ã€‚</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤º:</span><br><span class="line">1 &lt;&#x3D; nums.length &lt;&#x3D; 105</span><br><span class="line">0 &lt;&#x3D; nums[i] &lt;&#x3D; 109</span><br></pre></td></tr></table></figure></p><h3 id="è§£é¢˜æ€è·¯-3"><a href="#è§£é¢˜æ€è·¯-3" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). é¦–å…ˆæ³¨æ„é¢˜ç›®çš„è¦æ±‚ï¼š<strong>æ‚¨å¿…é¡»ç¼–å†™ä¸€ä¸ªåœ¨ã€Œçº¿æ€§æ—¶é—´ã€å†…è¿è¡Œå¹¶ä½¿ç”¨ã€Œçº¿æ€§é¢å¤–ç©ºé—´ã€çš„ç®—æ³•ã€‚</strong> è¿™å°±å¯¹é€‰æ‹©çš„ç®—æ³•æœ‰äº†é™åˆ¶ã€‚å¿«æ’å’Œå †æ’çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(Nlog(N))ï¼ŒåŸºæ•°æ’åºæ—¶é—´å¤æ‚åº¦æ˜¯ O(N)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(N)ï¼Œç¬¦åˆé¢˜ç›®è¦æ±‚ï¼›<br>(2). é‚£ä¹ˆè¿™é“é¢˜å°±è½¬åŒ–æˆä¸€é“åŸºæ•°æ’åºçš„ç®—æ³•äº†ã€‚åŸºæ•°æ’åºå¯ä»¥å‚è€ƒå¦ä¸€ç¯‡åšå®¢<a href="https://jiahaohong1997.github.io/2022/04/07/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/">å¸¸ç”¨æ’åºç®—æ³•</a></p><h3 id="æ—¶é—´å¤æ‚åº¦-3"><a href="#æ—¶é—´å¤æ‚åº¦-3" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N)</p><h3 id="è§£é¢˜ä»£ç -3"><a href="#è§£é¢˜ä»£ç -3" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maximumGap</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="params">(ans <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    n := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> n &lt; <span class="number">2</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    buf := <span class="built_in">make</span>([]<span class="keyword">int</span>, n)</span><br><span class="line">    maxVal := max(nums...)</span><br><span class="line">    <span class="keyword">for</span> exp := <span class="number">1</span>; exp &lt;= maxVal; exp *= <span class="number">10</span> &#123;</span><br><span class="line">        cnt := [<span class="number">10</span>]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> _, v := <span class="keyword">range</span> nums &#123;</span><br><span class="line">            digit := v / exp % <span class="number">10</span></span><br><span class="line">            cnt[digit]++</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">            cnt[i] += cnt[i<span class="number">-1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> i := n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i-- &#123;</span><br><span class="line">            digit := nums[i] / exp % <span class="number">10</span></span><br><span class="line">            buf[cnt[digit]<span class="number">-1</span>] = nums[i]</span><br><span class="line">            cnt[digit]--</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">copy</span>(nums, buf)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; n; i++ &#123;</span><br><span class="line">        ans = max(ans, nums[i]-nums[i<span class="number">-1</span>])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(a ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    res := a[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> a[<span class="number">1</span>:] &#123;</span><br><span class="line">        <span class="keyword">if</span> v &gt; res &#123;</span><br><span class="line">            res = v</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šå¤©æ²¡æ—©èµ·åˆ·é¢˜ï¼Œæ—©èµ·æŠ¢èœå»äº†ã€‚æ·¦ï¼&lt;/p&gt;
&lt;h2 id=&quot;LeetCode253-ä¼šè®®å®¤-II&quot;&gt;&lt;a href=&quot;#LeetCode253-ä¼šè®®å®¤-II&quot; class=&quot;headerlink&quot; title=&quot;LeetCode253. ä¼šè®®å®¤ II&quot;&gt;&lt;/a&gt;&lt;a cla</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>MIT6.824 Lab è¸©å‘è®°å½•</title>
    <link href="http://jiahaohong1997.github.io/2022/04/06/MIT6.824%20Lab%20%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
    <id>http://jiahaohong1997.github.io/2022/04/06/MIT6.824%20Lab%20%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/</id>
    <published>2022-04-06T04:40:00.000Z</published>
    <updated>2022-04-08T13:57:45.349Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Lab1"><a href="#Lab1" class="headerlink" title="Lab1"></a>Lab1</h1><h2 id="go-plugin"><a href="#go-plugin" class="headerlink" title="go plugin"></a>go plugin</h2><h3 id="è¸©å‘åœºæ™¯"><a href="#è¸©å‘åœºæ™¯" class="headerlink" title="è¸©å‘åœºæ™¯"></a>è¸©å‘åœºæ™¯</h3><p>&emsp;&emsp;é¡¹ç›®çš„åˆå§‹åŒ–å°±æ˜¯å°† Map å’Œ Reduce æ–¹æ³•åˆ†åˆ«æ‰“åŒ…æˆæ’ä»¶çš„å½¢å¼ä¾› worker ç«¯è°ƒç”¨ã€‚è¿™æ ·è®¾è®¡çš„ç†ç”±æ˜¯æµ‹è¯•ç”¨ä¾‹ä¸­åŒ…å«äº†ä¸åŒçš„ Map å’Œ Reduce æ–¹æ³•ï¼Œè¦é€šè¿‡æ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹ï¼Œä½¿ç”¨æ’ä»¶çš„å½¢å¼æ›´åŠ è‡ªç”±ã€‚<br>&emsp;&emsp;ä½†æ˜¯åœ¨å¯åŠ¨é¡¹ç›®çš„ä¸€å¼€å§‹å°±æŠ¥é”™ï¼š<code>plugin was built with a different version of package runtime</code>ã€‚åœ¨ç½‘ä¸ŠæŸ¥äº†å¾ˆä¹…ï¼Œåªèƒ½çŸ¥é“æ˜¯ä½œä¸º plugin çš„æ’ä»¶æ–‡ä»¶å’Œè°ƒç”¨è¿™ä¸ªæ’ä»¶çš„æ–‡ä»¶ç¼–è¯‘ç¯å¢ƒä¸åŒå¯¼è‡´çš„ã€‚ä½†æ˜¯é—®é¢˜æ˜¯æˆ‘éƒ½æ˜¯åœ¨æœ¬åœ°ç¼–è¯‘çš„ï¼Œæ€ä¹ˆè¿˜å­˜åœ¨è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>&emsp;&emsp;æ— ä»–ï¼Œé‡æ–°è£…äº† go çš„ç¯å¢ƒã€‚ã€‚ã€‚æˆåŠŸè§£å†³è¯¥é—®é¢˜ã€‚å·¨ tm é­”å¹»ã€‚<br>&emsp;&emsp;å¦å¤–ï¼Œ<code>mr</code> åŒ…ä¸‹çš„ä»»ä½•æ”¹åŠ¨éƒ½éœ€è¦é‡æ–° <code>go build --plugin</code>ï¼Œå¦åˆ™ worker æ— æ³•ç»§ç»­ä½¿ç”¨è¿™ä¸ªæ’ä»¶ç¼–è¯‘ã€‚</p><h3 id="å»ºè®®"><a href="#å»ºè®®" class="headerlink" title="å»ºè®®"></a>å»ºè®®</h3><p>&emsp;&emsp;go plugin ç›®å‰è¿˜æ˜¯ä¸€ä¸ªä¸æˆç†Ÿçš„æ–¹æ¡ˆï¼Œå—é™å› ç´ å¤ªå¤šï¼Œå¯èƒ½ä¼šå‡ºç°å„ç§è«åå…¶å¦™çš„é—®é¢˜ï¼Œå»ºè®®ä¹‹åè‡ªå·±çš„å¼€å‘ä¸­è¿˜æ˜¯é¿å…æ˜¯ç”¨ go pluginã€‚</p><h2 id="for-select-ä¸­çš„breakã€continueã€return"><a href="#for-select-ä¸­çš„breakã€continueã€return" class="headerlink" title="for-select ä¸­çš„breakã€continueã€return"></a>for-select ä¸­çš„breakã€continueã€return</h2><h3 id="è¸©å‘åœºæ™¯-1"><a href="#è¸©å‘åœºæ™¯-1" class="headerlink" title="è¸©å‘åœºæ™¯"></a>è¸©å‘åœºæ™¯</h3><p>&emsp;&emsp;åœ¨ worker å†…éƒ¨å®ç° map task çš„æ—¶å€™ï¼Œå†™äº†ä¸€ä¸ªå¤–å±‚çš„ for å‡½æ•°ï¼Œé‡Œé¢æ˜¯ä¸€ä¸ª selectï¼Œcase 1 æ˜¯å½“å‡ºç°è¶…æ—¶ï¼ˆ10sï¼‰ï¼Œé‚£ä¹ˆå°±ç›´æ¥è¿”å› falseï¼Œå¦åˆ™å°±æ˜¯ default æ‰§è¡Œæ“ä½œï¼›å½“è¯»åˆ°æ–‡ä»¶æœ«å°¾ <code>EOF</code>æ—¶ï¼Œå®Œæˆæ“ä½œåéœ€è¦ break è·³å‡º for å¾ªç¯ã€‚æ­¤æ—¶å°±å‡ºç°äº†é—®é¢˜ï¼šbreakåªèƒ½è·³å‡ºselectï¼Œæ— æ³•è·³å‡ºforï¼Œå¯¼è‡´å‡ºç°æ­»å¾ªç¯ã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ-1"><a href="#è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>æ–¹æ¡ˆä¸€ï¼šæ ‡ç­¾<br>çœ‹å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestBreak</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">tick := time.Tick(time.Second)</span><br><span class="line"><span class="comment">//FORæ˜¯æ ‡ç­¾</span></span><br><span class="line">FOR:</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> t := &lt;-tick:</span><br><span class="line">fmt.Println(t)</span><br><span class="line"><span class="comment">//breakå‡ºFORæ ‡ç­¾æ ‡è¯†çš„ä»£ç </span></span><br><span class="line"><span class="keyword">break</span> FOR</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">&quot;end&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ¡ˆäºŒï¼šgoto</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestBreak</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">tick := time.Tick(time.Second)</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> t := &lt;-tick:</span><br><span class="line">fmt.Println(t)</span><br><span class="line"><span class="comment">//è·³åˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line"><span class="keyword">goto</span> END</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">END:</span><br><span class="line">fmt.Println(<span class="string">&quot;end&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;è¿™ä¸¤ç§æ–¹å¼éƒ½èƒ½å¤ŸæˆåŠŸè·³å‡º for å¾ªç¯ï¼Œæˆ‘é€‰æ‹©äº†æ–¹æ¡ˆäºŒã€‚</p><blockquote><p>continueï¼šå•ç‹¬åœ¨selectä¸­æ˜¯ä¸èƒ½ä½¿ç”¨continueï¼Œä¼šç¼–è¯‘é”™è¯¯ï¼Œåªèƒ½ç”¨åœ¨for-selectä¸­ã€‚  <strong>continueçš„è¯­ä¹‰å°±ç±»ä¼¼forä¸­çš„è¯­ä¹‰ï¼Œselectåçš„ä»£ç ä¸ä¼šè¢«æ‰§è¡Œåˆ°ã€‚</strong><br>returnï¼šå’Œå‡½æ•°ä¸­çš„returnä¸€æ ·ï¼Œè·³å‡ºselectï¼Œå’Œforï¼Œåç»­ä»£ç éƒ½ä¸æ‰§è¡Œ</p></blockquote><h2 id="è¯»å–æ–‡ä»¶"><a href="#è¯»å–æ–‡ä»¶" class="headerlink" title="è¯»å–æ–‡ä»¶"></a>è¯»å–æ–‡ä»¶</h2><h3 id="è¸©å‘åœºæ™¯-2"><a href="#è¸©å‘åœºæ™¯-2" class="headerlink" title="è¸©å‘åœºæ™¯"></a>è¸©å‘åœºæ™¯</h3><p>&emsp;&emsp;Map ä»»åŠ¡éœ€è¦æ‰“å¼€æ–‡ä»¶åç»Ÿè®¡å•è¯å‡ºç°é¢‘ç‡ï¼Œæ­¤æ—¶æœ‰ä¸¤ç§è¯»æ–‡ä»¶çš„æ–¹å¼ã€‚ç¬¬ä¸€ç§æ˜¯æ‰“å¼€æ–‡ä»¶åé€è¡Œè¯»å–ï¼Œç¬¬äºŒç§æ˜¯æ‰“å¼€æ–‡ä»¶åç›´æ¥å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ç¬¬ä¸€ç§æ–¹å¼æ˜¯ç”¨æ—¶é—´æ¢ç©ºé—´çš„åšæ³•ï¼Œåœ¨æ–‡ä»¶æ˜¯ä¸ªè¶…å¤§å‹æ–‡ä»¶ï¼Œä½†æ˜¯å†…å­˜ä¸å¤Ÿçš„æƒ…å†µä¸‹åªèƒ½ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå”¯ä¸€çš„é—®é¢˜å°±æ˜¯å¾ˆæ…¢ï¼ŒIO æ“ä½œç›¸å½“å¯†é›†ï¼Œå¾ˆå½±å“é€Ÿåº¦ï¼›ç¬¬äºŒç§æ–¹å¼éœ€è¦å ç”¨è¾ƒå¤§çš„å†…å­˜ï¼Œä½†æ˜¯åªéœ€è¦ä¸€æ¬¡æ€§å°†æ–‡ä»¶å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­å³å¯ï¼Œæ—¶é—´ä¸Šä¼šå¿«å¾ˆå¤šã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ-2"><a href="#è§£å†³æ–¹æ¡ˆ-2" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>&emsp;&emsp;åœ¨æœ¬ lab çš„åœºæ™¯ä¸‹ï¼Œæ¯ä¸ª job åªæœ‰ 10s çš„æ—¶é—´å¤„ç†æ–‡ä»¶ï¼Œé‚£ä¹ˆæ˜¾ç„¶åº”è¯¥é‡‡ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚æˆ‘ä¸€å¼€å§‹å°±æ˜¯é‡‡ç”¨çš„é€è¡Œè¯»å–çš„æ–¹å¼ï¼Œå‘ç°æœ‰çš„æ–‡ä»¶åœ¨å• worker è¿ç®—æ—¶ç”šè‡³å®Œå…¨æ— æ³•åœ¨ 10s å†…ç»Ÿè®¡å®Œã€‚<br>&emsp;&emsp;åŒæ—¶è¿˜é‡‡ç”¨äº†ä¸´æ—¶æ–‡ä»¶çš„æ–¹å¼ï¼Œä¸´æ—¶æ–‡ä»¶ä¼šé»˜è®¤ä¿å­˜åœ¨ç³»ç»Ÿçš„<code>/tmp</code> è·¯å¾„ä¸‹ï¼Œå¦‚æœè¦æ”¾åœ¨å½“å‰ç›®å½•ä¸‹éœ€è¦æŒ‡å®šï¼Œæ¯ä¸ªä¸´æ—¶æ–‡ä»¶çš„æœ«å°¾ä¼šå¸¦ä¸Šä¸€ä¸²éšæœºçš„æ•°å­—ï¼Œå¯ä»¥åœ¨å‘½åçš„æ—¶å€™åšä¸€äº›çº¦å®šï¼Œæ–¹ä¾¿ä¹‹åçš„å¤„ç†ã€‚<br>&emsp;&emsp;å¯¹æ–‡ä»¶çš„å‘½åå¸¦ä¸Šäº†é€’å¢çš„ jobIdï¼Œé‚£ä¹ˆå°±é¿å…äº†å†²çªé—®é¢˜ã€‚</p><h3 id="å»ºè®®-1"><a href="#å»ºè®®-1" class="headerlink" title="å»ºè®®"></a>å»ºè®®</h3><ul><li>å› ä¸ºå‘½åè§„åˆ™å¯èƒ½å­˜åœ¨ç¼ºé™·ï¼Œé‡‡ç”¨ä¸´æ—¶æ–‡ä»¶çš„å½¢å¼å¯ä»¥é¿å…ä»»åŠ¡å¤±è´¥åï¼Œä»»åŠ¡è¢«å…¶ä»–çš„ <code>worker</code> æ¥ç®¡é€ æˆçš„æ–‡ä»¶å†²çªï¼›</li><li>è¿˜å¯ä»¥é€šè¿‡çº¦å®šå‘½åè§„åˆ™ï¼Œæ¯”å¦‚å¸¦ä¸Šè‡ªå¢çš„ JobIdï¼Œé‚£ä¹ˆåœ¨ä¹‹åçš„æµç¨‹ä¸­åªä¼šå¯¹æˆåŠŸçš„ JobId çš„æ–‡ä»¶è¿›è¡Œå¤„ç†ã€‚</li></ul><h2 id="chan-int"><a href="#chan-int" class="headerlink" title="[ ]chan int"></a>[ ]chan int</h2><h3 id="è¸©å‘åœºæ™¯-3"><a href="#è¸©å‘åœºæ™¯-3" class="headerlink" title="è¸©å‘åœºæ™¯"></a>è¸©å‘åœºæ™¯</h3><p>&emsp;&emsp;åœ¨ <code>Coordinator</code> ç»“æ„ä½“ä¸­å£°æ˜äº†ä¸€ä¸ªåˆ‡ç‰‡ï¼š<code>workerDone   []chan int</code>ï¼Œç”¨äºæ¥æ”¶å¯¹åº” <code>worker</code> åœ¨è§„å®šæ—¶é—´å†…å®Œæˆä»»åŠ¡çš„ä¿¡å·ã€‚ä¸€å¼€å§‹åªæ˜¯å»ºä¸€ä¸ªå›ºå®šé•¿åº¦çš„åˆ‡ç‰‡ï¼š<code>workerDone := make([]chan int, 20)</code>ï¼Œåœ¨ä¸€ä¸ªæ–°çš„ <code>worker</code> å»ºç«‹è¿æ¥è·å¾—å·¥å·åå¦‚æœè¶…å‡ºé•¿åº¦ï¼Œé‚£ä¹ˆå°±å†æ‰©å®¹ 20 ä¸ªä½ç½®ã€‚å¯æ˜¯å¿½ç•¥äº†äº†ä¸€ä¸ªäº‹å®ï¼Œè¿™æ ·å»ºç«‹çš„åˆ‡ç‰‡ï¼Œæ¯ä¸ªå…ƒç´ å…¶å®æ˜¯ <code>nil</code>ï¼Œæ‰€ä»¥ä¸€ç›´ä¸èƒ½æ­£ç¡®çš„ä¼ é€’ä¿¡å·ã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ-3"><a href="#è§£å†³æ–¹æ¡ˆ-3" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>è¦é€šè¿‡ä¸‹é¢çš„æ–¹å¼ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c.workerDone[workerNum] = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;è¿™æ ·æ‰èƒ½æ­£ç¡®çš„å®Œæˆå¯¹åº”å·¥å·çš„åˆå§‹åŒ–ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Lab1&quot;&gt;&lt;a href=&quot;#Lab1&quot; class=&quot;headerlink&quot; title=&quot;Lab1&quot;&gt;&lt;/a&gt;Lab1&lt;/h1&gt;&lt;h2 id=&quot;go-plugin&quot;&gt;&lt;a href=&quot;#go-plugin&quot; class=&quot;headerlink&quot; title=</summary>
      
    
    
    
    <category term="åˆ†å¸ƒå¼ç³»ç»Ÿ" scheme="http://jiahaohong1997.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="è¸©å‘" scheme="http://jiahaohong1997.github.io/tags/%E8%B8%A9%E5%9D%91/"/>
    
  </entry>
  
  <entry>
    <title>MIT6.824 Lab1</title>
    <link href="http://jiahaohong1997.github.io/2022/04/06/MIT6.824%20Lab1/"/>
    <id>http://jiahaohong1997.github.io/2022/04/06/MIT6.824%20Lab1/</id>
    <published>2022-04-06T04:36:00.000Z</published>
    <updated>2022-04-11T00:11:15.793Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»»åŠ¡æ¢³ç†"><a href="#ä»»åŠ¡æ¢³ç†" class="headerlink" title="ä»»åŠ¡æ¢³ç†"></a>ä»»åŠ¡æ¢³ç†</h1><h2 id="mapreduce-ä»‹ç»åŠéƒ¨ç½²"><a href="#mapreduce-ä»‹ç»åŠéƒ¨ç½²" class="headerlink" title="mapreduce ä»‹ç»åŠéƒ¨ç½²"></a>mapreduce ä»‹ç»åŠéƒ¨ç½²</h2><p><img lazyload src="/images/loading.svg" data-src="mapreduce.jpg" alt="avatar"></p><h3 id="lab1-ç®€ä»‹"><a href="#lab1-ç®€ä»‹" class="headerlink" title="lab1 ç®€ä»‹"></a>lab1 ç®€ä»‹</h3><p>&emsp;&emsp;å®ç°ä¸€ä¸ª <code>mapreduce</code> çš„ demoï¼Œä¹Ÿå°±æ˜¯åœ¨å•æœºä¸Šéƒ¨ç½²çš„åˆ†å¸ƒå¼è¯é¢‘ç»Ÿè®¡ç³»ç»Ÿã€‚è‡³äºå’Œå®é™…ç”Ÿäº§åœºæ™¯ä¸Šæœ€å¤§çš„åŒºåˆ«å°±åœ¨äºæ–‡ä»¶ç³»ç»Ÿã€‚åœ¨å•æœºä¸Šéƒ¨ç½²å…±ç”¨ä¸€å¥—æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œå®é™…ç”Ÿäº§ç«¯è¦å¤æ‚å¾ˆå¤šã€‚</p><h3 id="å®é™…éƒ¨ç½²"><a href="#å®é™…éƒ¨ç½²" class="headerlink" title="å®é™…éƒ¨ç½²"></a>å®é™…éƒ¨ç½²</h3><p>&emsp;&emsp;å®Œæ•´çš„éƒ¨ç½²æµç¨‹ä»¥åŠå®éªŒç»†èŠ‚è¯¦è§ <a class="link" href="https://pdos.csail.mit.edu/6.824/labs/lab-mr.html">6.824 Lab 1: MapReduce<i class="fas fa-external-link-alt"></i></a></p><ol><li><p>ä¸²è¡ŒåŒ–çš„éƒ¨ç½²æµç¨‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git://g.csail.mit.edu/6.824-golabs-2022 6.824</span><br><span class="line">$ <span class="built_in">cd</span> 6.824</span><br><span class="line">$ ls</span><br><span class="line">Makefile src</span><br><span class="line">$</span><br><span class="line">$ <span class="built_in">cd</span> ~/6.824</span><br><span class="line">$ <span class="built_in">cd</span> src/main</span><br><span class="line">$ go build -race -buildmode=plugin ../mrapps/wc.go</span><br><span class="line">$ rm mr-out*</span><br><span class="line">$ go run -race mrsequential.go wc.so pg*.txt</span><br><span class="line">$ more mr-out-0</span><br><span class="line">A 509</span><br><span class="line">ABOUT 2</span><br><span class="line">ACT 8</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>mapreduce éƒ¨ç½²æµç¨‹<br>(1). ä½¿ç”¨ go plugin å°† <code>map</code> å’Œ <code>reduce</code> å‡½æ•°æ’ä»¶åŒ–<br>æ¶å¿ƒçš„ go pluginï¼Œæ˜¯ä¸ªä¸æˆç†Ÿçš„æ–¹æ¡ˆï¼Œå·®ç‚¹è®©æˆ‘å€’åœ¨äº†ç¬¬ä¸€æ­¥ï¼Œå…·ä½“çš„è¸©å‘æƒ…å†µè§<a href="https://jiahaohong1997.github.io/2022/04/06/MIT6.824%20Lab%20%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">MIT6.824 Lab è¸©å‘è®°å½•</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go build -race -buildmode=plugin ../mrapps/wc.go</span><br></pre></td></tr></table></figure></li></ol><p>(2). å¯åŠ¨ <code>coordinator</code> è¿›ç¨‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ rm mr-out*</span><br><span class="line">$ go run -race mrcoordinator.go pg-*.txt</span><br></pre></td></tr></table></figure><p>(3). å¼€å¯å¤šä¸ªç»ˆç«¯çª—å£ï¼Œå¯åŠ¨å¤šä¸ª <code>worker</code> è¿›ç¨‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go run -race mrworker.go wc.so</span><br></pre></td></tr></table></figure><ol start="3"><li>æœ€ç»ˆæµ‹è¯•ç»“æœå±•ç¤º<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ bash test-mr.sh       </span><br><span class="line">*** Starting wc <span class="built_in">test</span>.</span><br><span class="line">--- wc <span class="built_in">test</span>: PASS</span><br><span class="line">*** Starting indexer <span class="built_in">test</span>.</span><br><span class="line">--- indexer <span class="built_in">test</span>: PASS</span><br><span class="line">*** Starting map parallelism <span class="built_in">test</span>.</span><br><span class="line">--- map parallelism <span class="built_in">test</span>: PASS</span><br><span class="line">*** Starting reduce parallelism <span class="built_in">test</span>.</span><br><span class="line">--- reduce parallelism <span class="built_in">test</span>: PASS</span><br><span class="line">*** Starting job count <span class="built_in">test</span>.</span><br><span class="line">--- job count <span class="built_in">test</span>: PASS</span><br><span class="line">*** Starting early <span class="built_in">exit</span> <span class="built_in">test</span>.</span><br><span class="line">--- early <span class="built_in">exit</span> <span class="built_in">test</span>: PASS</span><br><span class="line">*** Starting crash <span class="built_in">test</span>.</span><br><span class="line">--- crash <span class="built_in">test</span>: PASS</span><br><span class="line">*** PASSED ALL TESTS</span><br></pre></td></tr></table></figure></li></ol><h2 id="ç³»ç»Ÿè®¾è®¡"><a href="#ç³»ç»Ÿè®¾è®¡" class="headerlink" title="ç³»ç»Ÿè®¾è®¡"></a>ç³»ç»Ÿè®¾è®¡</h2><p>&emsp;&emsp;æ•´ä¸ªç³»ç»Ÿä¸­ <code>worker</code> å’Œ <code>coordinator</code> çš„äº¤äº’çŠ¶æ€åŒ…å«ä¸‹å›¾æ‰€ç¤ºçš„ä¸€ç³»åˆ—æƒ…å†µï¼š<br><img lazyload src="/images/loading.svg" data-src="keyStatus.png" alt="avatar"></p><h3 id="RPC-é€šä¿¡"><a href="#RPC-é€šä¿¡" class="headerlink" title="RPC é€šä¿¡"></a>RPC é€šä¿¡</h3><ol><li>å»ºç«‹è¿æ¥ï¼Œç»™æ¯ä¸ª <code>worker</code> åˆ†é…ä¸“å±å·¥å·<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Ask for WorkerNum and Contruct Connection  </span></span><br><span class="line"><span class="keyword">type</span> HelloArgs <span class="keyword">struct</span> &#123;  </span><br><span class="line">   X <span class="keyword">string</span>  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">type</span> HelloReply <span class="keyword">struct</span> &#123;  </span><br><span class="line">   Y <span class="keyword">int</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>&emsp;&emsp;<code>HelloArgs</code> çš„ <code>X</code> å…ƒç´ æ˜¯åŒæ–¹çº¦å®šå¥½çš„å­—ç¬¦ä¸²ï¼Œ<code>coordinator</code> åªæœ‰åœ¨æ”¶åˆ°çº¦å®šçš„ä¿¡æ¯åæ‰èƒ½å»ºç«‹è¿æ¥ï¼Œåˆ†é…å·¥å·ã€‚</p><ol start="2"><li>map ä»»åŠ¡çš„è¯·æ±‚ä¸å®Œæˆ<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Map tasks Arguments and Reply  </span></span><br><span class="line"><span class="keyword">type</span> MapArgs <span class="keyword">struct</span> &#123;  </span><br><span class="line">WorkerNum <span class="keyword">int</span>  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">type</span> MapReply <span class="keyword">struct</span> &#123;  </span><br><span class="line">NReducer <span class="keyword">int</span>  </span><br><span class="line">Finished <span class="keyword">bool</span>  </span><br><span class="line">FileName <span class="keyword">string</span>  </span><br><span class="line">JobId <span class="keyword">int</span>  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Finish Map Task  </span></span><br><span class="line"><span class="keyword">type</span> FinishMapArgs <span class="keyword">struct</span> &#123;  </span><br><span class="line">X <span class="keyword">bool</span>  </span><br><span class="line">WorkerNum <span class="keyword">int</span>  </span><br><span class="line">FileName []<span class="keyword">string</span>  </span><br><span class="line">JobId <span class="keyword">int</span>  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">type</span> FinishMapReply <span class="keyword">struct</span> &#123;  </span><br><span class="line">Y <span class="keyword">int</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ul><li><p>è¯·æ±‚ <code>map</code> ä»»åŠ¡<br><code>worker</code> è¯·æ±‚ <code>map</code> ä»»åŠ¡æ—¶å¸¦ä¸Šè‡ªå·±çš„å·¥å·ï¼Œå¦‚æœè¢«æˆåŠŸåˆ†é…äº† <code>map</code> ä»»åŠ¡ï¼Œé‚£ä¹ˆå°†ä¼šå¾—åˆ° <code>reducer</code> çš„æ•°é‡ã€æ˜¯å¦å®Œæˆå…¨éƒ¨ <code>map</code> ä»»åŠ¡çš„ä¿¡å·ã€è¦æ‰§è¡Œçš„æ–‡ä»¶åç§°ã€è¢«åˆ†é…çš„äº‹åŠ¡ <code>Id</code>ï¼ˆç”¨äºå‘½åä¸­é—´ä¸´æ—¶æ–‡ä»¶ï¼Œé¿å… <code>crash</code>ï¼‰ã€‚</p></li><li><p>å‘é€ç»“æŸ <code>map</code> ä»»åŠ¡çš„ä¿¡å·<br><code>worker</code> åœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­æ‰§è¡Œå®Œï¼ˆæˆ–æœªèƒ½æˆåŠŸæ‰§è¡Œï¼‰ï¼Œå°†ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶åï¼ˆåœ°å€ï¼‰è½¬å‘Š <code>coordinator</code> ã€‚</p></li></ul><ol start="3"><li>reduce ä»»åŠ¡çš„è¯·æ±‚ä¸å®Œæˆ<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Reduce Task  </span></span><br><span class="line"><span class="keyword">type</span> ReduceTaskArgs <span class="keyword">struct</span> &#123;  </span><br><span class="line">WorkerNum <span class="keyword">int</span>  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">type</span> ReduceTaskReply <span class="keyword">struct</span> &#123;  </span><br><span class="line">Finished <span class="keyword">bool</span>  </span><br><span class="line">ReducerFile []<span class="keyword">string</span>  </span><br><span class="line">JobId <span class="keyword">int</span>  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Finish Reduce Task  </span></span><br><span class="line"><span class="keyword">type</span> FinishReduceArgs <span class="keyword">struct</span> &#123;  </span><br><span class="line">X <span class="keyword">bool</span>  </span><br><span class="line">WorkerNum <span class="keyword">int</span>  </span><br><span class="line">File <span class="keyword">string</span>  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">type</span> FinishReduceReply <span class="keyword">struct</span> &#123;  </span><br><span class="line">Y <span class="keyword">int</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>&emsp;&emsp;å¤§ä½“æ€è·¯å’Œ <code>map</code> ä»»åŠ¡çš„è¯·æ±‚å’Œç»“æŸä¸€ç›´ï¼Œä¸è¿‡å¤šèµ˜è¿°ã€‚</p><ol start="4"><li>map å’Œ reduce ä»»åŠ¡éƒ½å®Œæˆï¼Œè¯·æ±‚å…³æœº<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Ask for shutdown  </span></span><br><span class="line"><span class="keyword">type</span> ExitArgs <span class="keyword">struct</span> &#123;  </span><br><span class="line">   X <span class="keyword">bool</span>  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">type</span> ExitReply <span class="keyword">struct</span> &#123;  </span><br><span class="line">   Y <span class="keyword">bool</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="coordinator-è¿›ç¨‹"><a href="#coordinator-è¿›ç¨‹" class="headerlink" title="coordinator è¿›ç¨‹"></a>coordinator è¿›ç¨‹</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Coordinator <span class="keyword">struct</span> &#123;  </span><br><span class="line">   <span class="comment">// Your definitions here.  </span></span><br><span class="line"> fileName       []<span class="keyword">string</span>  <span class="comment">// åˆå§‹æ–‡ä»¶ååˆ—è¡¨ï¼Œå¾…åˆ†é…é˜Ÿåˆ—</span></span><br><span class="line"> unfinishedFile []<span class="keyword">string</span>  <span class="comment">// mapä»»åŠ¡è¿›è¡Œä¸­çš„æ–‡ä»¶ååˆ—è¡¨ï¼Œå¾…å®Œæˆé˜Ÿåˆ—</span></span><br><span class="line"> nReducer       <span class="keyword">int</span>  </span><br><span class="line"> lock           sync.Mutex  </span><br><span class="line"> jobNum         <span class="keyword">int</span>    <span class="comment">// äº‹åŠ¡ idï¼Œé€’å¢ä¸é‡å¤</span></span><br><span class="line">  </span><br><span class="line"> workerNum    <span class="keyword">int</span>    <span class="comment">// worker ç¼–å·ï¼Œé€’å¢ä¸é‡å¤</span></span><br><span class="line"> workerDone   []<span class="keyword">chan</span> <span class="keyword">int</span>  <span class="comment">// å¯¹åº” worker çš„ä»»åŠ¡æ‰§è¡Œæƒ…å†µ</span></span><br><span class="line"> rejectResult []<span class="keyword">bool</span>    <span class="comment">// worker æˆåŠŸå®Œæˆä»»åŠ¡ï¼Œä½†å› ä¸ºé€šä¿¡åˆ°è¾¾åè¶…æ—¶ï¼Œæ‹’ç»è¯¥ä»»åŠ¡</span></span><br><span class="line">  </span><br><span class="line"> mapFinished          <span class="keyword">bool</span>  <span class="comment">// map å®Œæˆæ‰èƒ½å¼€å¯ reduce</span></span><br><span class="line"> reduceFiles          [][]<span class="keyword">string</span>  <span class="comment">// [nReducer][]stringï¼Œå¾…åˆ†é…é˜Ÿåˆ—</span></span><br><span class="line"> unFinishedReduceFile [][]<span class="keyword">string</span>  <span class="comment">// reduce æ­£åœ¨è¿›è¡Œä¸­çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå¾…å®Œæˆé˜Ÿåˆ—</span></span><br><span class="line"> finalFiles           []<span class="keyword">string</span>    <span class="comment">// [nReducer]stringï¼Œæœ€ç»ˆæ–‡ä»¶</span></span><br><span class="line">  </span><br><span class="line"> exitValue atomic.Value    <span class="comment">// åŸå­é‡ï¼Œä¿è¯ coordinator æ­£å¸¸å…³æœº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»è¦è´Ÿè´£çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æ¥æ”¶ <code>worker</code> çš„å»ºç«‹è¿æ¥è¯·æ±‚å¹¶å‘æ”¾å·¥å·ï¼›</li><li>åˆ†é… <code>map</code> ä»»åŠ¡ï¼š</li></ol><ul><li>å»ºç«‹å¾…åˆ†é…ã€å¾…å®Œæˆæ–‡ä»¶é˜Ÿåˆ—</li><li>ç»™æˆåŠŸâ€œæ¥å•â€ï¼ˆæˆåŠŸä»å¾…åˆ†é…é˜Ÿåˆ—ä¸­è·å–æ–‡ä»¶ï¼‰çš„ <code>worker</code> åˆ†é…å”¯ä¸€çš„ <code>jobId</code>ï¼Œå¹¶åé¦ˆæ˜¯å¦å·²å®Œæˆæ‰€æœ‰çš„ <code>map</code> ä»»åŠ¡</li><li>å¼€å¯è®¡æ—¶ goroutineï¼Œä¸€æ—¦å¯¹åº”çš„ <code>map</code> ä»»åŠ¡è¶…æ—¶ï¼Œåˆ™å°†å¯¹åº”æ–‡ä»¶åä»å¾…å®Œæˆé˜Ÿåˆ—æ”¾å…¥å¾…åˆ†é…é˜Ÿåˆ—</li></ul><ol start="3"><li>åˆ†é… <code>reduce</code> ä»»åŠ¡ï¼š</li></ol><ul><li>åœ¨å®Œæˆæ‰€æœ‰ <code>map</code> ä»»åŠ¡çš„å‰æä¸‹æ‰ä¼šåˆ†é… <code>reduce</code> ä»»åŠ¡</li><li>å…¶ä½™æµç¨‹ä¸ <code>map</code> ä»»åŠ¡ç±»ä¼¼</li></ul><ol start="4"><li>shutdownï¼šå®Œæˆæ‰€æœ‰ <code>reduce</code> ä»»åŠ¡åï¼Œ<code>worker</code> ä¼šæ”¶åˆ°ç»“æŸä¿¡å·ï¼Œç„¶åé€šè¿‡ RPC è¯·æ±‚å…³é—­ï¼Œå½“æ‰€æœ‰ <code>worker</code> éƒ½é€€å‡ºåï¼Œ<code>coordinator</code> æ‰ä¼šå…³é—­ã€‚</li></ol><h3 id="worker-è¿›ç¨‹"><a href="#worker-è¿›ç¨‹" class="headerlink" title="worker è¿›ç¨‹"></a>worker è¿›ç¨‹</h3><ol><li>å»ºç«‹ä¸ <code>coordinator</code> çš„è¿æ¥ï¼Œè·å–å·¥å·ï¼›</li><li>è¯·æ±‚ <code>map</code> ä»»åŠ¡ï¼Œè·å¾—ä»»åŠ¡åå¼€å§‹æ‰§è¡Œï¼Œå“åº”å®Œæˆæƒ…å†µåç»§ç»­è¯·æ±‚ <code>map</code> ä»»åŠ¡ç›´åˆ°å†æ¬¡è·å–æˆ–è€…æ‰€æœ‰ <code>map</code> ä»»åŠ¡éƒ½ç»“æŸï¼›</li><li>æ‰€æœ‰ <code>map</code> ä»»åŠ¡éƒ½ç»“æŸåï¼Œè¯·æ±‚ <code>reduce</code> ä»»åŠ¡ï¼Œè·å¾—ä»»åŠ¡åå¼€å§‹æ‰§è¡Œï¼Œå“åº”å®Œæˆæƒ…å†µåç»§ç»­è¯·æ±‚ <code>reduce</code> ä»»åŠ¡ç›´åˆ°å†æ¬¡è·å– <code>reduce</code> ä»»åŠ¡æˆ–è€…æ‰€æœ‰ <code>reduce</code> ä»»åŠ¡ç»“æŸï¼›</li><li>è¯·æ±‚ç»“æŸè¿æ¥ï¼Œå…³æœºã€‚</li></ol><h2 id="ä¸€äº›ç»†èŠ‚"><a href="#ä¸€äº›ç»†èŠ‚" class="headerlink" title="ä¸€äº›ç»†èŠ‚"></a>ä¸€äº›ç»†èŠ‚</h2><ol><li><p>ç”Ÿæˆçš„ <code>nReducer</code> ä¸ªä¸­é—´ä¸´æ—¶æ–‡ä»¶å¯ä»¥ç¼–ç æˆ <code>json</code> çš„æ ¼å¼ï¼Œæ–¹ä¾¿å¤„ç†ï¼Œå¯ä»¥åœ¨æ‰“å¼€çš„æ–‡ä»¶ä¸­å†™å…¥ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">enc := json.NewEncoder(file)</span><br><span class="line"><span class="keyword">for</span> _, kv := ... &#123;</span><br><span class="line">    err := enc.Encode(&amp;kv)</span><br></pre></td></tr></table></figure><p>åœ¨æ‰“å¼€çš„æ–‡ä»¶ä¸­è¯»å–ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dec := json.NewDecoder(file)</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="keyword">var</span> kv KeyValue</span><br><span class="line"><span class="keyword">if</span> err := dec.Decode(&amp;kv); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">kva = <span class="built_in">append</span>(kva, kv)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>worker</code>æ¯æ¬¡åœ¨ç»“æŸä»»åŠ¡åéƒ½è¦é‡å¤è¯·æ±‚ä»»åŠ¡ï¼ˆå¿ƒè·³ï¼‰ï¼Œç›´åˆ°è·å¾—ä»»åŠ¡å…¨éƒ¨ç»“æŸçš„ä¿¡å·ã€‚</p></li><li><p>é€šè¿‡ç»´æŠ¤<code>å¾…åˆ†é…</code> å’Œ <code>å¾…å®Œæˆ</code> ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå¯ä»¥æ§åˆ¶ä»»åŠ¡çš„å‘æ”¾ä¸ <code>map</code>ã€<code>reduce</code> ä¸¤ä¸ªå¤§ä»»åŠ¡çš„å®Œæˆæƒ…å†µã€‚</p></li><li><p>å¯ä»¥é€šè¿‡ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ä¿å­˜ä¸´æ—¶ç»“æœçš„æ–¹å¼é¿å…å› ä¸ºè¶…æ—¶å¯¼è‡´çš„ <code>crash</code>ã€‚</p></li><li><p>ä¿å­˜çš„æ–‡ä»¶å¯ä»¥å¸¦ä¸Šå”¯ä¸€çš„ <code>jobId</code> é˜²æ­¢ <code>crash</code>ã€‚</p></li><li><p><code>coordinator</code> å¯¹ä»»åŠ¡çš„è¶…æ—¶æ§åˆ¶ï¼šé‡‡ç”¨äº†ä¸€ä¸ª select çš„ç»“æ„ï¼Œç¬¬ä¸€ä¸ªåˆ†æ”¯æ˜¯è¶…æ—¶ä¸Šä¸‹æ–‡  <code>ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)</code> æ¥æ§åˆ¶ï¼Œå¦‚æœè¶…æ—¶ï¼Œé™¤äº†å¤„ç†å¯¹åº”çš„ä¸¤ä¸ªé˜Ÿåˆ—å¤–ï¼Œè¿˜éœ€è¦å°†å¯¹åº”å·¥å·çš„ <code>rejectResult</code> ç½®ä¸º <code>true</code>ï¼Œé˜²æ­¢ <code>worker</code> åœ¨è§„å®šæ—¶é—´å†…å®Œæˆäº†ä»»åŠ¡ï¼Œä½†æ˜¯å› ä¸º PRC é€šä¿¡çš„å»¶è¿Ÿå¯¼è‡´è¶…æ—¶å‡ºç°çš„   <code>coordinator</code> å’Œ <code>worker</code> å¯¹ä¸´æ—¶æ–‡ä»¶å¤„ç†ä¸ä¸€è‡´çš„æƒ…å†µï¼›ç¬¬äºŒä¸ªåˆ†æ”¯æ˜¯å¯¹åº”å·¥å·çš„ <code>workerDone</code>ï¼Œ <code>coordinator</code> åœ¨è§„å®šæ—¶é—´å†…æ¥æ”¶åˆ°æ­£ç¡®çš„å®Œæˆä¿¡å·åï¼Œå°±ä¼šå‘è¯¥æ— ç¼“å†²é€šé“å†…å‘é€æ•°æ®ï¼Œä»è€Œé€‰æ‹©è¿™ä¸€åˆ†æ”¯ï¼Œè¡¨ç¤ºä»»åŠ¡é¡ºåˆ©å®Œæˆã€‚</p></li><li><p>å¯¹é”å’ŒåŸå­æ•°æ®çš„ä½¿ç”¨ä¸Šè¦æ³¨æ„ï¼Œé¿å… <code>data race</code>ï¼ˆç¼–è¯‘æ—¶é€šè¿‡ <code>-race</code> è¿›è¡Œç«æ€æ£€æµ‹ï¼‰ã€‚</p></li></ol><h1 id="é¡¹ç›®ä»‹ç»"><a href="#é¡¹ç›®ä»‹ç»" class="headerlink" title="é¡¹ç›®ä»‹ç»"></a>é¡¹ç›®ä»‹ç»</h1><h2 id="é¡¹ç›®åœ°å€"><a href="#é¡¹ç›®åœ°å€" class="headerlink" title="é¡¹ç›®åœ°å€"></a>é¡¹ç›®åœ°å€</h2><p><a class="link" href="https://github.com/JiahaoHong1997/MIT6.824">GitHub-MIT6.824<i class="fas fa-external-link-alt"></i></a></p><h2 id="å…³é”®é¡¹ç›®æ–‡ä»¶ç»“æ„"><a href="#å…³é”®é¡¹ç›®æ–‡ä»¶ç»“æ„" class="headerlink" title="å…³é”®é¡¹ç›®æ–‡ä»¶ç»“æ„"></a>å…³é”®é¡¹ç›®æ–‡ä»¶ç»“æ„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">|- doc</span><br><span class="line">|- src</span><br><span class="line">|- main</span><br><span class="line">|- mrsequential.go</span><br><span class="line">|- mrworker.go</span><br><span class="line">|- mrcoordinator.go</span><br><span class="line">|- test-mr.sh</span><br><span class="line">|- mr</span><br><span class="line">|- coordinator.go&#x2F;&#x2F; coordinator æ§åˆ¶é€»è¾‘</span><br><span class="line">|- rpc.go&#x2F;&#x2F; rpc é€šä¿¡ç»“æ„</span><br><span class="line">|- worker.go&#x2F;&#x2F; worker æ§åˆ¶é€»è¾‘</span><br><span class="line">|- mrapps</span><br><span class="line">|- wc.go</span><br><span class="line">|- indexer.go</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä»»åŠ¡æ¢³ç†&quot;&gt;&lt;a href=&quot;#ä»»åŠ¡æ¢³ç†&quot; class=&quot;headerlink&quot; title=&quot;ä»»åŠ¡æ¢³ç†&quot;&gt;&lt;/a&gt;ä»»åŠ¡æ¢³ç†&lt;/h1&gt;&lt;h2 id=&quot;mapreduce-ä»‹ç»åŠéƒ¨ç½²&quot;&gt;&lt;a href=&quot;#mapreduce-ä»‹ç»åŠéƒ¨ç½²&quot; class=&quot;header</summary>
      
    
    
    
    <category term="åˆ†å¸ƒå¼ç³»ç»Ÿ" scheme="http://jiahaohong1997.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="mit6.824" scheme="http://jiahaohong1997.github.io/tags/mit6-824/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 6ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/04/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%206%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/04/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%206%EF%BC%89/</id>
    <published>2022-04-04T00:00:00.000Z</published>
    <updated>2022-04-08T00:09:16.517Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ˜¯å¯¹ç¬¬ 287 åœºå‘¨èµ›çš„å¤ç›˜æ€»ç»“</p><h2 id="6055-è½¬åŒ–æ—¶é—´éœ€è¦çš„æœ€å°‘æ“ä½œæ•°"><a href="#6055-è½¬åŒ–æ—¶é—´éœ€è¦çš„æœ€å°‘æ“ä½œæ•°" class="headerlink" title="6055. è½¬åŒ–æ—¶é—´éœ€è¦çš„æœ€å°‘æ“ä½œæ•°"></a><a class="link" href="https://leetcode-cn.com/problems/minimum-number-of-operations-to-convert-time/">6055. è½¬åŒ–æ—¶é—´éœ€è¦çš„æœ€å°‘æ“ä½œæ•°<i class="fas fa-external-link-alt"></i></a></h2><p>#æ¨¡æ‹Ÿé¢˜</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² current å’Œ correct ï¼Œè¡¨ç¤ºä¸¤ä¸ª 24 å°æ—¶åˆ¶æ—¶é—´ ã€‚<br>24 å°æ—¶åˆ¶æ—¶é—´ æŒ‰ â€œHH:MMâ€ è¿›è¡Œæ ¼å¼åŒ–ï¼Œå…¶ä¸­ HH åœ¨ 00 å’Œ 23 ä¹‹é—´ï¼Œè€Œ MM åœ¨ 00 å’Œ 59 ä¹‹é—´ã€‚æœ€æ—©çš„ 24 å°æ—¶åˆ¶æ—¶é—´ä¸º 00:00 ï¼Œæœ€æ™šçš„æ˜¯ 23:59 ã€‚<br>åœ¨ä¸€æ­¥æ“ä½œä¸­ï¼Œä½ å¯ä»¥å°† current è¿™ä¸ªæ—¶é—´å¢åŠ  1ã€5ã€15 æˆ– 60 åˆ†é’Ÿã€‚ä½ å¯ä»¥æ‰§è¡Œè¿™ä¸€æ“ä½œ ä»»æ„ æ¬¡æ•°ã€‚<br>è¿”å›å°†Â current è½¬åŒ–ä¸º correct éœ€è¦çš„ æœ€å°‘æ“ä½œæ•° ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šcurrent &#x3D; &quot;02:30&quot;, correct &#x3D; &quot;04:35&quot;</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">å¯ä»¥æŒ‰ä¸‹è¿° 3 æ­¥æ“ä½œå°† current è½¬æ¢ä¸º correct ï¼š</span><br><span class="line">- ä¸º current åŠ  60 åˆ†é’Ÿï¼Œcurrent å˜ä¸º &quot;03:30&quot; ã€‚</span><br><span class="line">- ä¸º current åŠ  60 åˆ†é’Ÿï¼Œcurrent å˜ä¸º &quot;04:30&quot; ã€‚ </span><br><span class="line">- ä¸º current åŠ  5 åˆ†é’Ÿï¼Œcurrent å˜ä¸º &quot;04:35&quot; ã€‚</span><br><span class="line">å¯ä»¥è¯æ˜ï¼Œæ— æ³•ç”¨å°‘äº 3 æ­¥æ“ä½œå°† current è½¬åŒ–ä¸º correct ã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šcurrent &#x3D; &quot;11:00&quot;, correct &#x3D; &quot;11:01&quot;</span><br><span class="line">è¾“å‡ºï¼š1</span><br><span class="line">è§£é‡Šï¼šåªéœ€è¦ä¸º current åŠ ä¸€åˆ†é’Ÿï¼Œæ‰€ä»¥æœ€å°æ“ä½œæ•°æ˜¯ 1 ã€‚</span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">current å’Œ correct éƒ½ç¬¦åˆ &quot;HH:MM&quot; æ ¼å¼</span><br><span class="line">current &lt;&#x3D; correct</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). æœ¬é¢˜å…¶å®æ˜¯å˜ç§çš„é›¶é’±é—®é¢˜ã€‚åˆå§‹çŠ¶æ€æ˜¯ <code>current</code>ï¼Œæœ€ç»ˆçŠ¶æ€æ˜¯ <code>correct</code>ï¼Œå¯ç”¨â€œé›¶é’±â€é¢é¢æœ‰ <code>[1,5,15,60]</code>ï¼›<br>(2). ç°å°†åˆå§‹ã€æœ€ç»ˆä¸¤ç§çŠ¶æ€è½¬æ¢æˆå’Œâ€œé›¶é’±â€é¢é¢ä¸€æ ·çš„è®¡æ•°å•ä½â€”â€”â€œåˆ†é’Ÿâ€ï¼›<br>(3). ä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼Œä»åˆå§‹çŠ¶æ€ä¸€æ­¥æ­¥å‘æœ€ç»ˆçŠ¶æ€é€¼è¿‘ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N).</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">convertTime</span><span class="params">(current <span class="keyword">string</span>, correct <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">s1 := strings.Split(current, <span class="string">&quot;:&quot;</span>)</span><br><span class="line">h1, m1 := s1[<span class="number">0</span>], s1[<span class="number">1</span>]</span><br><span class="line">s2 := strings.Split(correct, <span class="string">&quot;:&quot;</span>)</span><br><span class="line">h2, m2 := s2[<span class="number">0</span>], s2[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨åˆ†é’Ÿä»£è¡¨åˆå§‹çŠ¶æ€</span></span><br><span class="line">nowh, _ := strconv.Atoi(h1)</span><br><span class="line">nowm, _ := strconv.Atoi(m1)</span><br><span class="line">now := nowh*<span class="number">60</span>+nowm</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨åˆ†é’Ÿä»£è¡¨æœ€ç»ˆçŠ¶æ€</span></span><br><span class="line">th, _ := strconv.Atoi(h2)</span><br><span class="line">tm, _ := strconv.Atoi(m2)</span><br><span class="line">t := th*<span class="number">60</span>+tm</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†çŠ¶æ€å½’ä¸€åŒ–åˆ° (0,diff) åŒºé—´</span></span><br><span class="line">diff := abs(now, t)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ç”¨é›¶é’±é¢é¢</span></span><br><span class="line">choose := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">5</span>,<span class="number">15</span>,<span class="number">60</span>&#125;</span><br><span class="line"></span><br><span class="line">dp := <span class="built_in">make</span>([]<span class="keyword">int</span>, diff+<span class="number">1</span>)</span><br><span class="line">dp[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;=diff; i++ &#123;</span><br><span class="line">dp[i] = math.MaxInt32</span><br><span class="line"><span class="keyword">for</span> j:=<span class="built_in">len</span>(choose)<span class="number">-1</span>; j&gt;=<span class="number">0</span>; j-- &#123;</span><br><span class="line"><span class="keyword">if</span> choose[j] &gt; i &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line">dp[i] = min(dp[i], dp[i-choose[j]]+<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> dp[diff]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">abs</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &gt; b &#123;</span><br><span class="line"><span class="keyword">return</span> a-b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> b-a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &lt; b &#123;</span><br><span class="line"><span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5235-æ‰¾å‡ºè¾“æ‰é›¶åœºæˆ–ä¸€åœºæ¯”èµ›çš„ç©å®¶"><a href="#5235-æ‰¾å‡ºè¾“æ‰é›¶åœºæˆ–ä¸€åœºæ¯”èµ›çš„ç©å®¶" class="headerlink" title="5235. æ‰¾å‡ºè¾“æ‰é›¶åœºæˆ–ä¸€åœºæ¯”èµ›çš„ç©å®¶"></a><a class="link" href="https://leetcode-cn.com/problems/find-players-with-zero-or-one-losses/">5235. æ‰¾å‡ºè¾“æ‰é›¶åœºæˆ–ä¸€åœºæ¯”èµ›çš„ç©å®¶<i class="fas fa-external-link-alt"></i></a></h2><p>#map</p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ matches å…¶ä¸­ matches[i] = [winneri, loseri] è¡¨ç¤ºåœ¨ä¸€åœºæ¯”èµ›ä¸­ winneri å‡»è´¥äº† loseri ã€‚<br>è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º 2 çš„åˆ—è¡¨ answer ï¼š<br>answer[0] æ˜¯æ‰€æœ‰ æ²¡æœ‰ è¾“æ‰ä»»ä½•æ¯”èµ›çš„ç©å®¶åˆ—è¡¨ã€‚<br>answer[1] æ˜¯æ‰€æœ‰æ°å¥½è¾“æ‰ ä¸€åœº æ¯”èµ›çš„ç©å®¶åˆ—è¡¨ã€‚<br>ä¸¤ä¸ªåˆ—è¡¨ä¸­çš„å€¼éƒ½åº”è¯¥æŒ‰ é€’å¢ é¡ºåºè¿”å›ã€‚</p></blockquote><blockquote><p>æ³¨æ„ï¼š<br>åªè€ƒè™‘é‚£äº›å‚ä¸ è‡³å°‘ä¸€åœº æ¯”èµ›çš„ç©å®¶ã€‚<br>ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹ä¿è¯ ä¸å­˜åœ¨ ä¸¤åœºæ¯”èµ›ç»“æœ ç›¸åŒ ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šmatches &#x3D; [[1,3],[2,3],[3,6],[5,6],[5,7],[4,5],[4,8],[4,9],[10,4],[10,9]]</span><br><span class="line">è¾“å‡ºï¼š[[1,2,10],[4,5,7,8]]</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ç©å®¶ 1ã€2 å’Œ 10 éƒ½æ²¡æœ‰è¾“æ‰ä»»ä½•æ¯”èµ›ã€‚</span><br><span class="line">ç©å®¶ 4ã€5ã€7 å’Œ 8 æ¯ä¸ªéƒ½è¾“æ‰ä¸€åœºæ¯”èµ›ã€‚</span><br><span class="line">ç©å®¶ 3ã€6 å’Œ 9 æ¯ä¸ªéƒ½è¾“æ‰ä¸¤åœºæ¯”èµ›ã€‚</span><br><span class="line">å› æ­¤ï¼Œanswer[0] &#x3D; [1,2,10] å’Œ answer[1] &#x3D; [4,5,7,8] ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šmatches &#x3D; [[2,3],[1,3],[5,4],[6,4]]</span><br><span class="line">è¾“å‡ºï¼š[[1,2,5,6],[]]</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ç©å®¶ 1ã€2ã€5 å’Œ 6 éƒ½æ²¡æœ‰è¾“æ‰ä»»ä½•æ¯”èµ›ã€‚</span><br><span class="line">ç©å®¶ 3 å’Œ 4 æ¯ä¸ªéƒ½è¾“æ‰ä¸¤åœºæ¯”èµ›ã€‚</span><br><span class="line">å› æ­¤ï¼Œanswer[0] &#x3D; [1,2,5,6] å’Œ answer[1] &#x3D; [] ã€‚</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D; matches.length &lt;&#x3D; 105</span><br><span class="line">matches[i].length &#x3D;&#x3D; 2</span><br><span class="line">1 &lt;&#x3D; winneri, loseri &lt;&#x3D; 105</span><br><span class="line">winneri !&#x3D; loseri</span><br><span class="line">æ‰€æœ‰ matches[i] äº’ä¸ç›¸åŒ</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). æœ¬é¢˜éœ€è¦è¾“å‡ºä¸¤ä¸ªåˆ—è¡¨ï¼šå…¶ä¸€æ˜¯ <strong>å…¥åº¦</strong> ä¸º $0$ ä¸” <strong>å‡ºåº¦</strong> å¤§äº $0$ çš„ç¼–å·ï¼Œå…¶äºŒæ˜¯ <strong>å…¥åº¦</strong> æ°å¥½ä¸º $1$ çš„ç¼–å·ï¼›<br>(2). ä½¿ç”¨ä¸¤ä¸ª <code>map</code> åˆ†åˆ«ä¿å­˜æ¯ä¸ªç¼–å·çš„å‡ºåº¦å’Œå…¥åº¦ï¼›<br>(3). é¦–å…ˆéå† <strong>å…¥åº¦</strong> <code>map</code>ï¼Œåªè¦å‘ç°å…¶é•¿åº¦ä¸º $1$ï¼Œé‚£å°±åŠ å…¥è¾“å‡ºä¸­ï¼›<br>(4). ç„¶åéå† <strong>å‡ºåº¦</strong> <code>map</code>ï¼Œæ£€æŸ¥å¯¹åº”ç¼–å·çš„ <strong>å…¥åº¦</strong> åˆ—è¡¨å¦‚æœä¸º $0$ï¼Œé‚£ä¹ˆä¹ŸåŠ å…¥è¾“å‡ºä¸­ï¼›<br>(5). æ’åºä¸¤ä¸ªåˆ—è¡¨ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-1"><a href="#æ—¶é—´å¤æ‚åº¦-1" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N)</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findWinners</span><span class="params">(matches [][]<span class="keyword">int</span>)</span> [][]<span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">m1 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>][]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">m2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">bool</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå† matchesï¼Œæ„å»º å‡ºåº¦ å’Œ å…¥åº¦ map</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(matches); i++ &#123;</span><br><span class="line">win, lose := matches[i][<span class="number">0</span>], matches[i][<span class="number">1</span>]</span><br><span class="line">m1[lose] = <span class="built_in">append</span>(m1[lose], win)</span><br><span class="line">m2[win] = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ret := <span class="built_in">make</span>([][]<span class="keyword">int</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> m1 &#123;</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(v) == <span class="number">1</span> &#123;</span><br><span class="line">ret[<span class="number">1</span>] = <span class="built_in">append</span>(ret[<span class="number">1</span>], k)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k, _ := <span class="keyword">range</span> m2 &#123;</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(m1[k]) == <span class="number">0</span> &#123;</span><br><span class="line">ret[<span class="number">0</span>] = <span class="built_in">append</span>(ret[<span class="number">0</span>], k)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sort.Ints(ret[<span class="number">0</span>])</span><br><span class="line">sort.Ints(ret[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5219-æ¯ä¸ªå°å­©æœ€å¤šèƒ½åˆ†åˆ°å¤šå°‘ç³–æœ"><a href="#5219-æ¯ä¸ªå°å­©æœ€å¤šèƒ½åˆ†åˆ°å¤šå°‘ç³–æœ" class="headerlink" title="5219. æ¯ä¸ªå°å­©æœ€å¤šèƒ½åˆ†åˆ°å¤šå°‘ç³–æœ"></a><a class="link" href="https://leetcode-cn.com/problems/maximum-candies-allocated-to-k-children/">5219. æ¯ä¸ªå°å­©æœ€å¤šèƒ½åˆ†åˆ°å¤šå°‘ç³–æœ<i class="fas fa-external-link-alt"></i></a></h2><p>#äºŒåˆ†æŸ¥æ‰¾</p><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ª ä¸‹æ ‡ä» 0 å¼€å§‹ çš„æ•´æ•°æ•°ç»„ candies ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è¡¨ç¤ºå¤§å°ä¸º candies[i] çš„ä¸€å †ç³–æœã€‚ä½ å¯ä»¥å°†æ¯å †ç³–æœåˆ†æˆä»»æ„æ•°é‡çš„ å­å † ï¼Œä½† æ— æ³• å†å°†ä¸¤å †åˆå¹¶åˆ°ä¸€èµ·ã€‚<br>å¦ç»™ä½ ä¸€ä¸ªæ•´æ•° k ã€‚ä½ éœ€è¦å°†è¿™äº›ç³–æœåˆ†é…ç»™ k ä¸ªå°å­©ï¼Œä½¿æ¯ä¸ªå°å­©åˆ†åˆ° ç›¸åŒ æ•°é‡çš„ç³–æœã€‚æ¯ä¸ªå°å­©å¯ä»¥æ‹¿èµ° è‡³å¤šä¸€å † ç³–æœï¼Œæœ‰äº›ç³–æœå¯èƒ½ä¼šä¸è¢«åˆ†é…ã€‚<br>è¿”å›æ¯ä¸ªå°å­©å¯ä»¥æ‹¿èµ°çš„ æœ€å¤§ç³–æœæ•°ç›® ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šcandies &#x3D; [5,8,6], k &#x3D; 3</span><br><span class="line">è¾“å‡ºï¼š5</span><br><span class="line">è§£é‡Šï¼šå¯ä»¥å°† candies[1] åˆ†æˆå¤§å°åˆ†åˆ«ä¸º 5 å’Œ 3 çš„ä¸¤å †ï¼Œç„¶åæŠŠ candies[2] åˆ†æˆå¤§å°åˆ†åˆ«ä¸º 5 å’Œ 1 çš„ä¸¤å †ã€‚ç°åœ¨å°±æœ‰äº”å †å¤§å°åˆ†åˆ«ä¸º 5ã€5ã€3ã€5 å’Œ 1 çš„ç³–æœã€‚å¯ä»¥æŠŠ 3 å †å¤§å°ä¸º 5 çš„ç³–æœåˆ†ç»™ 3 ä¸ªå°å­©ã€‚å¯ä»¥è¯æ˜æ— æ³•è®©æ¯ä¸ªå°å­©å¾—åˆ°è¶…è¿‡ 5 é¢—ç³–æœã€‚</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šcandies &#x3D; [2,5], k &#x3D; 11</span><br><span class="line">è¾“å‡ºï¼š0</span><br><span class="line">è§£é‡Šï¼šæ€»å…±æœ‰ 11 ä¸ªå°å­©ï¼Œä½†åªæœ‰ 7 é¢—ç³–æœï¼Œä½†å¦‚æœè¦åˆ†é…ç³–æœçš„è¯ï¼Œå¿…é¡»ä¿è¯æ¯ä¸ªå°å­©è‡³å°‘èƒ½å¾—åˆ° 1 é¢—ç³–æœã€‚å› æ­¤ï¼Œæœ€åæ¯ä¸ªå°å­©éƒ½æ²¡æœ‰å¾—åˆ°ç³–æœï¼Œç­”æ¡ˆæ˜¯ 0 ã€‚</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D; candies.length &lt;&#x3D; 10^5</span><br><span class="line">1 &lt;&#x3D; candies[i] &lt;&#x3D; 10^7</span><br><span class="line">1 &lt;&#x3D; k &lt;&#x3D; 10^12</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). é¦–å…ˆçœ‹ä¸€çœ‹æ•°æ®é‡ï¼Œæ˜æ˜¾æš´åŠ›ç»å¯¹ä¼šè¶…æ—¶ï¼Œé‚£ä¹ˆåˆ«æ— é€‰æ‹©ï¼ŒäºŒåˆ†æ³•æèµ·æ¥ï¼›<br>(2). é¦–å…ˆåˆ¤æ–­ä¸€ä¸‹è¾¹ç•Œæƒ…å†µï¼Œå½“ ğŸ¬æ€»æ•° &lt; ğŸ§’æ€»æ•° æ—¶ï¼Œæ˜¾ç„¶å¤§å®¶éƒ½æ²¡å¾—åˆ†ï¼Œreturn 0ï¼›å¦‚æœ ğŸ¬æ€»æ•° == ğŸ§’æ€»æ•° ï¼Œreturn 1<br>(3) äºŒåˆ†æŸ¥æ‰¾çš„å·¦è¾¹ç•Œæ˜¯ $1$ï¼Œå³è¾¹ç•Œæ˜¯ ğŸ¬æ€»æ•°/ğŸ§’æ€»æ•° ï¼›<br>(4) è¦æŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„å³è¾¹ç•Œï¼ŒäºŒåˆ†è¶…æ‰¾æ¨¡æ¿å¥—èµ·æ¥ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-2"><a href="#æ—¶é—´å¤æ‚åº¦-2" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(Nlog(N))</p><h3 id="è§£é¢˜ä»£ç -2"><a href="#è§£é¢˜ä»£ç -2" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maximumCandies</span><span class="params">(candies []<span class="keyword">int</span>, k <span class="keyword">int64</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> total <span class="keyword">int64</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(candies); i++ &#123;</span><br><span class="line">total += <span class="keyword">int64</span>(candies[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> total &lt; k &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> total == k &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> satisified <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">bool</span></span></span><br><span class="line">satisified = <span class="function"><span class="keyword">func</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> count <span class="keyword">int64</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(candies); i++ &#123;</span><br><span class="line">count += <span class="keyword">int64</span>(candies[i]/n)</span><br><span class="line"><span class="keyword">if</span> count &gt;= k &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">l, r := <span class="number">1</span>, <span class="keyword">int</span>(total/k)</span><br><span class="line"><span class="keyword">if</span> satisified(r) &#123;</span><br><span class="line"><span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> l &lt; r &#123;</span><br><span class="line">m := l+(r-l)&gt;&gt;<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> satisified(m) &#123;</span><br><span class="line">l = m+<span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> !satisified(m) &#123;</span><br><span class="line">r = m</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> l<span class="number">-1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5302-åŠ å¯†è§£å¯†å­—ç¬¦ä¸²"><a href="#5302-åŠ å¯†è§£å¯†å­—ç¬¦ä¸²" class="headerlink" title="5302. åŠ å¯†è§£å¯†å­—ç¬¦ä¸²"></a><a class="link" href="https://leetcode-cn.com/problems/encrypt-and-decrypt-strings/">5302. åŠ å¯†è§£å¯†å­—ç¬¦ä¸²<i class="fas fa-external-link-alt"></i></a></h2><p>#è®¾è®¡é¢˜</p><h3 id="é¢˜ç›®æè¿°-3"><a href="#é¢˜ç›®æè¿°-3" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦æ•°ç»„ keys ï¼Œç”±è‹¥å¹² äº’ä¸ç›¸åŒ çš„å­—ç¬¦ç»„æˆã€‚è¿˜æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ values ï¼Œå†…å«è‹¥å¹²é•¿åº¦ä¸º 2 çš„å­—ç¬¦ä¸²ã€‚å¦ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ dictionary ï¼ŒåŒ…å«è§£å¯†åæ‰€æœ‰å…è®¸çš„åŸå­—ç¬¦ä¸²ã€‚è¯·ä½ è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ”¯æŒåŠ å¯†åŠè§£å¯†ä¸‹æ ‡ä» 0 å¼€å§‹å­—ç¬¦ä¸²çš„æ•°æ®ç»“æ„ã€‚<br>å­—ç¬¦ä¸² åŠ å¯† æŒ‰ä¸‹è¿°æ­¥éª¤è¿›è¡Œï¼š<br>1.å¯¹å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦ c ï¼Œå…ˆä» keys ä¸­æ‰¾å‡ºæ»¡è¶³ keys[i] == c çš„ä¸‹æ ‡ i ã€‚<br>2.åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œç”¨Â values[i] æ›¿æ¢å­—ç¬¦ c ã€‚<br>å­—ç¬¦ä¸² è§£å¯† æŒ‰ä¸‹è¿°æ­¥éª¤è¿›è¡Œï¼š<br>1.å°†å­—ç¬¦ä¸²æ¯ç›¸é‚» 2 ä¸ªå­—ç¬¦åˆ’åˆ†ä¸ºä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼Œå¯¹äºæ¯ä¸ªå­å­—ç¬¦ä¸² s ï¼Œæ‰¾å‡ºæ»¡è¶³ values[i] == s çš„ä¸€ä¸ªä¸‹æ ‡ i ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªæœ‰æ•ˆçš„ i ï¼Œä»ä¸­é€‰æ‹© ä»»æ„ ä¸€ä¸ªã€‚è¿™æ„å‘³ç€ä¸€ä¸ªå­—ç¬¦ä¸²è§£å¯†å¯èƒ½å¾—åˆ°å¤šä¸ªè§£å¯†å­—ç¬¦ä¸²ã€‚<br>2.åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œç”¨ keys[i] æ›¿æ¢ s ã€‚<br>å®ç° Encrypter ç±»ï¼š<br>1.Encrypter(char[] keys, String[] values, String[] dictionary) ç”¨ keysã€values å’Œ dictionary åˆå§‹åŒ– Encrypter ç±»ã€‚<br>2.String encrypt(String word1) æŒ‰ä¸Šè¿°åŠ å¯†è¿‡ç¨‹å®Œæˆå¯¹ word1 çš„åŠ å¯†ï¼Œå¹¶è¿”å›åŠ å¯†åçš„å­—ç¬¦ä¸²ã€‚<br>3.int decrypt(String word2) ç»Ÿè®¡å¹¶è¿”å›å¯ä»¥ç”± word2 è§£å¯†å¾—åˆ°ä¸”å‡ºç°åœ¨ dictionary ä¸­çš„å­—ç¬¦ä¸²æ•°ç›®ã€‚</p></blockquote><h3 id="è§£é¢˜æ€è·¯-3"><a href="#è§£é¢˜æ€è·¯-3" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). æ³¨æ„åˆ° <code>values</code> ä¸­æœ‰ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œå› æ­¤ä¸åŒçš„å­—ç¬¦ä¸²åŠ å¯†åå¯èƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»è€Œä¸€ä¸ªå­—ç¬¦ä¸²è§£å¯†å‡ºçš„ç»“æœå¯èƒ½ä¸æ˜¯å”¯ä¸€çš„ï¼›<br>(2). æ ¹æ®æç¤º 1ï¼Œç›´æ¥è§£å¯†è¾ƒä¸ºå¤æ‚ï¼Œä¸å¦¨é€†å‘æ€è€ƒï¼Œå³åŠ å¯† <code>dictionary</code> ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ã€‚ç”¨å“ˆå¸Œè¡¨è®°å½•æ¯ä¸ªåŠ å¯†åçš„å­—ç¬¦ä¸²çš„å‡ºç°æ¬¡æ•°ã€‚è¿™æ ·æ¯æ¬¡è°ƒç”¨ <code>decrypt</code> æ—¶ï¼Œè¿”å›å“ˆå¸Œè¡¨ä¸­ <code>word2</code> çš„å‡ºç°æ¬¡æ•°å³å¯ã€‚</p><h3 id="è§£é¢˜ä»£ç -3"><a href="#è§£é¢˜ä»£ç -3" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Encrypter <span class="keyword">struct</span> &#123;</span><br><span class="line">mp  [<span class="number">26</span>]<span class="keyword">string</span></span><br><span class="line">cnt <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Constructor</span><span class="params">(keys []<span class="keyword">byte</span>, values, dictionary []<span class="keyword">string</span>)</span> <span class="title">Encrypter</span></span> &#123;</span><br><span class="line">mp := [<span class="number">26</span>]<span class="keyword">string</span>&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i, key := <span class="keyword">range</span> keys &#123;</span><br><span class="line">mp[key-<span class="string">&#x27;a&#x27;</span>] = values[i]</span><br><span class="line">&#125;</span><br><span class="line">e := Encrypter&#123;mp, <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;&#125;&#125;</span><br><span class="line"><span class="keyword">for</span> _, s := <span class="keyword">range</span> dictionary &#123;</span><br><span class="line">e.cnt[e.Encrypt(s)]++</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> e</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *Encrypter)</span> <span class="title">Encrypt</span><span class="params">(word1 <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">res := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>, <span class="built_in">len</span>(word1)*<span class="number">2</span>)</span><br><span class="line"><span class="keyword">for</span> _, ch := <span class="keyword">range</span> word1 &#123;</span><br><span class="line">s := e.mp[ch-<span class="string">&#x27;a&#x27;</span>]</span><br><span class="line"><span class="keyword">if</span> s == <span class="string">&quot;&quot;</span> &#123; <span class="keyword">return</span> <span class="string">&quot;&quot;</span> &#125;</span><br><span class="line">res = <span class="built_in">append</span>(res, s...)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">string</span>(res)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *Encrypter)</span> <span class="title">Decrypt</span><span class="params">(word2 <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123; <span class="keyword">return</span> e.cnt[word2] &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ¬æ–‡æ˜¯å¯¹ç¬¬ 287 åœºå‘¨èµ›çš„å¤ç›˜æ€»ç»“&lt;/p&gt;
&lt;h2 id=&quot;6055-è½¬åŒ–æ—¶é—´éœ€è¦çš„æœ€å°‘æ“ä½œæ•°&quot;&gt;&lt;a href=&quot;#6055-è½¬åŒ–æ—¶é—´éœ€è¦çš„æœ€å°‘æ“ä½œæ•°&quot; class=&quot;headerlink&quot; title=&quot;6055. è½¬åŒ–æ—¶é—´éœ€è¦çš„æœ€å°‘æ“ä½œæ•°&quot;&gt;&lt;/a&gt;&lt;a class</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 5ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/03/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%205%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/03/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%205%EF%BC%89/</id>
    <published>2022-04-02T22:00:00.000Z</published>
    <updated>2022-04-08T00:11:31.121Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æ—©ä¸Šå¤ç›˜ä¸€ä¸‹æ˜¨å¤©æ™šä¸Šçš„åŒå‘¨èµ›</p><h2 id="LeetCode6033-è½¬æ¢æ•°å­—çš„æœ€å°‘ä½ç¿»è½¬æ¬¡æ•°"><a href="#LeetCode6033-è½¬æ¢æ•°å­—çš„æœ€å°‘ä½ç¿»è½¬æ¬¡æ•°" class="headerlink" title="LeetCode6033. è½¬æ¢æ•°å­—çš„æœ€å°‘ä½ç¿»è½¬æ¬¡æ•°"></a><a class="link" href="https://leetcode-cn.com/problems/minimum-bit-flips-to-convert-number/">LeetCode6033. è½¬æ¢æ•°å­—çš„æœ€å°‘ä½ç¿»è½¬æ¬¡æ•°<i class="fas fa-external-link-alt"></i></a></h2><p>#ä½è¿ç®—</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ä¸€æ¬¡ ä½ç¿»è½¬Â å®šä¹‰ä¸ºå°†æ•°å­—Â xÂ äºŒè¿›åˆ¶ä¸­çš„ä¸€ä¸ªä½è¿›è¡Œ ç¿»è½¬Â æ“ä½œï¼Œå³å°†Â 0Â å˜æˆÂ 1Â ï¼Œæˆ–è€…å°†Â 1Â å˜æˆÂ 0Â ã€‚<br>æ¯”æ–¹è¯´ï¼Œx = 7Â ï¼ŒäºŒè¿›åˆ¶è¡¨ç¤ºä¸ºÂ 111Â ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä»»æ„ä¸€ä¸ªä½ï¼ˆåŒ…å«æ²¡æœ‰æ˜¾ç¤ºçš„å‰å¯¼ 0 ï¼‰å¹¶è¿›è¡Œç¿»è½¬ã€‚æ¯”æ–¹è¯´æˆ‘ä»¬å¯ä»¥ç¿»è½¬æœ€å³è¾¹ä¸€ä½å¾—åˆ°Â 110Â ï¼Œæˆ–è€…ç¿»è½¬å³è¾¹èµ·ç¬¬äºŒä½å¾—åˆ°Â 101Â ï¼Œæˆ–è€…ç¿»è½¬å³è¾¹èµ·ç¬¬äº”ä½ï¼ˆè¿™ä¸€ä½æ˜¯å‰å¯¼ 0 ï¼‰å¾—åˆ°Â 10111Â ç­‰ç­‰ã€‚<br>ç»™ä½ ä¸¤ä¸ªæ•´æ•°Â start å’ŒÂ goalÂ ï¼Œè¯·ä½ è¿”å›å°†Â startÂ è½¬å˜æˆÂ goalÂ çš„Â æœ€å°‘ä½ç¿»è½¬Â æ¬¡æ•°ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šstart &#x3D; 10, goal &#x3D; 7</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼š10 å’Œ 7 çš„äºŒè¿›åˆ¶è¡¨ç¤ºåˆ†åˆ«ä¸º 1010 å’Œ 0111 ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ 3 æ­¥å°† 10 è½¬å˜æˆ 7 ï¼š</span><br><span class="line">- ç¿»è½¬å³è¾¹èµ·ç¬¬ä¸€ä½å¾—åˆ°ï¼š1010 -&gt; 1011 ã€‚</span><br><span class="line">- ç¿»è½¬å³è¾¹èµ·ç¬¬ä¸‰ä½ï¼š1011 -&gt; 1111 ã€‚</span><br><span class="line">- ç¿»è½¬å³è¾¹èµ·ç¬¬å››ä½ï¼š1111 -&gt; 0111 ã€‚</span><br><span class="line">æˆ‘ä»¬æ— æ³•åœ¨ 3 æ­¥å†…å°† 10 è½¬å˜æˆ 7 ã€‚æ‰€ä»¥æˆ‘ä»¬è¿”å› 3 ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šstart &#x3D; 3, goal &#x3D; 4</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼š3 å’Œ 4 çš„äºŒè¿›åˆ¶è¡¨ç¤ºåˆ†åˆ«ä¸º 011 å’Œ 100 ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ 3 æ­¥å°† 3 è½¬å˜æˆ 4 ï¼š</span><br><span class="line">- ç¿»è½¬å³è¾¹èµ·ç¬¬ä¸€ä½ï¼š011 -&gt; 010 ã€‚</span><br><span class="line">- ç¿»è½¬å³è¾¹èµ·ç¬¬äºŒä½ï¼š010 -&gt; 000 ã€‚</span><br><span class="line">- ç¿»è½¬å³è¾¹èµ·ç¬¬ä¸‰ä½ï¼š000 -&gt; 100 ã€‚</span><br><span class="line">æˆ‘ä»¬æ— æ³•åœ¨ 3 æ­¥å†…å°† 3 å˜æˆ 4 ã€‚æ‰€ä»¥æˆ‘ä»¬è¿”å› 3 ã€‚</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">0 &lt;&#x3D; start, goal &lt;&#x3D; 109</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). æœ¬è´¨ä¸Šæ˜¯åˆ¤æ–­ä¸¤ä¸ªæ•°æœ‰å¤šå°‘ä¸ªæ¯”ç‰¹ä½å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼ˆåŒ…å«å‰å¯¼é›¶ï¼‰ï¼›<br>(2). é‚£å°±ä»æœ€åä¸€ä¸ªæ¯”ç‰¹ä½å¼€å§‹å¾€å‰æ¯”è¾ƒå°±å¥½äº†ã€‚</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minBitFlips</span><span class="params">(start <span class="keyword">int</span>, goal <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">count := <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> judgeLastBit <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">bool</span></span></span><br><span class="line">judgeLastBit = <span class="function"><span class="keyword">func</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> x == <span class="number">0</span> || x^(x<span class="number">-1</span>) != <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> start &gt; <span class="number">0</span> || goal &gt; <span class="number">0</span> &#123;</span><br><span class="line">x1 := judgeLastBit(start)</span><br><span class="line">x2 := judgeLastBit(goal)</span><br><span class="line"><span class="keyword">if</span> (x1 &amp;&amp; !x2) || (!x1 &amp;&amp; x2) &#123;</span><br><span class="line">count++</span><br><span class="line">&#125;</span><br><span class="line">start &gt;&gt;= <span class="number">1</span></span><br><span class="line">goal &gt;&gt;= <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode6034-æ•°ç»„çš„ä¸‰è§’å’Œ"><a href="#LeetCode6034-æ•°ç»„çš„ä¸‰è§’å’Œ" class="headerlink" title="LeetCode6034. æ•°ç»„çš„ä¸‰è§’å’Œ"></a><a class="link" href="https://leetcode-cn.com/problems/find-triangular-sum-of-an-array/">LeetCode6034. æ•°ç»„çš„ä¸‰è§’å’Œ<i class="fas fa-external-link-alt"></i></a></h2><p>#æ¨¡æ‹Ÿé¢˜</p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0Â å¼€å§‹çš„æ•´æ•°æ•°ç»„Â numsÂ ï¼Œå…¶ä¸­Â nums[i]Â æ˜¯ 0Â åˆ° 9Â ä¹‹é—´ï¼ˆä¸¤è€…éƒ½åŒ…å«ï¼‰çš„ä¸€ä¸ªæ•°å­—ã€‚<br>numsÂ çš„ ä¸‰è§’å’ŒÂ æ˜¯æ‰§è¡Œä»¥ä¸‹æ“ä½œä»¥åæœ€åå‰©ä¸‹å…ƒç´ çš„å€¼ï¼š<br>1.numsÂ åˆå§‹åŒ…å«Â nÂ ä¸ªå…ƒç´ ã€‚å¦‚æœÂ n == 1Â ï¼Œç»ˆæ­¢Â æ“ä½œã€‚å¦åˆ™ï¼Œåˆ›å»ºÂ ä¸€ä¸ªæ–°çš„ä¸‹æ ‡ä»Â 0Â å¼€å§‹çš„é•¿åº¦ä¸º n - 1Â çš„æ•´æ•°æ•°ç»„Â newNumsÂ ã€‚<br>2.å¯¹äºæ»¡è¶³Â 0 &lt;= i &lt;Â n - 1Â çš„ä¸‹æ ‡Â iÂ ï¼ŒnewNums[i] èµ‹å€¼Â ä¸ºÂ (nums[i] + nums[i+1]) % 10Â ï¼Œ%Â è¡¨ç¤ºå–ä½™è¿ç®—ã€‚<br>3.å°†Â newNumsÂ æ›¿æ¢ æ•°ç»„Â numsÂ ã€‚<br>4.ä»æ­¥éª¤ 1 å¼€å§‹Â é‡å¤Â æ•´ä¸ªè¿‡ç¨‹ã€‚<br>5.è¯·ä½ è¿”å›Â numsÂ çš„ä¸‰è§’å’Œã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br></pre></td></tr></table></figure><p><img lazyload src="/images/loading.svg" data-src="ex1drawio.png" alt="avatar"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums &#x3D; [1,2,3,4,5]</span><br><span class="line">è¾“å‡ºï¼š8</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ä¸Šå›¾å±•ç¤ºäº†å¾—åˆ°æ•°ç»„ä¸‰è§’å’Œçš„è¿‡ç¨‹ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šnums &#x3D; [5]</span><br><span class="line">è¾“å‡ºï¼š5</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ç”±äº nums ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ•°ç»„çš„ä¸‰è§’å’Œä¸ºè¿™ä¸ªå…ƒç´ è‡ªå·±ã€‚</span><br><span class="line">Â </span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1 &lt;&#x3D; nums.length &lt;&#x3D; 1000</span><br><span class="line">0 &lt;&#x3D; nums[i] &lt;&#x3D; 9</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). å¤ªç®€å•äº†ã€‚ã€‚æ²¡å•¥å¥½è¯´çš„</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N)</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">triangularSum</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">len</span>(nums) &gt; <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(nums)<span class="number">-1</span>; i++ &#123;</span><br><span class="line">nums[i] += nums[i+<span class="number">1</span>]</span><br><span class="line">nums[i] %= <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line">nums = nums[:<span class="built_in">len</span>(nums)<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode6035-é€‰æ‹©å»ºç­‘çš„æ–¹æ¡ˆæ•°"><a href="#LeetCode6035-é€‰æ‹©å»ºç­‘çš„æ–¹æ¡ˆæ•°" class="headerlink" title="LeetCode6035. é€‰æ‹©å»ºç­‘çš„æ–¹æ¡ˆæ•°"></a><a class="link" href="https://leetcode-cn.com/problems/number-of-ways-to-select-buildings/">LeetCode6035. é€‰æ‹©å»ºç­‘çš„æ–¹æ¡ˆæ•°<i class="fas fa-external-link-alt"></i></a></h2><p>#åŠ¨æ€è§„åˆ’</p><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0Â å¼€å§‹çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²Â sÂ ï¼Œå®ƒè¡¨ç¤ºä¸€æ¡è¡—æ²¿é€”çš„å»ºç­‘ç±»å‹ï¼Œå…¶ä¸­ï¼š<br>s[i] = â€˜0â€™Â è¡¨ç¤ºç¬¬Â iÂ æ ‹å»ºç­‘æ˜¯ä¸€æ ‹åŠå…¬æ¥¼ï¼Œ<br>s[i] = â€˜1â€™Â è¡¨ç¤ºç¬¬Â iÂ æ ‹å»ºç­‘æ˜¯ä¸€é—´é¤å…ã€‚<br>ä½œä¸ºå¸‚æ”¿å…çš„å®˜å‘˜ï¼Œä½ éœ€è¦éšæœºÂ é€‰æ‹©Â 3 æ ‹å»ºç­‘ã€‚ç„¶è€Œï¼Œä¸ºäº†ç¡®ä¿å¤šæ ·æ€§ï¼Œé€‰å‡ºæ¥çš„ 3 æ ‹å»ºç­‘ ç›¸é‚»Â çš„ä¸¤æ ‹ä¸èƒ½æ˜¯åŒä¸€ç±»å‹ã€‚<br>æ¯”æ–¹è¯´ï¼Œç»™ä½ Â s = â€œ001101â€Â ï¼Œæˆ‘ä»¬ä¸èƒ½é€‰æ‹©ç¬¬Â 1Â ï¼Œ3Â å’ŒÂ 5Â æ ‹å»ºç­‘ï¼Œå› ä¸ºå¾—åˆ°çš„å­åºåˆ—æ˜¯Â â€œ011â€Â ï¼Œæœ‰ç›¸é‚»ä¸¤æ ‹å»ºç­‘æ˜¯åŒä¸€ç±»å‹ï¼Œæ‰€ä»¥ ä¸åˆÂ é¢˜æ„ã€‚<br>è¯·ä½ è¿”å›å¯ä»¥é€‰æ‹© 3 æ ‹å»ºç­‘çš„ æœ‰æ•ˆæ–¹æ¡ˆæ•°Â ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šs &#x3D; &quot;001101&quot;</span><br><span class="line">è¾“å‡ºï¼š6</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ä»¥ä¸‹ä¸‹æ ‡é›†åˆæ˜¯åˆæ³•çš„ï¼š</span><br><span class="line">- [0,2,4] ï¼Œä» &quot;001101&quot; å¾—åˆ° &quot;010&quot;</span><br><span class="line">- [0,3,4] ï¼Œä» &quot;001101&quot; å¾—åˆ° &quot;010&quot;</span><br><span class="line">- [1,2,4] ï¼Œä» &quot;001101&quot; å¾—åˆ° &quot;010&quot;</span><br><span class="line">- [1,3,4] ï¼Œä» &quot;001101&quot; å¾—åˆ° &quot;010&quot;</span><br><span class="line">- [2,4,5] ï¼Œä» &quot;001101&quot; å¾—åˆ° &quot;101&quot;</span><br><span class="line">- [3,4,5] ï¼Œä» &quot;001101&quot; å¾—åˆ° &quot;101&quot;</span><br><span class="line">æ²¡æœ‰åˆ«çš„åˆæ³•é€‰æ‹©ï¼Œæ‰€ä»¥æ€»å…±æœ‰ 6 ç§æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šs &#x3D; &quot;11100&quot;</span><br><span class="line">è¾“å‡ºï¼š0</span><br><span class="line">è§£é‡Šï¼šæ²¡æœ‰ä»»ä½•ç¬¦åˆé¢˜æ„çš„é€‰æ‹©ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">3 &lt;&#x3D; s.length &lt;&#x3D; 105</span><br><span class="line">s[i]Â è¦ä¹ˆæ˜¯Â &#39;0&#39;Â ï¼Œè¦ä¹ˆæ˜¯Â &#39;1&#39;Â ã€‚</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>æ–¹æ³•ä¸€ï¼šæš´åŠ›é€’å½’æœç´¢ï¼ˆè¶…æ—¶ï¼‰<br>(1). ç±»ä¼¼ç»„åˆæ•°è¿™ç§ç±»å‹çš„é¢˜ç›®ï¼Œä¸è¿‡è¦åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦ç¬¦åˆæœ€ç»ˆåˆæ³•çš„çº¦å®šï¼›<br>(2). å½“å­—ç¬¦ä¸²å‰©ä¸‹çš„é•¿åº¦ä¸è¶³ä»¥æ»¡è¶³è¦æ±‚ï¼Œå‰ªæã€‚ï¼ˆå®é™…ä¸Šè¿™ä¸ªä¼˜åŒ–å¹¶æ²¡ä»€ä¹ˆç”¨ï¼Œå› ä¸ºå‰ªæçš„é•¿åº¦æœ€å¤§ä¹Ÿå°± 3ï¼Œæ ¹æœ¬ä¸å½±å“æœ€ç»ˆçš„å¤æ‚åº¦ï¼‰</p><p>æ–¹æ³•äºŒï¼šç»Ÿè®¡å‰ç¼€æ•°é‡ï¼ˆO(N)ï¼‰<br>åˆ†åˆ«å®šä¹‰ 5 ä¸ªå˜é‡ï¼Œ<code>n1</code> ä»£è¡¨å‰ç¼€ä¸º 1 çš„å­åºåˆ—æ•°é‡ï¼Œ<code>n0</code> ä»£è¡¨å‰ç¼€ä¸º 0 çš„å­åºåˆ—æ•°é‡ï¼Œ<code>n01</code> ä»£è¡¨å‰ç¼€ä¸º 01 çš„å­åºåˆ—æ•°é‡,<code>n10</code> ä»£è¡¨å‰ç¼€ä¸º 10 çš„å­åºåˆ—æ•°é‡ï¼Œ<code>count</code>åˆ™æ˜¯ç»Ÿè®¡åˆæ³•çš„å­åºåˆ—æ•°é‡ï¼ˆ<code>010</code> + <code>101</code>ï¼‰</p><h3 id="è§£é¢˜ä»£ç -2"><a href="#è§£é¢˜ä»£ç -2" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><p>æ–¹æ³•ä¸€ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">numberOfWays</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int64</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> count <span class="keyword">int64</span></span><br><span class="line">path := []<span class="keyword">byte</span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> backTracking <span class="function"><span class="keyword">func</span><span class="params">(start <span class="keyword">int</span>, rest <span class="keyword">int</span>)</span></span></span><br><span class="line">backTracking = <span class="function"><span class="keyword">func</span><span class="params">(start <span class="keyword">int</span> ,rest <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> rest == <span class="number">0</span> &#123;</span><br><span class="line">count++</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=start; i&lt;<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> rest &gt; <span class="built_in">len</span>(s[start:]) &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(path) == <span class="number">0</span> &#123;</span><br><span class="line">path = <span class="built_in">append</span>(path, s[i])</span><br><span class="line">backTracking(i+<span class="number">1</span>, rest<span class="number">-1</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> s[i] != path[<span class="built_in">len</span>(path)<span class="number">-1</span>] &#123;</span><br><span class="line">path = <span class="built_in">append</span>(path, s[i])</span><br><span class="line">backTracking(i+<span class="number">1</span>, rest<span class="number">-1</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(path) &gt; <span class="number">0</span> &#123;</span><br><span class="line">path = path[:<span class="built_in">len</span>(path)<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">backTracking(<span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">numberOfWays</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int64</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> count <span class="keyword">int64</span></span><br><span class="line"><span class="keyword">var</span> n0, n1, n01, n10 <span class="keyword">int64</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> s[i] == <span class="string">&#x27;1&#x27;</span> &#123;</span><br><span class="line">n01 += n0</span><br><span class="line">n1++</span><br><span class="line">count += n10</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">n10 += n1</span><br><span class="line">n0++</span><br><span class="line">count += n01</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šå¤©æ—©ä¸Šå¤ç›˜ä¸€ä¸‹æ˜¨å¤©æ™šä¸Šçš„åŒå‘¨èµ›&lt;/p&gt;
&lt;h2 id=&quot;LeetCode6033-è½¬æ¢æ•°å­—çš„æœ€å°‘ä½ç¿»è½¬æ¬¡æ•°&quot;&gt;&lt;a href=&quot;#LeetCode6033-è½¬æ¢æ•°å­—çš„æœ€å°‘ä½ç¿»è½¬æ¬¡æ•°&quot; class=&quot;headerlink&quot; title=&quot;LeetCode6033. è½¬æ¢æ•°å­—</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 4ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/02/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%204%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/02/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%204%EF%BC%89/</id>
    <published>2022-04-01T22:00:00.000Z</published>
    <updated>2022-04-08T00:12:46.406Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LeetCode856-æ‹¬å·çš„åˆ†æ•°"><a href="#LeetCode856-æ‹¬å·çš„åˆ†æ•°" class="headerlink" title="LeetCode856. æ‹¬å·çš„åˆ†æ•°"></a><a class="link" href="https://leetcode-cn.com/problems/score-of-parentheses/">LeetCode856. æ‹¬å·çš„åˆ†æ•°<i class="fas fa-external-link-alt"></i></a></h2><p>#é€’å½’ #æ ˆ</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ä¸ªå¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²Â Sï¼ŒæŒ‰ä¸‹è¿°è§„åˆ™è®¡ç®—è¯¥å­—ç¬¦ä¸²çš„åˆ†æ•°ï¼š<br>() å¾— 1 åˆ†ã€‚<br>AB å¾—Â A + BÂ åˆ†ï¼Œå…¶ä¸­ A å’Œ B æ˜¯å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²ã€‚<br>(A) å¾—Â 2 * AÂ åˆ†ï¼Œå…¶ä¸­ A æ˜¯å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br><span class="line">è¾“å…¥ï¼š&quot;()&quot;</span><br><span class="line">è¾“å‡ºï¼š1</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼š&quot;(())&quot;</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹Â 3ï¼š</span><br><span class="line">è¾“å…¥ï¼š&quot;()()&quot;</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹Â 4ï¼š</span><br><span class="line">è¾“å…¥ï¼š&quot;(()(()))&quot;</span><br><span class="line">è¾“å‡ºï¼š6</span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">1. SÂ æ˜¯å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²ï¼Œä¸”åªå«æœ‰Â (Â å’ŒÂ )Â ã€‚</span><br><span class="line">2. 2 &lt;&#x3D; S.length &lt;&#x3D; 50</span><br></pre></td></tr></table></figure><p>Â </p><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p> (1). è€ƒè™‘é‡‡ç”¨é€’å½’ + æ ˆæ¥è§£é¢˜ã€‚æ‹¬å·é—®é¢˜é¦–å…ˆå¤©ç„¶å°±ä¼šæƒ³åˆ°ä½¿ç”¨æ ˆï¼Œç”±äºæœ¬é¢˜ä¸éœ€è¦è€ƒè™‘æ‹¬å·å­—ç¬¦ä¸²çš„åˆæ³•æ€§ï¼Œæ‰€ä»¥æ ˆå¯ä»¥å½“ä½œä¸€ä¸ªçŠ¶æ€çš„ä¿å­˜ï¼Œåœ¨æ ˆå†…éƒ¨è¿›è¡Œé€’å½’ï¼›<br> (2). å¯¹äºåµŒå¥—çš„æ‹¬å·ï¼Œé‡‡ç”¨é€’å½’çš„ç­–ç•¥ï¼Œå‡ºé€’å½’å‰å°†é€’å½’æ ˆä¸­åˆ†æ•°*2 å³å¯ï¼›<br> (3). æ³¨æ„éå†å­—ç¬¦ä¸²è¦ä½¿ç”¨æŒ‡é’ˆä»¥åŠå‡ºé€’å½’çš„æ¡ä»¶ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p> O(N).</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3> <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">scoreOfParentheses</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> scoreCount <span class="function"><span class="keyword">func</span><span class="params">(start *<span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line">scoreCount = <span class="function"><span class="keyword">func</span><span class="params">(start *<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">ss := []<span class="keyword">byte</span>&#123;&#125;</span><br><span class="line">sc := <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ; *start&lt;<span class="built_in">len</span>(s); (*start)++ &#123;</span><br><span class="line">i := *start</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(ss) == <span class="number">0</span> &amp;&amp; s[i] == <span class="string">&#x27;(&#x27;</span> &#123;</span><br><span class="line">ss = <span class="built_in">append</span>(ss, <span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> s[i] == <span class="string">&#x27;)&#x27;</span> &amp;&amp; <span class="built_in">len</span>(ss) == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> s[i] == <span class="string">&#x27;)&#x27;</span> &amp;&amp; ss[<span class="built_in">len</span>(ss)<span class="number">-1</span>] == <span class="string">&#x27;(&#x27;</span> &#123;</span><br><span class="line">sc++</span><br><span class="line">ss = ss[:<span class="built_in">len</span>(ss)<span class="number">-1</span>]</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> s[i] == <span class="string">&#x27;(&#x27;</span> &amp;&amp; <span class="built_in">len</span>(ss) != <span class="number">0</span> &#123;</span><br><span class="line">sc += <span class="number">2</span>*scoreCount(start)</span><br><span class="line">ss = ss[:<span class="built_in">len</span>(ss)<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">score := <span class="number">0</span></span><br><span class="line">stack := []<span class="keyword">byte</span>&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(stack) == <span class="number">0</span> &#123;</span><br><span class="line">stack = <span class="built_in">append</span>(stack, <span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> s[i] == <span class="string">&#x27;)&#x27;</span> &amp;&amp; stack[<span class="built_in">len</span>(stack)<span class="number">-1</span>] == <span class="string">&#x27;(&#x27;</span> &#123;</span><br><span class="line">stack = stack[:<span class="built_in">len</span>(stack)<span class="number">-1</span>]</span><br><span class="line">score++</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">score += <span class="number">2</span>*scoreCount(&amp;i)</span><br><span class="line">stack = stack[:<span class="built_in">len</span>(stack)<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> score</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="23-åˆå¹¶Kä¸ªå‡åºé“¾è¡¨"><a href="#23-åˆå¹¶Kä¸ªå‡åºé“¾è¡¨" class="headerlink" title="23. åˆå¹¶Kä¸ªå‡åºé“¾è¡¨"></a><a class="link" href="https://leetcode-cn.com/problems/merge-k-sorted-lists/">23. åˆå¹¶Kä¸ªå‡åºé“¾è¡¨<i class="fas fa-external-link-alt"></i></a></h2><p>#ä¼˜å…ˆé˜Ÿåˆ—</p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨æ•°ç»„ï¼Œæ¯ä¸ªé“¾è¡¨éƒ½å·²ç»æŒ‰å‡åºæ’åˆ—ã€‚<br>è¯·ä½ å°†æ‰€æœ‰é“¾è¡¨åˆå¹¶åˆ°ä¸€ä¸ªå‡åºé“¾è¡¨ä¸­ï¼Œè¿”å›åˆå¹¶åçš„é“¾è¡¨ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šlists &#x3D; [[1,4,5],[1,3,4],[2,6]]</span><br><span class="line">è¾“å‡ºï¼š[1,1,2,3,4,4,5,6]</span><br><span class="line">è§£é‡Šï¼šé“¾è¡¨æ•°ç»„å¦‚ä¸‹ï¼š</span><br><span class="line">[</span><br><span class="line">  1-&gt;4-&gt;5,</span><br><span class="line">  1-&gt;3-&gt;4,</span><br><span class="line">  2-&gt;6</span><br><span class="line">]</span><br><span class="line">å°†å®ƒä»¬åˆå¹¶åˆ°ä¸€ä¸ªæœ‰åºé“¾è¡¨ä¸­å¾—åˆ°ã€‚</span><br><span class="line">1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4-&gt;5-&gt;6</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šlists &#x3D; []</span><br><span class="line">è¾“å‡ºï¼š[]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 3ï¼š</span><br><span class="line">è¾“å…¥ï¼šlists &#x3D; [[]]</span><br><span class="line">è¾“å‡ºï¼š[]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">k &#x3D;&#x3D; lists.length</span><br><span class="line">0 &lt;&#x3D; k &lt;&#x3D; 10^4</span><br><span class="line">0 &lt;&#x3D; lists[i].length &lt;&#x3D; 500</span><br><span class="line">-10^4 &lt;&#x3D; lists[i][j] &lt;&#x3D; 10^4</span><br><span class="line">lists[i] æŒ‰ å‡åº æ’åˆ—</span><br><span class="line">lists[i].length çš„æ€»å’Œä¸è¶…è¿‡ 10^4</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>ä¼˜å…ˆé˜Ÿåˆ—ï¼Œç›´æ¥çœ‹ä»£ç å§</p><h3 id="æ—¶é—´å¤æ‚åº¦-1"><a href="#æ—¶é—´å¤æ‚åº¦-1" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(Nlog(N))ï¼Œå–å†³äºå †æ’åºçš„æ—¶é—´å¤æ‚åº¦</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* type ListNode struct &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* Val int</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* Next *ListNode</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;container/heap&quot;</span></span><br><span class="line"><span class="keyword">type</span> IntHeap []<span class="keyword">int</span></span><br><span class="line"><span class="keyword">var</span> a []<span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h IntHeap)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">len</span>(h)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h IntHeap)</span> <span class="title">Less</span><span class="params">(i,j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> a[h[i]]&lt;a[h[j]]</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h IntHeap)</span> <span class="title">Swap</span><span class="params">(i,j <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">h[i], h[j] = h[j], h[i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *IntHeap)</span> <span class="title">Push</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">*h = <span class="built_in">append</span>(*h, x.(<span class="keyword">int</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *IntHeap)</span> <span class="title">Pop</span><span class="params">()</span> <span class="title">interface</span></span>&#123;&#125; &#123;</span><br><span class="line">old := *h</span><br><span class="line">n := <span class="built_in">len</span>(*h)</span><br><span class="line">x := old[n<span class="number">-1</span>]</span><br><span class="line">*h = old[:n<span class="number">-1</span>]</span><br><span class="line"><span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mergeKLists</span><span class="params">(lists []*ListNode)</span> *<span class="title">ListNode</span></span> &#123;</span><br><span class="line">l := <span class="built_in">len</span>(lists)</span><br><span class="line"><span class="keyword">if</span> l == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> h IntHeap</span><br><span class="line">a = <span class="built_in">make</span>([]<span class="keyword">int</span>, l)</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;l; i++ &#123;</span><br><span class="line"><span class="keyword">if</span> lists[i] == <span class="literal">nil</span> &#123;</span><br><span class="line">a[i] = <span class="number">-1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">a[i] = lists[i].Val</span><br><span class="line">heap.Push(&amp;h, i)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(h) == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">first := heap.Pop(&amp;h).(<span class="keyword">int</span>)</span><br><span class="line">head := lists[first]</span><br><span class="line">a[first] = math.MaxInt32</span><br><span class="line">p := head</span><br><span class="line">lists[first] = head.Next</span><br><span class="line">p.Next = <span class="literal">nil</span></span><br><span class="line"><span class="keyword">if</span> lists[first] != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="comment">// ä¸‹é¢ä¸¤è¡Œæ³¨æ„é¡ºåºä¸èƒ½åäº†ï¼Œå…ˆæ›´æ”¹ aï¼Œæ‰èƒ½æ’åº</span></span><br><span class="line">a[first] = lists[first].Val</span><br><span class="line">heap.Push(&amp;h, first)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">len</span>(h) &gt; <span class="number">0</span> &#123;</span><br><span class="line">i := heap.Pop(&amp;h).(<span class="keyword">int</span>)</span><br><span class="line">a[i] = math.MaxInt32</span><br><span class="line">p.Next = lists[i]</span><br><span class="line">p = p.Next</span><br><span class="line">lists[i] = lists[i].Next</span><br><span class="line"><span class="keyword">if</span> lists[i] != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="comment">// ä¸‹é¢ä¸¤è¡Œæ³¨æ„é¡ºåºä¸èƒ½åäº†ï¼Œå…ˆæ›´æ”¹ aï¼Œæ‰èƒ½æ’åº</span></span><br><span class="line">a[i] = lists[i].Val</span><br><span class="line">heap.Push(&amp;h, i)</span><br><span class="line">&#125;</span><br><span class="line">p.Next = <span class="literal">nil</span></span><br><span class="line"><span class="comment">// fmt.Println(a,h,x,i)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> head</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LeetCode856-æ‹¬å·çš„åˆ†æ•°&quot;&gt;&lt;a href=&quot;#LeetCode856-æ‹¬å·çš„åˆ†æ•°&quot; class=&quot;headerlink&quot; title=&quot;LeetCode856. æ‹¬å·çš„åˆ†æ•°&quot;&gt;&lt;/a&gt;&lt;a class=&quot;link&quot; href=&quot;https://leet</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 3ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/04/01/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%203%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/04/01/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%203%EF%BC%89/</id>
    <published>2022-03-31T21:30:00.000Z</published>
    <updated>2022-04-08T00:14:45.094Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LeetCode269-ç«æ˜Ÿè¯å…¸"><a href="#LeetCode269-ç«æ˜Ÿè¯å…¸" class="headerlink" title="LeetCode269. ç«æ˜Ÿè¯å…¸"></a><a class="link" href="https://leetcode-cn.com/problems/alien-dictionary/">LeetCode269. ç«æ˜Ÿè¯å…¸<i class="fas fa-external-link-alt"></i></a></h2><p>#æ‹“æ‰‘æ’åº</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç°æœ‰ä¸€ç§ä½¿ç”¨è‹±è¯­å­—æ¯çš„ç«æ˜Ÿè¯­è¨€ï¼Œè¿™é—¨è¯­è¨€çš„å­—æ¯é¡ºåºä¸è‹±è¯­é¡ºåºä¸åŒã€‚ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ words ï¼Œä½œä¸ºè¿™é—¨è¯­è¨€çš„è¯å…¸ï¼Œwords ä¸­çš„å­—ç¬¦ä¸²å·²ç» æŒ‰è¿™é—¨æ–°è¯­è¨€çš„å­—æ¯é¡ºåºè¿›è¡Œäº†æ’åº ã€‚è¯·ä½ æ ¹æ®è¯¥è¯å…¸è¿˜åŸå‡ºæ­¤è¯­è¨€ä¸­å·²çŸ¥çš„å­—æ¯é¡ºåºï¼Œå¹¶ æŒ‰å­—æ¯é€’å¢é¡ºåº æ’åˆ—ã€‚è‹¥ä¸å­˜åœ¨åˆæ³•å­—æ¯é¡ºåºï¼Œè¿”å› â€œâ€ ã€‚è‹¥å­˜åœ¨å¤šç§å¯èƒ½çš„åˆæ³•å­—æ¯é¡ºåºï¼Œè¿”å›å…¶ä¸­ ä»»æ„ä¸€ç§ é¡ºåºå³å¯ã€‚<br>å­—ç¬¦ä¸² s å­—å…¸é¡ºåºå°äº å­—ç¬¦ä¸² t æœ‰ä¸¤ç§æƒ…å†µï¼š<br>1.åœ¨ç¬¬ä¸€ä¸ªä¸åŒå­—æ¯å¤„ï¼Œå¦‚æœ s ä¸­çš„å­—æ¯åœ¨è¿™é—¨å¤–æ˜Ÿè¯­è¨€çš„å­—æ¯é¡ºåºä¸­ä½äº t ä¸­å­—æ¯ä¹‹å‰ï¼Œé‚£ä¹ˆÂ s çš„å­—å…¸é¡ºåºå°äº t ã€‚<br>2.å¦‚æœå‰é¢ min(s.length, t.length) å­—æ¯éƒ½ç›¸åŒï¼Œé‚£ä¹ˆ s.length &lt; t.length æ—¶ï¼Œs çš„å­—å…¸é¡ºåºä¹Ÿå°äº t ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br><span class="line">è¾“å…¥ï¼šwords &#x3D; [&quot;wrt&quot;,&quot;wrf&quot;,&quot;er&quot;,&quot;ett&quot;,&quot;rftt&quot;]</span><br><span class="line">è¾“å‡ºï¼š&quot;wertf&quot;</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2:</span><br><span class="line">è¾“å…¥ï¼šwords &#x3D; [&quot;z&quot;,&quot;x&quot;]</span><br><span class="line">è¾“å‡ºï¼š&quot;zx&quot;</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 3:</span><br><span class="line">è¾“å…¥ï¼šwords &#x3D; [&quot;z&quot;,&quot;x&quot;,&quot;z&quot;]</span><br><span class="line">è¾“å‡ºï¼š&quot;&quot;</span><br><span class="line">è§£é‡Šï¼šä¸å­˜åœ¨åˆæ³•å­—æ¯é¡ºåºï¼Œå› æ­¤è¿”å› &quot;&quot; ã€‚</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). é¦–å…ˆè€ƒè™‘ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°ä¸åˆæ³•çš„æƒ…å†µï¼šå¦‚æœåœ¨ä¹‹å‰åˆ¤æ–­å­—æ¯ â€˜xâ€™ çš„å­—å…¸åºåº”è¯¥å¤§äº â€˜yâ€™ï¼Œå¯æ˜¯åœ¨åé¢åˆå‡ºç°äº† â€˜yâ€™ çš„å­—å…¸åºåº”è¯¥å¤§äº â€˜xâ€™ çš„æƒ…å†µï¼Œé‚£ä¹ˆæ­¤æ—¶å°±å‡ºç°äº†çŸ›ç›¾ï¼Œå› æ­¤æ˜¯ä¸åˆæ³•çš„ï¼›<br>(2). å¯¹äºè¿™ç§åªå…è®¸å•å‘ä¾èµ–çš„æƒ…å†µï¼Œè€ƒè™‘ä½¿ç”¨æ‹“æ‰‘æ’åºã€‚é¦–å…ˆå°±è¦æ„å»ºé‚»æ¥è¡¨å’Œå…¥åº¦ç»Ÿè®¡ã€‚åœ¨å»ºç«‹é‚»æ¥è¡¨çš„æ—¶å€™è¦è€ƒè™‘ä¸€ç§æƒ…å†µï¼Œé‚£å°±æ˜¯å¦‚æœå‡ºç°åœ¨åé¢çš„å­—ç¬¦ä¸²æ˜¯å‰é¢å­—ç¬¦ä¸²çš„å‰ç¼€å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå¯ä»¥ç«‹å³åˆ¤å®šæ˜¯ä¸åˆæ³•çš„ï¼›<br>(3). åœ¨æ„å»ºå¥½ä¸¤ä¸ªæ•°æ®ç»“æ„åï¼Œä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢æŸ¥æ‰¾ã€‚å°†å…¥åº¦ä¸º 0 çš„å­—æ¯æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œç„¶åå†å°†å…¶å¯¹åº”çš„é‚»æ¥è¡¨ä¸­çš„å­—æ¯å…¥åº¦å‡ä¸€ï¼Œæ­¤æ—¶ç›¸å½“äºåœ¨æ‹“æ‰‘æ’åºä¸­æ¶ˆé™¤äº†å¯¹è¯¥å­—æ¯çš„ä¾èµ–ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œè®¿é—®æ•° <code>visited</code> åŠ  1ï¼›<br>(4). æœ€ååˆ¤æ–­ä¸€ä¸‹ <code>visited</code> æ˜¯å¦æ˜¯å…¨ä½“å‡ºç°è¿‡çš„å­—æ¯æ•°ï¼Œç›¸ç­‰åˆ™è¯´æ˜æ˜¯ä¸€ä¸ªæ‹“æ‰‘æ’åºï¼Œä¸å­˜åœ¨å¾ªç¯ä¾èµ–ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(words.length*words[i].length)</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">alienOrder</span><span class="params">(words []<span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line"></span><br><span class="line">adjacency := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">byte</span>][]<span class="keyword">byte</span>) <span class="comment">// é‚»æ¥è¡¨</span></span><br><span class="line">inDegree := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">byte</span>]<span class="keyword">int</span>)<span class="comment">// å…¥åº¦ç»Ÿè®¡</span></span><br><span class="line">ret := <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> buildGraph <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">bool</span></span></span><br><span class="line">buildGraph = <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(words); i++ &#123;</span><br><span class="line"><span class="keyword">for</span> j:=<span class="number">0</span>; j&lt;<span class="built_in">len</span>(words[i]); j++ &#123;</span><br><span class="line">adjacency[words[i][j]] = []<span class="keyword">byte</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(words); i++ &#123;</span><br><span class="line">w1, w2 := words[i<span class="number">-1</span>], words[i]</span><br><span class="line">j := <span class="number">0</span></span><br><span class="line">minLength := min(<span class="built_in">len</span>(w1),<span class="built_in">len</span>(w2))</span><br><span class="line"><span class="keyword">for</span> ; j&lt;minLength; j++ &#123;</span><br><span class="line"><span class="keyword">if</span> w1[j] != w2[j] &#123;</span><br><span class="line">adjacency[w1[j]] = <span class="built_in">append</span>(adjacency[w1[j]], w2[j])</span><br><span class="line">inDegree[w2[j]]++</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> j == minLength &amp;&amp; <span class="built_in">len</span>(w1) &gt; <span class="built_in">len</span>(w2) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> visitedCount <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span></span></span><br><span class="line">visitedCount = <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">visited := <span class="number">0</span></span><br><span class="line">q := []<span class="keyword">byte</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k,_ := <span class="keyword">range</span> adjacency &#123;</span><br><span class="line"><span class="keyword">if</span> inDegree[k] == <span class="number">0</span> &#123;</span><br><span class="line">q = <span class="built_in">append</span>(q, k)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">len</span>(q) &gt; <span class="number">0</span> &#123;</span><br><span class="line">p := []<span class="keyword">byte</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(q); i++ &#123;</span><br><span class="line">w := q[i]</span><br><span class="line"><span class="keyword">for</span> j:=<span class="number">0</span>; j&lt;<span class="built_in">len</span>(adjacency[w]); j++ &#123;</span><br><span class="line">x := adjacency[w][j]</span><br><span class="line">inDegree[x]--</span><br><span class="line"><span class="keyword">if</span> inDegree[x] == <span class="number">0</span> &#123;</span><br><span class="line">p = <span class="built_in">append</span>(p, x)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">visited++</span><br><span class="line">&#125;</span><br><span class="line">ret += <span class="keyword">string</span>(q)</span><br><span class="line">q = p</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> visited</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> !buildGraph() || visitedCount() != <span class="built_in">len</span>(adjacency) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(a,b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &lt; b &#123;</span><br><span class="line"><span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode8-å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°-atoi"><a href="#LeetCode8-å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°-atoi" class="headerlink" title="LeetCode8. å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)"></a><a class="link" href="https://leetcode-cn.com/problems/string-to-integer-atoi/">LeetCode8. å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)<i class="fas fa-external-link-alt"></i></a></h2><p>#æ¨¡æ‹Ÿé¢˜</p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>è¯·ä½ æ¥å®ç°ä¸€ä¸ªÂ myAtoi(string s)Â å‡½æ•°ï¼Œä½¿å…¶èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆç±»ä¼¼ C/C++ ä¸­çš„ atoi å‡½æ•°ï¼‰ã€‚<br>å‡½æ•°Â myAtoi(string s) çš„ç®—æ³•å¦‚ä¸‹ï¼š<br>1.è¯»å…¥å­—ç¬¦ä¸²å¹¶ä¸¢å¼ƒæ— ç”¨çš„å‰å¯¼ç©ºæ ¼<br>2.æ£€æŸ¥ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼ˆå‡è®¾è¿˜æœªåˆ°å­—ç¬¦æœ«å°¾ï¼‰ä¸ºæ­£è¿˜æ˜¯è´Ÿå·ï¼Œè¯»å–è¯¥å­—ç¬¦ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ ç¡®å®šæœ€ç»ˆç»“æœæ˜¯è´Ÿæ•°è¿˜æ˜¯æ­£æ•°ã€‚ å¦‚æœä¸¤è€…éƒ½ä¸å­˜åœ¨ï¼Œåˆ™å‡å®šç»“æœä¸ºæ­£ã€‚<br>3.è¯»å…¥ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œç›´åˆ°åˆ°è¾¾ä¸‹ä¸€ä¸ªéæ•°å­—å­—ç¬¦æˆ–åˆ°è¾¾è¾“å…¥çš„ç»“å°¾ã€‚å­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†å°†è¢«å¿½ç•¥ã€‚<br>4.å°†å‰é¢æ­¥éª¤è¯»å…¥çš„è¿™äº›æ•°å­—è½¬æ¢ä¸ºæ•´æ•°ï¼ˆå³ï¼Œâ€123â€ -&gt; 123ï¼Œ â€œ0032â€ -&gt; 32ï¼‰ã€‚å¦‚æœæ²¡æœ‰è¯»å…¥æ•°å­—ï¼Œåˆ™æ•´æ•°ä¸º 0 ã€‚å¿…è¦æ—¶æ›´æ”¹ç¬¦å·ï¼ˆä»æ­¥éª¤ 2 å¼€å§‹ï¼‰ã€‚<br>5.å¦‚æœæ•´æ•°æ•°è¶…è¿‡ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´ [âˆ’231,Â  231Â âˆ’ 1] ï¼Œéœ€è¦æˆªæ–­è¿™ä¸ªæ•´æ•°ï¼Œä½¿å…¶ä¿æŒåœ¨è¿™ä¸ªèŒƒå›´å†…ã€‚å…·ä½“æ¥è¯´ï¼Œå°äº âˆ’231 çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º âˆ’231 ï¼Œå¤§äº 231Â âˆ’ 1 çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º 231Â âˆ’ 1 ã€‚<br>6.è¿”å›æ•´æ•°ä½œä¸ºæœ€ç»ˆç»“æœã€‚</p></blockquote><blockquote><p>æ³¨æ„ï¼š<br>æœ¬é¢˜ä¸­çš„ç©ºç™½å­—ç¬¦åªåŒ…æ‹¬ç©ºæ ¼å­—ç¬¦ â€˜ â€˜ ã€‚<br>é™¤å‰å¯¼ç©ºæ ¼æˆ–æ•°å­—åçš„å…¶ä½™å­—ç¬¦ä¸²å¤–ï¼Œ<strong>è¯·å‹¿å¿½ç•¥</strong> ä»»ä½•å…¶ä»–å­—ç¬¦ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br><span class="line">è¾“å…¥ï¼šs &#x3D; &quot;42&quot;</span><br><span class="line">è¾“å‡ºï¼š42</span><br><span class="line">è§£é‡Šï¼šåŠ ç²—çš„å­—ç¬¦ä¸²ä¸ºå·²ç»è¯»å…¥çš„å­—ç¬¦ï¼Œæ’å…¥ç¬¦å·æ˜¯å½“å‰è¯»å–çš„å­—ç¬¦ã€‚</span><br><span class="line">ç¬¬ 1 æ­¥ï¼š&quot;42&quot;ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰</span><br><span class="line">         ^</span><br><span class="line">ç¬¬ 2 æ­¥ï¼š&quot;42&quot;ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºè¿™é‡Œä¸å­˜åœ¨ &#39;-&#39; æˆ–è€… &#39;+&#39;ï¼‰</span><br><span class="line">         ^</span><br><span class="line">ç¬¬ 3 æ­¥ï¼š&quot;42&quot;ï¼ˆè¯»å…¥ &quot;42&quot;ï¼‰</span><br><span class="line">           ^</span><br><span class="line">è§£æå¾—åˆ°æ•´æ•° 42 ã€‚</span><br><span class="line">ç”±äº &quot;42&quot; åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 42 ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2:</span><br><span class="line">è¾“å…¥ï¼šs &#x3D; &quot;   -42&quot;</span><br><span class="line">è¾“å‡ºï¼š-42</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ç¬¬ 1 æ­¥ï¼š&quot;   -42&quot;ï¼ˆè¯»å…¥å‰å¯¼ç©ºæ ¼ï¼Œä½†å¿½è§†æ‰ï¼‰</span><br><span class="line">            ^</span><br><span class="line">ç¬¬ 2 æ­¥ï¼š&quot;   -42&quot;ï¼ˆè¯»å…¥ &#39;-&#39; å­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœåº”è¯¥æ˜¯è´Ÿæ•°ï¼‰</span><br><span class="line">             ^</span><br><span class="line">ç¬¬ 3 æ­¥ï¼š&quot;   -42&quot;ï¼ˆè¯»å…¥ &quot;42&quot;ï¼‰</span><br><span class="line">               ^</span><br><span class="line">è§£æå¾—åˆ°æ•´æ•° -42 ã€‚</span><br><span class="line">ç”±äº &quot;-42&quot; åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º -42 ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 3:</span><br><span class="line">è¾“å…¥ï¼šs &#x3D; &quot;4193 with words&quot;</span><br><span class="line">è¾“å‡ºï¼š4193</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ç¬¬ 1 æ­¥ï¼š&quot;4193 with words&quot;ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰</span><br><span class="line">         ^</span><br><span class="line">ç¬¬ 2 æ­¥ï¼š&quot;4193 with words&quot;ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºè¿™é‡Œä¸å­˜åœ¨ &#39;-&#39; æˆ–è€… &#39;+&#39;ï¼‰</span><br><span class="line">         ^</span><br><span class="line">ç¬¬ 3 æ­¥ï¼š&quot;4193 with words&quot;ï¼ˆè¯»å…¥ &quot;4193&quot;ï¼›ç”±äºä¸‹ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¯»å…¥åœæ­¢ï¼‰</span><br><span class="line">             ^</span><br><span class="line">è§£æå¾—åˆ°æ•´æ•° 4193 ã€‚</span><br><span class="line">ç”±äº &quot;4193&quot; åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 4193 ã€‚</span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">0 &lt;&#x3D; s.length &lt;&#x3D; 200</span><br><span class="line">s ç”±è‹±æ–‡å­—æ¯ï¼ˆå¤§å†™å’Œå°å†™ï¼‰ã€æ•°å­—ï¼ˆ0-9ï¼‰ã€&#39; &#39;ã€&#39;+&#39;ã€&#39;-&#39; å’Œ &#39;.&#39; ç»„æˆ</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). è¿™æ˜¯ä¸€é“å¾ˆå…¸å‹çš„æ¨¡æ‹Ÿé¢˜ï¼Œå¯¹äºæ¨¡æ‹Ÿé¢˜ï¼Œå°‘ä¸äº†æ¡ä»¶åˆ¤æ–­ï¼Œå»ºè®®é‡‡ç”¨ switch æ¥ä»£æ›¿å¤§é‡çš„ ifâ€¦elseï¼Œè¿™æ ·ä»£ç çš„é€»è¾‘ä¼šæ¸…æ™°å¾ˆå¤šï¼›<br>(2). è¿™é“é¢˜å”¯ä¸€å€¼å¾—å…³å¿ƒçš„ç‚¹å°±æ˜¯è¶Šç•Œé—®é¢˜ï¼Œé‚£ä¹ˆå°±éœ€è¦å°†åˆæ³•æ•°å­—å­—ç¬¦ä¸²å–å‡ºåå…ˆå»é™¤å‰å¯¼é›¶ï¼Œç„¶åå†æ ¹æ®ç¬¦å·åˆ†åˆ«åˆ¤æ–­æ˜¯å¦è¶Šç•Œã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-1"><a href="#æ—¶é—´å¤æ‚åº¦-1" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N)</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myAtoi</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(s) == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isNeg := <span class="literal">false</span></span><br><span class="line">prefixLetter := <span class="literal">true</span></span><br><span class="line">str := []<span class="keyword">byte</span>&#123;&#125;</span><br><span class="line">maxNum, minNum := math.MaxInt32, <span class="number">-1</span>*math.MinInt32</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> prefixLetter &#123;</span><br><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line"><span class="keyword">case</span> s[i] == <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">isNeg = <span class="literal">true</span></span><br><span class="line">prefixLetter = <span class="literal">false</span></span><br><span class="line"><span class="keyword">case</span> s[i] == <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">prefixLetter = <span class="literal">false</span></span><br><span class="line"><span class="keyword">case</span> s[i] == <span class="string">&#x27; &#x27;</span>:</span><br><span class="line"><span class="keyword">case</span> s[i] == <span class="string">&#x27;.&#x27;</span> || (s[i] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; s[i] &lt;= <span class="string">&#x27;z&#x27;</span>):</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">case</span> s[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s[i] &lt;= <span class="string">&#x27;9&#x27;</span>:</span><br><span class="line">prefixLetter = <span class="literal">false</span></span><br><span class="line">str = <span class="built_in">append</span>(str, s[i])</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line"><span class="keyword">case</span> s[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s[i] &lt;= <span class="string">&#x27;9&#x27;</span>:</span><br><span class="line">str = <span class="built_in">append</span>(str, s[i])</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">i = <span class="built_in">len</span>(s)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(str) == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">x := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(str); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> str[i] != <span class="string">&#x27;0&#x27;</span> &#123;</span><br><span class="line">x = i</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ret := <span class="number">0</span></span><br><span class="line"><span class="keyword">if</span> !isNeg &#123;</span><br><span class="line"><span class="keyword">for</span> i:=x; i&lt;<span class="built_in">len</span>(str) ;i++ &#123;</span><br><span class="line">ret *= <span class="number">10</span></span><br><span class="line">ret += <span class="keyword">int</span>(str[i])-<span class="string">&#x27;0&#x27;</span></span><br><span class="line"><span class="keyword">if</span> ret &gt; maxNum &#123;</span><br><span class="line"><span class="keyword">return</span> maxNum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">for</span> i:=x; i&lt;<span class="built_in">len</span>(str); i++ &#123;</span><br><span class="line">ret *= <span class="number">10</span></span><br><span class="line">ret += <span class="keyword">int</span>(str[i])-<span class="string">&#x27;0&#x27;</span></span><br><span class="line"><span class="keyword">if</span> ret &gt; minNum &#123;</span><br><span class="line"><span class="keyword">return</span> math.MinInt32</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ret *= <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LeetCode269-ç«æ˜Ÿè¯å…¸&quot;&gt;&lt;a href=&quot;#LeetCode269-ç«æ˜Ÿè¯å…¸&quot; class=&quot;headerlink&quot; title=&quot;LeetCode269. ç«æ˜Ÿè¯å…¸&quot;&gt;&lt;/a&gt;&lt;a class=&quot;link&quot; href=&quot;https://leetcod</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 2ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/03/31/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%202%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/03/31/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%202%EF%BC%89/</id>
    <published>2022-03-30T22:00:00.000Z</published>
    <updated>2022-04-08T00:16:10.592Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LeetCode63-ä¸åŒè·¯å¾„-II"><a href="#LeetCode63-ä¸åŒè·¯å¾„-II" class="headerlink" title="LeetCode63. ä¸åŒè·¯å¾„ II"></a><a class="link" href="https://leetcode-cn.com/problems/unique-paths-ii/">LeetCode63. ä¸åŒè·¯å¾„ II<i class="fas fa-external-link-alt"></i></a></h2><p>#åŠ¨æ€è§„åˆ’</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ªÂ m x nÂ ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œStartâ€ ï¼‰ã€‚<br>æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œFinishâ€ï¼‰ã€‚<br>ç°åœ¨è€ƒè™‘ç½‘æ ¼ä¸­æœ‰éšœç¢ç‰©ã€‚é‚£ä¹ˆä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’å°†ä¼šæœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ<br>ç½‘æ ¼ä¸­çš„éšœç¢ç‰©å’Œç©ºä½ç½®åˆ†åˆ«ç”¨ 1 å’Œ 0 æ¥è¡¨ç¤ºã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br></pre></td></tr></table></figure><p><img lazyload src="/images/loading.svg" data-src="robot1.jpg" alt="avatar"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šobstacleGrid &#x3D; [[0,0,0],[0,1,0],[0,0,0]]</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line">è§£é‡Šï¼š3x3 ç½‘æ ¼çš„æ­£ä¸­é—´æœ‰ä¸€ä¸ªéšœç¢ç‰©ã€‚</span><br><span class="line">ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’ä¸€å…±æœ‰ 2 æ¡ä¸åŒçš„è·¯å¾„ï¼š</span><br><span class="line">1. å‘å³ -&gt; å‘å³ -&gt; å‘ä¸‹ -&gt; å‘ä¸‹</span><br><span class="line">2. å‘ä¸‹ -&gt; å‘ä¸‹ -&gt; å‘å³ -&gt; å‘å³</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2:</span><br></pre></td></tr></table></figure><p><img lazyload src="/images/loading.svg" data-src="robot2.jpg" alt="avatar"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šobstacleGrid &#x3D; [[0,1],[0,0]]</span><br><span class="line">è¾“å‡ºï¼š1</span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">m &#x3D;&#x3D;Â obstacleGrid.length</span><br><span class="line">n &#x3D;&#x3D;Â obstacleGrid[i].length</span><br><span class="line">1 &lt;&#x3D; m, n &lt;&#x3D; 100</span><br><span class="line">obstacleGrid[i][j] ä¸º 0 æˆ– 1</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). é‡‡ç”¨äºŒç»´é€’å½’çš„æ€è·¯ï¼Œæœ¬é¢˜æ˜¯<a class="link" href="https://leetcode-cn.com/problems/unique-paths/">LeetCode62. ä¸åŒè·¯å¾„<i class="fas fa-external-link-alt"></i></a>çš„å˜ç§ï¼Œå®é™…ä¸Šæ˜¯ä¸€é“é¢˜ï¼›<br>(2). åœ¨å¤„ç†åˆå§‹æ¡ä»¶ï¼ˆç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ï¼‰é‡åˆ°éšœç¢ç‰©æ—¶ï¼Œéšœç¢ç‰©æ‰€åœ¨çš„æ ¼å­å³ä¹‹åçš„æ ¼å­éƒ½å±äºä¸å¯åˆ°è¾¾çš„åæ ‡ï¼Œé€€å‡ºå¾ªç¯ï¼›<br>(3). åœ¨é€’å½’è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°éšœç¢ç‰©ï¼Œç›´æ¥åˆ¤æ–­ä¸ºä¸å¯åˆ°è¾¾ <code>dp[i][j]=0</code>ï¼Œå¦åˆ™å½“å‰æ ¼å­çš„è·¯å¾„æ•°ç­‰äºä¸Šé¢ã€å·¦é¢çš„è·¯å¾„æ•°ä¹‹å’Œã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O($N^2$).</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">uniquePathsWithObstacles</span><span class="params">(obstacleGrid [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> obstacleGrid[<span class="number">0</span>][<span class="number">0</span>] == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">m, n := <span class="built_in">len</span>(obstacleGrid), <span class="built_in">len</span>(obstacleGrid[<span class="number">0</span>])</span><br><span class="line">dp := <span class="built_in">make</span>([][]<span class="keyword">int</span>, m)</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;m; i++ &#123;</span><br><span class="line">dp[i] = <span class="built_in">make</span>([]<span class="keyword">int</span>, n)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;m; i++ &#123;</span><br><span class="line"><span class="keyword">if</span> obstacleGrid[i][<span class="number">0</span>] != <span class="number">1</span> &#123;</span><br><span class="line">dp[i][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;n; i++ &#123;</span><br><span class="line"><span class="keyword">if</span> obstacleGrid[<span class="number">0</span>][i] != <span class="number">1</span> &#123;</span><br><span class="line">dp[<span class="number">0</span>][i] = <span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;m; i++ &#123;</span><br><span class="line"><span class="keyword">for</span> j:=<span class="number">1</span>; j&lt;n; j++ &#123;</span><br><span class="line"><span class="keyword">if</span> obstacleGrid[i][j] == <span class="number">1</span> &#123;</span><br><span class="line">dp[i][j] = <span class="number">0</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">dp[i][j] = dp[i<span class="number">-1</span>][j]+dp[i][j<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> dp[m<span class="number">-1</span>][n<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode498-å¯¹è§’çº¿éå†"><a href="#LeetCode498-å¯¹è§’çº¿éå†" class="headerlink" title="LeetCode498. å¯¹è§’çº¿éå†"></a><a class="link" href="https://leetcode-cn.com/problems/diagonal-traverse/">LeetCode498. å¯¹è§’çº¿éå†<i class="fas fa-external-link-alt"></i></a></h2><p>#æ¨¡æ‹Ÿé¢˜</p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º <code>m x n</code> çš„çŸ©é˜µ <code>mat</code> ï¼Œè¯·ä»¥å¯¹è§’çº¿éå†çš„é¡ºåºï¼Œç”¨ä¸€ä¸ªæ•°ç»„è¿”å›è¿™ä¸ªçŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br></pre></td></tr></table></figure><p><img lazyload src="/images/loading.svg" data-src="diag1-grid.jpg" alt="avatar"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šmat &#x3D; [[1,2,3],[4,5,6],[7,8,9]]</span><br><span class="line">è¾“å‡ºï¼š[1,2,4,7,5,3,6,8,9]</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2:</span><br><span class="line">è¾“å…¥ï¼šmat &#x3D; [[1,2],[3,4]]</span><br><span class="line">è¾“å‡ºï¼š[1,2,3,4]</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). æœ¬é¢˜è¦å¤„ç†çš„ç»†èŠ‚æ¯”è¾ƒå¤šã€‚é¦–å…ˆè§£å†³è¾¹ç•Œé—®é¢˜ï¼Œå½“ <code>mat</code> åªæœ‰ä¸€è¡Œæˆ–ä¸€åˆ—çš„æ—¶å€™ï¼Œç›´æ¥è¾“å‡ºè¿™ä¸€è¡Œæˆ–ä¸€åˆ—ï¼›<br>(2). è¦å…³æ³¨ä¸‰ä¸ªå’Œè½¬å‘æœ‰å…³çš„æƒ…å†µï¼š<code>direction</code> ç”¨äºæè¿°å½“å‰å‰è¿›çš„æ–¹å‘ï¼Œå‘å³ä¸Šæ˜¯ä¸º <code>true</code>ï¼Œå‘å·¦ä¸‹æ—¶ä¸º <code>false</code>ï¼›<code>rowHalf</code> ç”¨äºæè¿°åœ¨å³ä¸Šæ–¹å‘å‰è¿›åˆ°é¡¶æ ¼æ—¶ï¼Œæ¥ä¸‹æ¥æ˜¯è¦å‘å³è¿˜æ˜¯å‘ä¸‹ç§»åŠ¨ä¸€æ ¼ï¼›<code>columnHalf</code> ç”¨äºæè¿°åœ¨å·¦ä¸‹æ–¹å‘å‰è¿›åˆ°é¡¶æ ¼æ—¶æ¥ä¸‹æ¥æ˜¯è¦å‘ä¸‹è¿˜æ˜¯å‘å³å‰è¿›ä¸€æ ¼ã€‚å®é™…ä¸Šå°±æ˜¯åˆ¤æ–­æœ‰æ²¡æœ‰åˆ†åˆ«åœ¨è¡Œå’Œåˆ—ä¸Šèµ°è¿‡ <code>mat</code> çš„ä¸€åŠä½ç½®ã€‚<br>(3). å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œå½“å‰ä½ç½®çš„åæ ‡å’Œ <code>i+j</code> åœ¨å¤§äºç­‰äºè¡Œå·æˆ–åˆ—å·çš„æ—¶å€™ï¼Œèµ°åˆ°é¡¶æ ¼åè½¬å‘çš„æ–¹å‘éœ€è¦å‘ç”Ÿæ”¹å˜ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-1"><a href="#æ—¶é—´å¤æ‚åº¦-1" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O($M*N$)</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findDiagonalOrder</span><span class="params">(mat [][]<span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">ret := []<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">m, n := <span class="built_in">len</span>(mat), <span class="built_in">len</span>(mat[<span class="number">0</span>])</span><br><span class="line"><span class="keyword">if</span> m == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> mat[<span class="number">0</span>]</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> n == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;m; i++ &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, mat[i][<span class="number">0</span>])</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">i, j := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">direction := <span class="literal">true</span></span><br><span class="line">rowHalf := <span class="literal">true</span></span><br><span class="line">columnHalf := <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i&lt;m &amp;&amp; j&lt;n &#123;</span><br><span class="line">ret = <span class="built_in">append</span>(ret, mat[i][j])</span><br><span class="line"><span class="keyword">if</span> (i == <span class="number">0</span> &amp;&amp; direction &amp;&amp; rowHalf) || (j == n<span class="number">-1</span> &amp;&amp; direction &amp;&amp; !rowHalf) &#123;</span><br><span class="line"><span class="keyword">if</span> rowHalf &#123;</span><br><span class="line"><span class="keyword">if</span> j &lt; n<span class="number">-1</span> &#123;</span><br><span class="line">j++</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">i++</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">i++</span><br><span class="line">&#125;</span><br><span class="line">direction = <span class="literal">false</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="number">0</span> &amp;&amp; !direction) || (i == m<span class="number">-1</span> &amp;&amp; !direction &amp;&amp; !columnHalf) &#123;</span><br><span class="line"><span class="keyword">if</span> columnHalf &#123;</span><br><span class="line"><span class="keyword">if</span> i &lt; m<span class="number">-1</span> &#123;</span><br><span class="line">i++</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">j++</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">j++</span><br><span class="line">&#125;</span><br><span class="line">direction = <span class="literal">true</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> direction &#123;</span><br><span class="line">i--</span><br><span class="line">j++</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">i++</span><br><span class="line">j--</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> i+j &gt;= m<span class="number">-1</span> &#123;</span><br><span class="line">columnHalf = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> i+j &gt;= n<span class="number">-1</span> &#123;</span><br><span class="line">rowHalf = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LeetCode83-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ "><a href="#LeetCode83-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ " class="headerlink" title="LeetCode83. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ "></a><a class="link" href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list/">LeetCode83. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ <i class="fas fa-external-link-alt"></i></a></h2><p>#é“¾è¡¨</p><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ä¸ªå·²æ’åºçš„é“¾è¡¨çš„å¤´Â <code>head</code>Â ï¼ŒÂ åˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚è¿”å›å·²æ’åºçš„é“¾è¡¨Â ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br><span class="line">è¾“å…¥ï¼šhead &#x3D; [1,1,2]</span><br><span class="line">è¾“å‡ºï¼š[1,2]</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2:</span><br><span class="line">è¾“å…¥ï¼šhead &#x3D; [1,1,2,3,3]</span><br><span class="line">è¾“å‡ºï¼š[1,2,3]</span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">é“¾è¡¨ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ [0, 300] å†…</span><br><span class="line">100 &lt;&#x3D; Node.val &lt;&#x3D; 100</span><br><span class="line">é¢˜ç›®æ•°æ®ä¿è¯é“¾è¡¨å·²ç»æŒ‰å‡åºæ’åˆ—</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). è¦åˆ é™¤é‡å¤çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è¦å®æ—¶ç»´æŠ¤ä¸‰ä¸ªä½ç½®çš„èŠ‚ç‚¹ <code>pre</code>ã€<code>cur</code>ã€<code>next</code>ï¼Œå‡è®¾è¦åˆ é™¤ <code>cur</code>ï¼Œé‚£ä¹ˆåˆ é™¤ä¹‹åè¿˜è¦å°† <code>cur</code> é‡æ–°æŒ‡å‘ <code>next</code>ï¼›<br>(2). å¦‚æœ <code>pre</code> å’Œ <code>cur</code> çš„å€¼ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆåŒæ—¶å‘åç§»åŠ¨ä¸€ä½ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-2"><a href="#æ—¶é—´å¤æ‚åº¦-2" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N).</p><h3 id="è§£é¢˜ä»£ç -2"><a href="#è§£é¢˜ä»£ç -2" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* type ListNode struct &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* Val int</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* Next *ListNode</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deleteDuplicates</span><span class="params">(head *ListNode)</span> *<span class="title">ListNode</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> head == <span class="literal">nil</span> || head.Next == <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> head</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre, cur := head, head.Next</span><br><span class="line"><span class="keyword">for</span> cur != <span class="literal">nil</span> &#123;</span><br><span class="line">next := cur.Next</span><br><span class="line"><span class="keyword">if</span> cur.Val == pre.Val &#123;</span><br><span class="line">pre.Next = next</span><br><span class="line">cur = next</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">pre = cur</span><br><span class="line">cur = next</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> head</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LeetCode63-ä¸åŒè·¯å¾„-II&quot;&gt;&lt;a href=&quot;#LeetCode63-ä¸åŒè·¯å¾„-II&quot; class=&quot;headerlink&quot; title=&quot;LeetCode63. ä¸åŒè·¯å¾„ II&quot;&gt;&lt;/a&gt;&lt;a class=&quot;link&quot; href=&quot;https://l</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>æ—©èµ·åˆ·é¢˜ï¼ˆDay 1ï¼‰</title>
    <link href="http://jiahaohong1997.github.io/2022/03/30/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%201%EF%BC%89/"/>
    <id>http://jiahaohong1997.github.io/2022/03/30/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98%EF%BC%88Day%201%EF%BC%89/</id>
    <published>2022-03-29T22:00:00.000Z</published>
    <updated>2022-04-08T00:17:59.560Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LeetCode179-æœ€å¤§æ•°"><a href="#LeetCode179-æœ€å¤§æ•°" class="headerlink" title="LeetCode179. æœ€å¤§æ•°"></a><a class="link" href="https://leetcode-cn.com/problems/largest-number/">LeetCode179. æœ€å¤§æ•°<i class="fas fa-external-link-alt"></i></a></h2><p>#å­—å…¸åº</p><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€ç»„éè´Ÿæ•´æ•° <code>nums</code>ï¼Œé‡æ–°æ’åˆ—æ¯ä¸ªæ•°çš„é¡ºåºï¼ˆæ¯ä¸ªæ•°ä¸å¯æ‹†åˆ†ï¼‰ä½¿ä¹‹ç»„æˆä¸€ä¸ªæœ€å¤§çš„æ•´æ•°ã€‚<br>æ³¨æ„ï¼šè¾“å‡ºç»“æœå¯èƒ½éå¸¸å¤§ï¼Œæ‰€ä»¥ä½ éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²è€Œä¸æ˜¯æ•´æ•°ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥ï¼šnums &#x3D; [10,2]</span><br><span class="line">è¾“å‡ºï¼š&quot;210&quot;</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹Â 2ï¼š</span><br><span class="line">è¾“å…¥ï¼šnums &#x3D; [3,30,34,5,9]</span><br><span class="line">è¾“å‡ºï¼š&quot;9534330&quot;</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1).  æœ¬é¢˜éœ€è¦æŒ‰ç…§å­—å…¸åºæ’åºæ¥ç”Ÿæˆæœ€ç»ˆçš„å­—ç¬¦ä¸²ï¼›<br>(2). å½“ç»™å®šçš„æ•°ç»„ä¸­å…ƒç´ çš„æœ€é«˜ä½éƒ½ä¸ç›¸ç­‰æ—¶ï¼Œæƒ…å†µæœ€ç®€å•ï¼Œç›´æ¥è¾“å‡ºå­—å…¸åºå³å¯ï¼›<br>(3). å½“å‡ºç° $4$ å’Œ $42$ è¿™ç§ç±»å‹çš„å­åºåˆ—æ—¶ï¼Œå¦‚æœæŒ‰ç…§å­—å…¸åºæ¥æ’åºåªèƒ½å¾—åˆ° $424$ï¼Œä½†å®é™…ä¸Šæœ€å¤§å€¼æ˜¯ $442$ï¼Œå› æ­¤å¯çŸ¥æ ¹æ®å­—å…¸åºæ’åºåªèƒ½å¾—åˆ°å±€éƒ¨æœ€å¤§å€¼ <code>ans</code>ï¼Œæˆ‘ä»¬è¦æ±‚çš„æ˜¯å…¨å±€æœ€å¤§å€¼ <code>max</code>ï¼›<br>(4). å¯ä»¥åœ¨æ’åºçš„æ—¶å€™æ›´æ”¹ä¸€ä¸‹æ’åºæ¡ä»¶ï¼Œä¸ä»¥å­—å…¸åºä¸ºæ’åºæ¡ä»¶ï¼Œè€Œæ˜¯ä»¥ä¸¤æ•°æ‹¼æ¥åçš„å®é™…å¤§å°æ¥æ’åºã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(Nlog(N))ã€‚å› ä¸ºæœ‰æ’åºç®—æ³•ã€‚</p><h3 id="è§£é¢˜ä»£ç "><a href="#è§£é¢˜ä»£ç " class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">largestNumber</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line"></span><br><span class="line">sort.Slice(nums, <span class="function"><span class="keyword">func</span><span class="params">(i,j <span class="keyword">int</span>)</span><span class="title">bool</span></span> &#123;</span><br><span class="line">x, y := nums[i], nums[j]</span><br><span class="line">sx, sy := <span class="number">10</span>, <span class="number">10</span></span><br><span class="line"><span class="keyword">for</span> sx &lt;= x &#123;</span><br><span class="line">sx *= <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> sy &lt;= y &#123;</span><br><span class="line">sy *= <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> sy*x+y &gt; sx*y+x</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> nums[<span class="number">0</span>] == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ret := <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">ret += strconv.Itoa(nums[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»£ç ç»†èŠ‚"><a href="#ä»£ç ç»†èŠ‚" class="headerlink" title="ä»£ç ç»†èŠ‚"></a>ä»£ç ç»†èŠ‚</h3><p>&emsp;&emsp;åœ¨æ’åºæ¡ä»¶ä¸­ï¼Œæˆ‘ä»¬ç»´æŠ¤äº†ä¸¤ä¸ªå˜é‡ <code>sx</code> å’Œ <code>sy</code>ï¼Œè¿™ä¸¤ä¸ªå˜é‡ä¼šåœ¨æ‹¼æ¥æ“ä½œä¸­ä¸ºä¸¤ä¸ªæ•°ç•™å‡ºå¯¹åº”çš„ä½ç½®ï¼Œæ–¹ä¾¿æˆ‘ä»¬çš„æ‹¼æ¥æ“ä½œï¼Œé¿å…äº†è½¬æ¢æˆå­—ç¬¦ä¸²åå†è¿›è¡Œæ‹¼æ¥ã€‚</p><h2 id="LeetCode36-æœ‰æ•ˆçš„æ•°ç‹¬"><a href="#LeetCode36-æœ‰æ•ˆçš„æ•°ç‹¬" class="headerlink" title="LeetCode36. æœ‰æ•ˆçš„æ•°ç‹¬"></a><a class="link" href="https://leetcode-cn.com/problems/valid-sudoku/">LeetCode36. æœ‰æ•ˆçš„æ•°ç‹¬<i class="fas fa-external-link-alt"></i></a></h2><p>#æ¨¡æ‹Ÿé¢˜</p><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>è¯·ä½ åˆ¤æ–­ä¸€ä¸ª <code>9 x 9</code> çš„æ•°ç‹¬æ˜¯å¦æœ‰æ•ˆã€‚åªéœ€è¦ <strong>æ ¹æ®ä»¥ä¸‹è§„åˆ™</strong> ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚</p><ol><li> æ•°å­—Â <code>1-9</code>Â åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</li><li> æ•°å­—Â <code>1-9</code>Â åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</li><li>æ•°å­—Â <code>1-9</code>Â åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„Â <code>3x3</code>Â å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰<br>æ³¨æ„ï¼š<br>ä¸€ä¸ªæœ‰æ•ˆçš„æ•°ç‹¬ï¼ˆéƒ¨åˆ†å·²è¢«å¡«å……ï¼‰ä¸ä¸€å®šæ˜¯å¯è§£çš„ã€‚<br>åªéœ€è¦æ ¹æ®ä»¥ä¸Šè§„åˆ™ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚<br>ç©ºç™½æ ¼ç”¨Â <code>&#39;.&#39;</code>Â è¡¨ç¤ºã€‚</li></ol></blockquote> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br></pre></td></tr></table></figure><p> <img lazyload src="/images/loading.svg" data-src="shudu.png" alt="avatar"><br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"> è¾“å…¥ï¼šboard &#x3D; </span><br><span class="line">[[&quot;5&quot;,&quot;3&quot;,&quot;.&quot;,&quot;.&quot;,&quot;7&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;1&quot;,&quot;9&quot;,&quot;5&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;9&quot;,&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;3&quot;]</span><br><span class="line">,[&quot;4&quot;,&quot;.&quot;,&quot;.&quot;,&quot;8&quot;,&quot;.&quot;,&quot;3&quot;,&quot;.&quot;,&quot;.&quot;,&quot;1&quot;]</span><br><span class="line">,[&quot;7&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;2&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;2&quot;,&quot;8&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;4&quot;,&quot;1&quot;,&quot;9&quot;,&quot;.&quot;,&quot;.&quot;,&quot;5&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;7&quot;,&quot;9&quot;]]</span><br><span class="line">è¾“å‡ºï¼štrue</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2:</span><br><span class="line">è¾“å…¥ï¼šboard &#x3D; </span><br><span class="line">[[&quot;8&quot;,&quot;3&quot;,&quot;.&quot;,&quot;.&quot;,&quot;7&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;1&quot;,&quot;9&quot;,&quot;5&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;9&quot;,&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;3&quot;]</span><br><span class="line">,[&quot;4&quot;,&quot;.&quot;,&quot;.&quot;,&quot;8&quot;,&quot;.&quot;,&quot;3&quot;,&quot;.&quot;,&quot;.&quot;,&quot;1&quot;]</span><br><span class="line">,[&quot;7&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;2&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;2&quot;,&quot;8&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;4&quot;,&quot;1&quot;,&quot;9&quot;,&quot;.&quot;,&quot;.&quot;,&quot;5&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;7&quot;,&quot;9&quot;]]</span><br><span class="line">è¾“å‡ºï¼šfalse</span><br><span class="line">è§£é‡Šï¼šé™¤äº†ç¬¬ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªæ•°å­—ä» 5 æ”¹ä¸º 8 ä»¥å¤–ï¼Œç©ºæ ¼å†…å…¶ä»–æ•°å­—å‡ä¸ ç¤ºä¾‹1 ç›¸åŒã€‚ ä½†ç”±äºä½äºå·¦ä¸Šè§’çš„ 3x3 å®«å†…æœ‰ä¸¤ä¸ª 8 å­˜åœ¨, å› æ­¤è¿™ä¸ªæ•°ç‹¬æ˜¯æ— æ•ˆçš„ã€‚</span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line">board.length &#x3D;&#x3D; 9</span><br><span class="line">board[i].length &#x3D;&#x3D; 9</span><br><span class="line">board[i][j] æ˜¯ä¸€ä½æ•°å­—ï¼ˆ1-9ï¼‰æˆ–è€… &#39;.&#39;</span><br></pre></td></tr></table></figure></p><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p> (1). å…ˆåˆ¤æ–­è¡Œä¸Šæ˜¯å¦ç¬¦åˆæ ‡å‡†ï¼›<br> (2). å†åˆ¤æ–­åˆ—ä¸Šæ˜¯å¦ç¬¦åˆæ ‡å‡†ï¼›<br> (3). æœ€åä¼ é€’æ¯ä¸ªä¹å®«æ ¼çš„å·¦ä¸Šè§’åæ ‡æ¥åˆ¤æ–­æ¯ä¸ªä¹å®«æ ¼æ˜¯å¦ç¬¦åˆæ ‡å‡†ã€‚</p><h3 id="è§£é¢˜ä»£ç -1"><a href="#è§£é¢˜ä»£ç -1" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3> <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isValidSudoku</span><span class="params">(board [][]<span class="keyword">byte</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> checkRow <span class="function"><span class="keyword">func</span><span class="params">(index <span class="keyword">int</span>)</span> <span class="title">bool</span></span></span><br><span class="line">checkRow = <span class="function"><span class="keyword">func</span><span class="params">(index <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">check := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">row := board[index]</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(row); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> row[i] == <span class="string">&#x27;.&#x27;</span> &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> check[<span class="keyword">int</span>(row[i])-<span class="string">&#x27;0&#x27;</span>] == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">check[<span class="keyword">int</span>(row[i])-<span class="string">&#x27;0&#x27;</span>] = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> checkColumn <span class="function"><span class="keyword">func</span><span class="params">(index <span class="keyword">int</span>)</span> <span class="title">bool</span></span></span><br><span class="line">checkColumn = <span class="function"><span class="keyword">func</span><span class="params">(index <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">check := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="number">9</span>; i++ &#123;</span><br><span class="line"><span class="keyword">if</span> board[i][index] == <span class="string">&#x27;.&#x27;</span> &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> check[<span class="keyword">int</span>(board[i][index])-<span class="string">&#x27;0&#x27;</span>] == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">check[<span class="keyword">int</span>(board[i][index])-<span class="string">&#x27;0&#x27;</span>] = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> checkGrid <span class="function"><span class="keyword">func</span><span class="params">(r,c <span class="keyword">int</span>)</span> <span class="title">bool</span></span></span><br><span class="line">checkGrid = <span class="function"><span class="keyword">func</span><span class="params">(r,c <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">check := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> i:=r; i&lt;r+<span class="number">3</span>; i++ &#123;</span><br><span class="line"><span class="keyword">for</span> j:=c; j&lt;c+<span class="number">3</span>; j++ &#123;</span><br><span class="line"><span class="keyword">if</span> board[i][j] == <span class="string">&#x27;.&#x27;</span> &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> check[<span class="keyword">int</span>(board[i][j])-<span class="string">&#x27;0&#x27;</span>] == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">check[<span class="keyword">int</span>(board[i][j])-<span class="string">&#x27;0&#x27;</span>] = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="number">9</span>; i++ &#123;</span><br><span class="line"><span class="keyword">if</span> !checkRow(i) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> !checkColumn(i) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;=<span class="number">6</span>; i=i+<span class="number">3</span> &#123;</span><br><span class="line"><span class="keyword">for</span> j:=<span class="number">0</span>; j&lt;=<span class="number">6</span>; j=j+<span class="number">3</span> &#123;</span><br><span class="line"><span class="keyword">if</span> !checkGrid(i,j) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‰‘æŒ‡-Offer-56-I-æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°"><a href="#å‰‘æŒ‡-Offer-56-I-æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°" class="headerlink" title="å‰‘æŒ‡ Offer 56 - I. æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°"></a><a class="link" href="https://leetcode-cn.com/problems/shu-zu-zhong-shu-zi-chu-xian-de-ci-shu-lcof/">å‰‘æŒ‡ Offer 56 - I. æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°<i class="fas fa-external-link-alt"></i></a></h2><p>#ä½è¿ç®—</p><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ä¸€ä¸ªæ•´å‹æ•°ç»„ <code>nums</code> é‡Œé™¤ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br><span class="line">è¾“å…¥ï¼šnums &#x3D; [4,1,4,6]</span><br><span class="line">è¾“å‡ºï¼š[1,6] æˆ– [6,1]</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2:</span><br><span class="line">è¾“å…¥ï¼šnums &#x3D; [1,2,10,4,1,4,3,3]</span><br><span class="line">è¾“å‡ºï¼š[2,10] æˆ– [10,2]</span><br><span class="line"></span><br><span class="line">é™åˆ¶ï¼š</span><br><span class="line">2 &lt;&#x3D; nums.length &lt;&#x3D; 10000</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ä¸€ç‚¹ï¼šç›¸åŒçš„æ•°å­—å¼‚æˆ–ç­‰äº 0ï¼Œå¹¶ä¸”å¼‚æˆ–æ“ä½œå…·å¤‡äº¤æ¢æ€§ã€‚æ‰€ä»¥æ•´ä¸ªæ•°ç»„çš„å¼‚æˆ–ç»“æœç­‰äºä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°çš„å¼‚æˆ–ï¼›<br>(2). ä¸¤ä¸ªæ•°çš„å¼‚æˆ–ç»“æœåœ¨æŸä¸€ä¸ªäºŒè¿›åˆ¶ä½ä¸Šæ˜¯ $1$ï¼Œè¯´æ˜è¿™ä¸¤ä¸ªæ•°åœ¨è¯¥ä½ä¸Šä¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€æ€§è´¨ï¼Œå°†æ•°ç»„ä¸­æ‰€æœ‰çš„æ•°å­—æ ¹æ®è¯¥äºŒè¿›åˆ¶ä½ä¸Šæ˜¯ $1$  æˆ– $0$ åˆ†ç±»ä¸ºä¸¤ç»„ï¼›<br>(3). ç»„å†…çš„å…ƒç´ å†è‡ªè¡Œè¿›è¡Œå¼‚æˆ–ï¼Œé‚£ä¹ˆæœ€ç»ˆä¸¤ç»„çš„ç»“æœå°±æ˜¯ä¸¤ä¸ªåªå‡ºç°è¿‡ä¸€æ¬¡çš„æ•°ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-1"><a href="#æ—¶é—´å¤æ‚åº¦-1" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N).</p><h3 id="è§£é¢˜ä»£ç -2"><a href="#è§£é¢˜ä»£ç -2" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">singleNumbers</span><span class="params">(nums []<span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">2</span> &#123;</span><br><span class="line"><span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">x := nums[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">x ^= nums[i]</span><br><span class="line">&#125;</span><br><span class="line">c := x&amp;(-x)</span><br><span class="line"></span><br><span class="line">a, b := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">x = nums[i]</span><br><span class="line"><span class="keyword">if</span> x&amp;c == c &#123;</span><br><span class="line">a ^= nums[i]</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">b ^= nums[i]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> []<span class="keyword">int</span>&#123;a,b&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»£ç ç»†èŠ‚-1"><a href="#ä»£ç ç»†èŠ‚-1" class="headerlink" title="ä»£ç ç»†èŠ‚"></a>ä»£ç ç»†èŠ‚</h3><p>&emsp;&amp;emspåœ¨æ‰¾ç¬¬ä¸€ä¸ªä¸åŒçš„äºŒè¿›åˆ¶ä½çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>x&amp;(-x)</code> çš„å½¢å¼ã€‚é¦–å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œè®¡ç®—ä¸€ä¸ªæ­£æ•°çš„ç›¸åæ•°ç­‰äºå°†å…¶äºŒè¿›åˆ¶è¡¨ç¤ºå…¨éƒ¨<strong>å–åå†åŠ  1</strong>ï¼Œä¾‹å¦‚ $12 = 01100$ï¼Œé‚£ä¹ˆ $-12 = 10100$ï¼Œå†è¿›è¡Œ <code>&amp;</code> è¿ç®—å¯å¾— $12 &amp; -12 = 00100$ï¼Œè¿™æ ·å°±å°†æœ€ä½ä½ä¸º $1$ çš„äºŒè¿›åˆ¶æ•°è¡¨ç¤ºäº†å‡ºæ¥ã€‚ä¹‹ååªè¦å°†æ•°ç»„ä¸­æ‰€æœ‰çš„æ•°ä¸è¯¥æ•°è¿›è¡Œ <code>&amp;</code> æ“ä½œå°±èƒ½å®Œæˆåˆ†ç±»ã€‚</p><h2 id="å‰‘æŒ‡-Offer-56-II-æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°-II"><a href="#å‰‘æŒ‡-Offer-56-II-æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°-II" class="headerlink" title="å‰‘æŒ‡ Offer 56 - II. æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•° II"></a><a class="link" href="https://leetcode-cn.com/problems/shu-zu-zhong-shu-zi-chu-xian-de-ci-shu-ii-lcof/">å‰‘æŒ‡ Offer 56 - II. æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•° II<i class="fas fa-external-link-alt"></i></a></h2><h3 id="é¢˜ç›®æè¿°-3"><a href="#é¢˜ç›®æè¿°-3" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>åœ¨ä¸€ä¸ªæ•°ç»„ <code>nums</code> ä¸­é™¤ä¸€ä¸ªæ•°å­—åªå‡ºç°ä¸€æ¬¡ä¹‹å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸‰æ¬¡ã€‚è¯·æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹ 1:</span><br><span class="line">è¾“å…¥ï¼šnums &#x3D; [3,4,3,3]</span><br><span class="line">è¾“å‡ºï¼š4</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2:</span><br><span class="line">è¾“å…¥ï¼šnums &#x3D; [9,1,7,9,7,9,7]</span><br><span class="line">è¾“å‡ºï¼š1</span><br><span class="line"></span><br><span class="line">é™åˆ¶ï¼š</span><br><span class="line">1 &lt;&#x3D; nums.length &lt;&#x3D; 10000</span><br><span class="line">1 &lt;&#x3D; nums[i] &lt; 2^31</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-3"><a href="#è§£é¢˜æ€è·¯-3" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>(1). å› ä¸ºçº¦å®šäº†é™¤äº†ä¸€ä¸ªæ•°å­—å¤–ï¼Œåˆ«çš„æ•°å­—éƒ½ä¼šå‡ºç° 3 æ¬¡ï¼Œé‚£ä¹ˆä¹Ÿå°±æ„å‘³ç€æ¯ä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶ä½ä¼šå‡ºç° 3 çš„å€æ•°ï¼›<br>(2). å½“æŸä¸€ä¸ªäºŒè¿›åˆ¶ä½ä¸Šä¸æ˜¯ 3 çš„å€æ•°ï¼Œé‚£ä¹ˆä¹Ÿå°±æ„å‘³ç€æ˜¯é‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„æ•°å­—è‚¯å®šå æ®äº†ä¸€æ¬¡è¯¥äºŒè¿›åˆ¶ä½ï¼›<br>(3). åˆ©ç”¨ (2) ä¸­æ‰¾åˆ°çš„äºŒè¿›åˆ¶ä½ç»„æˆè¿™ä¸ªæ•°ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦-2"><a href="#æ—¶é—´å¤æ‚åº¦-2" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>O(N).</p><h3 id="è§£é¢˜ä»£ç -3"><a href="#è§£é¢˜ä»£ç -3" class="headerlink" title="è§£é¢˜ä»£ç "></a>è§£é¢˜ä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">singleNumber</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">bitCount := [<span class="number">32</span>]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">x := nums[i]</span><br><span class="line">j := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> x != <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">if</span> x ^ (x<span class="number">-1</span>) == <span class="number">1</span> &#123;</span><br><span class="line">bitCount[j]++</span><br><span class="line">&#125;</span><br><span class="line">j++</span><br><span class="line">x &gt;&gt;= <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ret := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(bitCount); i++ &#123;</span><br><span class="line">x := bitCount[i]%<span class="number">3</span></span><br><span class="line">ret += x*<span class="keyword">int</span>(math.Pow(<span class="number">2</span>,<span class="keyword">float64</span>(i)))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»£ç ç»†èŠ‚-2"><a href="#ä»£ç ç»†èŠ‚-2" class="headerlink" title="ä»£ç ç»†èŠ‚"></a>ä»£ç ç»†èŠ‚</h3><p>&emsp;&emsp;æ ¹æ®æœ¬é¢˜çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½æ¨å¹¿ï¼Œå¯¹äºæŸä¸ªæ•°ç»„ï¼Œé™¤äº†ä¸€ä¸ªæ•°åªå‡ºç°ä¸€æ¬¡å¤–ï¼Œå…¶ä½™çš„æ•°éƒ½å‡ºç°äº† $m$ æ¬¡ï¼Œé‚£ä¹ˆåˆ©ç”¨è¿™ç§ç‰¹æ€§ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¾ˆè½»æ˜“åœ°æ‰¾åˆ°è¿™ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„æ•°ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LeetCode179-æœ€å¤§æ•°&quot;&gt;&lt;a href=&quot;#LeetCode179-æœ€å¤§æ•°&quot; class=&quot;headerlink&quot; title=&quot;LeetCode179. æœ€å¤§æ•°&quot;&gt;&lt;/a&gt;&lt;a class=&quot;link&quot; href=&quot;https://leetcode-c</summary>
      
    
    
    
    <category term="ç®—æ³•å’Œæ•°æ®ç»“æ„" scheme="http://jiahaohong1997.github.io/categories/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="æ—©èµ·åˆ·é¢˜" scheme="http://jiahaohong1997.github.io/tags/%E6%97%A9%E8%B5%B7%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>channel çš„ range å’Œ select æ¯”è¾ƒ</title>
    <link href="http://jiahaohong1997.github.io/2022/03/19/channel%20%E7%9A%84%20range%20%E5%92%8C%20select%20%E6%AF%94%E8%BE%83/"/>
    <id>http://jiahaohong1997.github.io/2022/03/19/channel%20%E7%9A%84%20range%20%E5%92%8C%20select%20%E6%AF%94%E8%BE%83/</id>
    <published>2022-03-19T10:14:00.000Z</published>
    <updated>2022-03-21T16:47:55.751Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡æ˜¯å¯¹ <a class="link" href="http://golangtutorials.blogspot.com/2011/06/channels-in-go-range-and-select.html">Channels in Go - range and select<i class="fas fa-external-link-alt"></i></a> çš„å­¦ä¹ </p></blockquote><h1 id="range"><a href="#range" class="headerlink" title="range"></a>range</h1><p>&emsp;&emsp;åœ¨ goroutine ä¹‹é—´ä½¿ç”¨ channel é€šä¿¡æ—¶ï¼Œæ•°æ®æ¥æ”¶æ–¹æ€»æ˜¯é¢ä¸´è¿™æ ·çš„é—®é¢˜ï¼šä»€ä¹ˆæ—¶å€™åœæ­¢ç­‰å¾…æ•°æ®ï¼Ÿè¿˜ä¼šæœ‰æ›´å¤šçš„æ•°æ®ä¹ˆï¼Œè¿˜æ˜¯æ‰€æœ‰å†…å®¹éƒ½å®Œæˆäº†ï¼Ÿæˆ‘åº”è¯¥ç»§ç»­ç­‰å¾…è¿˜æ˜¯è¯¥åšåˆ«çš„äº†ï¼Ÿå¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªå¯é€‰çš„æ–¹å¼æ˜¯ï¼ŒæŒç»­çš„è®¿é—®æ•°æ®æºå¹¶æ£€æŸ¥channelæ˜¯å¦å·²ç»å…³é—­ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯é«˜æ•ˆçš„è§£å†³æ–¹å¼ã€‚Goæä¾›äº†<code>range</code>å…³é”®å­—ï¼Œå°†å…¶ä½¿ç”¨åœ¨channelä¸Šæ—¶ï¼Œä¼šè‡ªåŠ¨ç­‰å¾…channelçš„åŠ¨ä½œä¸€ç›´åˆ°channelè¢«å…³é—­ã€‚</p><p>ä¸‹é¢é€šè¿‡ä¸€æ®µç¤ºä¾‹ä»£ç æ¥è¯´æ˜ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">   <span class="string">&quot;fmt&quot;</span>  </span><br><span class="line">)  </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">a</span><span class="params">(send <span class="keyword">chan</span>&lt;- <span class="keyword">int</span>, num <span class="keyword">int</span>)</span></span> &#123;  </span><br><span class="line">   <span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;=num; i++ &#123;  </span><br><span class="line">      send &lt;- i  </span><br><span class="line">   &#125;  </span><br><span class="line">   <span class="built_in">close</span>(send)  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">b</span><span class="params">(recieve &lt;-<span class="keyword">chan</span> <span class="keyword">int</span>)</span></span> &#123;  </span><br><span class="line">   <span class="keyword">for</span> num := <span class="keyword">range</span> recieve &#123;  </span><br><span class="line">      fmt.Printf(<span class="string">&quot;Now we recieve the number %v\n&quot;</span>, num)  </span><br><span class="line">   &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">   c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)  </span><br><span class="line">   <span class="keyword">go</span> a(c, <span class="number">8</span>)  </span><br><span class="line">   b(c)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡ºç»“æœ</span><br><span class="line">Now we recieve the number 1</span><br><span class="line">Now we recieve the number 2</span><br><span class="line">Now we recieve the number 3</span><br><span class="line">Now we recieve the number 4</span><br><span class="line">Now we recieve the number 5</span><br><span class="line">Now we recieve the number 6</span><br><span class="line">Now we recieve the number 7</span><br><span class="line">Now we recieve the number 8</span><br></pre></td></tr></table></figure><p>a è¿™ä¸ª goroutine ä¸€ç›´å‘ channel å†…ä¼ é€’æ•°æ®ï¼Œç›´åˆ°è¿™ä¸ª channel è¢«å…³é—­å‰ï¼Œb è¿™ä¸ª goroutine éƒ½ä¼šé€šè¿‡ <code>range</code>  è¿™ä¸ªå…³é”®å­—é˜»å¡åœ¨å¾ªç¯ä¸­ä¸€ç›´ç­‰å¾… channel ä¸­çš„æ•°æ®ã€‚é€šè¿‡è¿™ä¸ªä¾‹å­è¿˜å¯ä»¥çœ‹å‡ºï¼Œ<code>for range</code> å¯ä»¥æ¥æ”¶ channel ä¸­çš„æ•°æ®ï¼Œä¸ç„¶ c ä½œä¸ºä¸€ä¸ªæ— ç¼“å†² channelï¼Œa ä¸å¯èƒ½å‘å…¶ä¸­ä¸€ç›´å‘é€æ•°æ®ã€‚</p><h1 id="select"><a href="#select" class="headerlink" title="select"></a>select</h1><p><code>select</code>å…³é”®å­—ç”¨äºå¤šä¸ªchannelçš„ç»“åˆï¼Œè¿™äº›channelä¼šé€šè¿‡ç±»ä¼¼äº <strong>are-you-ready polling</strong> çš„æœºåˆ¶æ¥å·¥ä½œã€‚<code>select</code>ä¸­ä¼šæœ‰<code>case</code>ä»£ç å—ï¼Œç”¨äºå‘é€æˆ–æ¥æ”¶æ•°æ®â€”â€”ä¸è®ºé€šè¿‡<code>&lt;-</code>æ“ä½œç¬¦æŒ‡å®šçš„å‘é€è¿˜æ˜¯æ¥æ”¶æ“ä½œå‡†å¤‡å¥½æ—¶ï¼Œchannelä¹Ÿå°±å‡†å¤‡å¥½äº†ã€‚åœ¨<code>select</code>ä¸­ä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ª<code>default</code>ä»£ç å—ï¼Œå…¶ä¸€ç›´æ˜¯å‡†å¤‡å¥½çš„ã€‚é‚£ä¹ˆï¼Œåœ¨<code>select</code>ä¸­ï¼Œå“ªä¸€ä¸ªä»£ç å—è¢«æ‰§è¡Œçš„ç®—æ³•å¤§è‡´å¦‚ä¸‹ï¼š</p><ul><li>æ£€æŸ¥æ¯ä¸ª<code>case</code>ä»£ç å—</li><li>å¦‚æœä»»æ„ä¸€ä¸ª<code>case</code>ä»£ç å—å‡†å¤‡å¥½å‘é€æˆ–æ¥æ”¶ï¼Œæ‰§è¡Œå¯¹åº”å†…å®¹</li><li>å¦‚æœå¤šäºä¸€ä¸ª<code>case</code>ä»£ç å—å‡†å¤‡å¥½å‘é€æˆ–æ¥æ”¶ï¼Œ<strong>éšæœº</strong>é€‰å–ä¸€ä¸ªå¹¶æ‰§è¡Œå¯¹åº”å†…å®¹</li><li>å¦‚æœä»»ä½•ä¸€ä¸ª<code>case</code>ä»£ç å—éƒ½æ²¡æœ‰å‡†å¤‡å¥½ï¼Œç­‰å¾…</li><li>å¦‚æœæœ‰<code>default</code>ä»£ç å—ï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•<code>case</code>ä»£ç å—å‡†å¤‡å¥½ï¼Œæ‰§è¡Œ<code>default</code>ä»£ç å—å¯¹åº”å†…å®¹</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡æ˜¯å¯¹ &lt;a class=&quot;link&quot; href=&quot;http://golangtutorials.blogspot.com/2011/06/channels-in-go-range-and-select.html&quot;&gt;Channels in Go </summary>
      
    
    
    
    <category term="goè¯­è¨€" scheme="http://jiahaohong1997.github.io/categories/go%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="golang" scheme="http://jiahaohong1997.github.io/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>Golang é‡ç‚¹é—®é¢˜</title>
    <link href="http://jiahaohong1997.github.io/2022/02/09/Golang%20%E9%87%8D%E7%82%B9%E9%97%AE%E9%A2%98/"/>
    <id>http://jiahaohong1997.github.io/2022/02/09/Golang%20%E9%87%8D%E7%82%B9%E9%97%AE%E9%A2%98/</id>
    <published>2022-02-09T15:50:00.000Z</published>
    <updated>2022-03-04T09:05:12.174Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Golang-Map-çš„åº•å±‚å®ç°"><a href="#Golang-Map-çš„åº•å±‚å®ç°" class="headerlink" title="Golang Map çš„åº•å±‚å®ç°"></a>Golang Map çš„åº•å±‚å®ç°</h1><h2 id="ä¸€èˆ¬çš„-map-çš„å®ç°"><a href="#ä¸€èˆ¬çš„-map-çš„å®ç°" class="headerlink" title="ä¸€èˆ¬çš„ map çš„å®ç°"></a>ä¸€èˆ¬çš„ map çš„å®ç°</h2><p>&emsp;&emsp;ä¸€èˆ¬çš„Mapä¼šåŒ…å«ä¸¤ä¸ªä¸»è¦ç»“æ„ï¼š</p><ul><li>æ•°ç»„ï¼šæ•°ç»„é‡Œçš„å€¼æŒ‡å‘ä¸€ä¸ªé“¾è¡¨ï¼Œä¸€èˆ¬ç§°ä¸ºæ¡¶ğŸª£ä½</li><li>é“¾è¡¨ï¼šç›®çš„è§£å†³hashå†²çªçš„é—®é¢˜ï¼Œå¹¶å­˜æ”¾é”®å€¼</li></ul><p>å¤§è‡´ç»“æ„å¦‚ä¸‹ï¼š<br><img lazyload src="/images/loading.svg" data-src="origin_map.jpg" alt="avatar"><br>è¯»å–ä¸€ä¸ªkeyå€¼çš„è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">   key</span><br><span class="line">   |</span><br><span class="line">   v                 </span><br><span class="line">+------------------------------------+</span><br><span class="line">|      keyé€šè¿‡<span class="built_in">hash</span>å‡½æ•°å¾—åˆ°keyçš„<span class="built_in">hash</span>    |</span><br><span class="line">+------------------+-----------------+</span><br><span class="line">   |</span><br><span class="line">   v</span><br><span class="line">+------------------------------------+</span><br><span class="line">|       keyçš„<span class="built_in">hash</span>é€šè¿‡å–æ¨¡æˆ–è€…ä½æ“ä½œ     |</span><br><span class="line">|          å¾—åˆ°keyåœ¨æ•°ç»„ä¸Šçš„ç´¢å¼•        |</span><br><span class="line">+------------------------------------+</span><br><span class="line">   |</span><br><span class="line">   v</span><br><span class="line">+------------------------------------+</span><br><span class="line">|         é€šè¿‡ç´¢å¼•æ‰¾åˆ°å¯¹åº”çš„é“¾è¡¨         |</span><br><span class="line">+------------------+-----------------+</span><br><span class="line">   |</span><br><span class="line">   v</span><br><span class="line">+------------------------------------+</span><br><span class="line">|       éå†é“¾è¡¨å¯¹æ¯”keyå’Œç›®æ ‡key        |</span><br><span class="line">+------------------+-----------------+</span><br><span class="line">   |</span><br><span class="line">   v</span><br><span class="line">+------------------------------------+</span><br><span class="line">|              ç›¸ç­‰åˆ™è¿”å›value         |</span><br><span class="line">+------------------+-----------------+</span><br><span class="line">                   |</span><br><span class="line">                   v </span><br><span class="line">                 value</span><br></pre></td></tr></table></figure><h2 id="Go-è¯­è¨€ä¸­-Map-çš„å®ç°æ€è·¯"><a href="#Go-è¯­è¨€ä¸­-Map-çš„å®ç°æ€è·¯" class="headerlink" title="Go è¯­è¨€ä¸­ Map çš„å®ç°æ€è·¯"></a>Go è¯­è¨€ä¸­ Map çš„å®ç°æ€è·¯</h2><p>&emsp;&emsp;Goè¯­è¨€è§£å†³hashå†²çªä¸æ˜¯é“¾è¡¨ï¼Œå®é™…<strong>ä¸»è¦</strong>ç”¨çš„æ•°ç»„(å†…å­˜ä¸Šçš„è¿ç»­ç©ºé—´)ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img lazyload src="/images/loading.svg" data-src="go_map.png" alt="avatar"></p><p>&emsp;&emsp;ä½†æ˜¯å¹¶ä¸æ˜¯åªä½¿ç”¨ä¸€ä¸ªæ•°ç»„(è¿ç»­å†…å­˜ç©ºé—´)å­˜æ”¾é”®å’Œå€¼ï¼Œè€Œæ˜¯ä½¿ç”¨äº†ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«å­˜å‚¨é”®å’Œå€¼ï¼Œå›¾ç¤ºå¦‚ä¸‹ï¼š<br><img lazyload src="/images/loading.svg" data-src="origin_map1.png" alt="avatar"><br>&emsp;&emsp;ä¸Šå›¾ä¸­ï¼š-   åˆ†åˆ«å¯¹åº”çš„æ˜¯ä¸¤ä¸ªæ ¸å¿ƒçš„ç»“æ„ä½“<code>hmap</code>å’Œ<code>bmap</code>ï¼Œ <code>bmap</code>é‡Œæœ‰ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«å­˜æ”¾keyå’Œvalue</p><p>&emsp;&emsp;æˆ‘ä»¬é€šè¿‡ä¸€æ¬¡<code>è¯»æ“ä½œ</code>ä¸ºä¾‹ï¼Œçœ‹çœ‹è¯»å–æŸä¸ªkeyçš„å€¼çš„ä¸€ä¸ª<strong>å¤§è‡´è¿‡ç¨‹</strong>ï¼š</p><ol><li>é€šè¿‡hashå‡½æ•°è·å–ç›®æ ‡keyçš„<strong>å“ˆå¸Œ</strong>ï¼Œå“ˆå¸Œå’Œæ•°ç»„çš„é•¿åº¦é€šè¿‡ä½æ“ä½œè·å–æ•°ç»„ä½ç½®çš„<strong>ç´¢å¼•</strong>(å¤‡æ³¨ï¼šè·å–ç´¢å¼•å€¼çš„æ–¹å¼ä¸€èˆ¬æœ‰å–æ¨¡æˆ–ä½æ“ä½œï¼Œä½æ“ä½œçš„æ€§èƒ½å¥½äº›)</li><li>éå†bmapé‡Œçš„é”®ï¼Œå’Œç›®æ ‡keyå¯¹æ¯”è·å–<strong>keyçš„ç´¢å¼•</strong>(æ‰¾ä¸åˆ°åˆ™è¿”å›ç©ºå€¼)</li><li>æ ¹æ®<strong>keyçš„ç´¢å¼•</strong>é€šè¿‡è®¡ç®—åç§»é‡ï¼Œè·å–åˆ°å¯¹åº”value<br><img lazyload src="/images/loading.svg" data-src="origin_map2.png" alt="avatar"></li></ol><h2 id="å®ç°ç»†èŠ‚"><a href="#å®ç°ç»†èŠ‚" class="headerlink" title="å®ç°ç»†èŠ‚"></a>å®ç°ç»†èŠ‚</h2><h3 id="æ ¸å¿ƒç»“æ„ä½“-hmap"><a href="#æ ¸å¿ƒç»“æ„ä½“-hmap" class="headerlink" title="æ ¸å¿ƒç»“æ„ä½“ hmap"></a>æ ¸å¿ƒç»“æ„ä½“ hmap</h3><p>&emsp;&emsp;<code>hmap</code>çš„ç»“æ„å…¶å®åˆšå¼€å§‹çœ‹èµ·æ¥å…¶å®è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæœ‰ä¸å°‘çš„å­—æ®µï¼Œå…·ä½“å­—æ®µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img lazyload src="/images/loading.svg" data-src="hmap.png" alt="avatar"><br>å­—æ®µé‡Šä¹‰å¦‚ä¸‹ï¼š</p><ol><li>countï¼šé”®å€¼å¯¹çš„æ•°é‡</li><li>Bï¼š2^B=len(buckets)</li><li>hash0ï¼šhashå› å­</li><li>bucketsï¼šæŒ‡å‘ä¸€ä¸ªæ•°ç»„(è¿ç»­å†…å­˜ç©ºé—´)ï¼Œæ•°ç»„çš„ç±»å‹ä¸º[]bmapï¼Œbmapç±»å‹å°±æ˜¯å­˜åœ¨é”®å€¼å¯¹çš„ç»“æ„ä¸‹é¢ä¼šè¯¦ç»†ä»‹ç»ï¼Œè¿™ä¸ªå­—æ®µæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸ºæ­£å¸¸æ¡¶ã€‚</li><li>oldbucketsï¼šæ‰©å®¹æ—¶ï¼Œå­˜æ”¾ä¹‹å‰çš„buckets(Mapæ‰©å®¹ç›¸å…³å­—æ®µ)</li><li>extraï¼šæº¢å‡ºæ¡¶ç»“æ„ï¼Œæ­£å¸¸æ¡¶é‡Œé¢æŸä¸ªbmapå­˜æ»¡äº†ï¼Œä¼šä½¿ç”¨è¿™é‡Œé¢çš„å†…å­˜ç©ºé—´å­˜æ”¾é”®å€¼å¯¹</li><li>noverflowï¼šæº¢å‡ºæ¡¶é‡Œbmapå¤§è‡´çš„æ•°é‡</li><li>nevacuateï¼šåˆ†æµæ¬¡æ•°ï¼Œæˆå€æ‰©å®¹åˆ†æµæ“ä½œè®¡æ•°çš„å­—æ®µ(Mapæ‰©å®¹ç›¸å…³å­—æ®µ)</li><li>flagsï¼šçŠ¶æ€æ ‡è¯†ï¼Œæ¯”å¦‚æ­£åœ¨è¢«å†™ã€bucketså’Œoldbucketsåœ¨è¢«éå†ã€ç­‰é‡æ‰©å®¹(Mapæ‰©å®¹ç›¸å…³å­—æ®µ)</li></ol><p><img lazyload src="/images/loading.svg" data-src="bmap.png" alt="avatar"><br>&emsp;&emsp;<code>buckets</code>æŒ‡å‘äº†ä¸€ä¸ªæ•°ç»„(è¿ç»­çš„å†…å­˜ç©ºé—´)ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯<code>bmap</code>ç±»å‹ï¼Œè¿™ä¸ªå­—æ®µæˆ‘ä»¬ç§°ä¹‹ä¸ºæ­£å¸¸æ¡¶ã€‚</p><h3 id="æ ¸å¿ƒç»“æ„ä½“-bmap"><a href="#æ ¸å¿ƒç»“æ„ä½“-bmap" class="headerlink" title="æ ¸å¿ƒç»“æ„ä½“ bmap"></a>æ ¸å¿ƒç»“æ„ä½“ bmap</h3><p>&emsp;&emsp;æ­£å¸¸æ¡¶<code>hmap.buckets</code>çš„å…ƒç´ æ˜¯ä¸€ä¸ª<code>bmap</code>ç»“æ„ã€‚<code>bmap</code>çš„å…·ä½“å­—æ®µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img lazyload src="/images/loading.svg" data-src="bmap1.png" alt="avatar"><br>å­—æ®µé‡Šä¹‰å¦‚ä¸‹ï¼š</p><ol><li>topbitsï¼šé•¿åº¦ä¸º8çš„æ•°ç»„ï¼Œ[]uint8ï¼Œå…ƒç´ ä¸ºï¼škeyè·å–çš„hashçš„é«˜8ä½ï¼Œéå†æ—¶å¯¹æ¯”ä½¿ç”¨ï¼Œæé«˜æ€§èƒ½ã€‚<strong>å¦‚ä¸‹å›¾æ‰€ç¤º</strong></li><li>keysï¼šé•¿åº¦ä¸º8çš„æ•°ç»„ï¼Œ[]keytypeï¼Œå…ƒç´ ä¸ºï¼šå…·ä½“çš„keyå€¼ã€‚<strong>å¦‚ä¸‹å›¾æ‰€ç¤º</strong></li><li>elemsï¼šé•¿åº¦ä¸º8çš„æ•°ç»„ï¼Œ[]elemtypeï¼Œå…ƒç´ ä¸ºï¼šé”®å€¼å¯¹çš„keyå¯¹åº”çš„å€¼ã€‚</li><li>overflowï¼šæŒ‡å‘çš„<code>hmap.extra.overflow</code>æº¢å‡ºæ¡¶é‡Œçš„<code>bmap</code>ï¼Œä¸Šé¢çš„å­—æ®µ<code>topbits</code>ã€<code>keys</code>ã€<code>elems</code>é•¿åº¦ä¸º8ï¼Œæœ€å¤šå­˜8ç»„é”®å€¼å¯¹ï¼Œå­˜æ»¡äº†å°±å¾€æŒ‡å‘çš„è¿™ä¸ª<code>bmap</code>é‡Œå­˜</li><li>padï¼šå¯¹é½å†…å­˜ä½¿ç”¨çš„ï¼Œä¸æ˜¯æ¯ä¸ªbmapéƒ½æœ‰ä¼šè¿™ä¸ªå­—æ®µï¼Œéœ€è¦æ»¡è¶³ä¸€å®šæ¡ä»¶<br><img lazyload src="/images/loading.svg" data-src="bmap2.png" alt="avatar"></li></ol><p>&emsp;&emsp;<strong>ç»“è®ºï¼šæ¯ä¸ª<code>bmap</code>ç»“æ„æœ€å¤šå­˜æ”¾8ç»„é”®å€¼å¯¹ã€‚</strong></p><h3 id="hmap-å’Œ-bmap-çš„åŸºæœ¬ç»“æ„åˆèµ·æ¥"><a href="#hmap-å’Œ-bmap-çš„åŸºæœ¬ç»“æ„åˆèµ·æ¥" class="headerlink" title="hmap å’Œ bmap çš„åŸºæœ¬ç»“æ„åˆèµ·æ¥"></a>hmap å’Œ bmap çš„åŸºæœ¬ç»“æ„åˆèµ·æ¥</h3><p>&emsp;&emsp;åˆ†åˆ«äº†è§£äº†<code>hmap</code>å’Œ<code>bmap</code>çš„åŸºæœ¬ç»“æ„åï¼Œæˆ‘ä»¬æŠŠä¸Šé¢çš„å†…å®¹åˆå¹¶èµ·æ¥ï¼Œå°±å¾—åˆ°å¦‚ä¸‹çš„Mapç»“æ„å›¾ï¼š<br><img lazyload src="/images/loading.svg" data-src="combine_map.png" alt="avatar"></p><h3 id="æº¢å‡ºæ¡¶"><a href="#æº¢å‡ºæ¡¶" class="headerlink" title="æº¢å‡ºæ¡¶"></a>æº¢å‡ºæ¡¶</h3><p>&emsp;&emsp;ä¸Šé¢è®²<code>bmap</code>çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æ˜¯å¾—åˆ°äº†ä¸ªç»“è®ºä¹ˆâ€œæ¯ä¸ª<code>bmap</code>ç»“æ„æœ€å¤šå­˜æ”¾8ç»„é”®å€¼å¯¹ã€‚â€ï¼Œæ‰€ä»¥é—®é¢˜æ¥äº†ï¼š</p><blockquote><p>æ­£å¸¸æ¡¶é‡Œçš„<code>bmap</code>å­˜æ»¡äº†æ€ä¹ˆåŠ?</p></blockquote><p>&emsp;&emsp;è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å°±è¦è¯´åˆ°<code>hmap.extra</code>ç»“æ„äº†ï¼Œ<code>hmap.extra</code>æ˜¯ä¸ªç»“æ„ä½“ï¼Œç»“æ„å›¾ç¤ºå’Œå­—æ®µé‡Šä¹‰å¦‚ä¸‹ï¼š<br><img lazyload src="/images/loading.svg" data-src="overflow.png" alt="avatar"></p><ol><li>overflowï¼šç§°ä¹‹ä¸º<strong>æº¢å‡ºæ¡¶</strong>ã€‚å’Œ<code>hmap.buckets</code>çš„ç±»å‹ä¸€æ ·ä¹Ÿæ˜¯æ•°ç»„<code>[]bmap</code>ï¼Œå½“æ­£å¸¸æ¡¶<code>bmap</code>å­˜æ»¡äº†çš„æ—¶å€™å°±ä½¿ç”¨<code>hmap.extra.overflow</code>çš„<code>bmap</code>ã€‚</li><li>oldoverflowï¼šæ‰©å®¹æ—¶å­˜æ”¾ä¹‹å‰çš„overflow(Mapæ‰©å®¹ç›¸å…³å­—æ®µ)</li><li>nextoverflowï¼šæŒ‡å‘æº¢å‡ºæ¡¶é‡Œä¸‹ä¸€ä¸ªå¯ä»¥ä½¿ç”¨çš„<code>bmap</code></li></ol><blockquote><p>é—®é¢˜ï¼šæ­£å¸¸æ¡¶<code>hmap.buckets</code>é‡Œçš„<code>bmap</code>æ˜¯<strong>æ€ä¹ˆå…³è”ä¸Š</strong>æº¢å‡ºæ¡¶<code>hmap.extra.overflow</code>çš„<code>bmap</code>å‘¢ï¼Ÿ</p></blockquote><p>ç­”ï¼šå°±æ˜¯æˆ‘ä»¬ä»‹ç»<code>bmap</code>ç»“æ„æ—¶é‡Œçš„<code>bmap.overflow</code>å­—æ®µ(å¦‚ä¸‹å›¾æ‰€ç¤º)ã€‚<code>bmap.overflow</code>æ˜¯ä¸ªæŒ‡é’ˆç±»å‹ï¼Œå­˜æ”¾äº†å¯¹åº”ä½¿ç”¨çš„æº¢å‡ºæ¡¶<code>hmap.extra.overflow</code>é‡Œçš„<code>bmap</code>çš„åœ°å€ã€‚</p><p><strong>é—®é¢˜åˆæ¥äº†</strong>ï¼š</p><blockquote><p>æ­£å¸¸æ¡¶<code>hmap.buckets</code>é‡Œçš„<code>bmap</code>æ˜¯<strong>ä»€ä¹ˆæ—¶å€™å…³è”ä¸Š</strong>æº¢å‡ºæ¡¶<code>hmap.extra.overflow</code>çš„<code>bmap</code>å‘¢ï¼Ÿ</p></blockquote><p>ç­”ï¼šMapå†™æ“ä½œçš„æ—¶å€™ã€‚</p><p>&emsp;&emsp;<strong>å½“<code>hmap</code>å­˜åœ¨æº¢å‡ºæ¡¶æ—¶ï¼Œä¸”å½“å‰æº¢å‡ºæ¡¶åªè¢«ä½¿ç”¨äº†ä¸€ä¸ªbmap</strong>æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„å…³ç³»å›¾ï¼š<br><img lazyload src="/images/loading.svg" data-src="overflow1.png" alt="avatar"><br>&emsp;&emsp;åŒæ—¶æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ­£å¸¸æ¡¶çš„<code>bmap</code>å’Œæº¢å‡ºæ¡¶çš„<code>bmap</code>å®é™…æ„æˆäº†é“¾è¡¨å…³ç³»ï¼Œæ‰€ä»¥è¿™ä¹Ÿè§£é‡Šäº†å¼€ç¯‡æˆ‘ä»¬è¯´åˆ°çš„â€œGoé‡Œé¢Mapçš„å®ç°<strong>ä¸»è¦</strong>ç”¨åˆ°äº†æ•°ç»„â€ï¼Œå…¶æ¬¡è¿˜ç”¨åˆ°äº†é“¾è¡¨ã€‚</p><h2 id="å†æ¬¡åˆ†æMapçš„è¯»"><a href="#å†æ¬¡åˆ†æMapçš„è¯»" class="headerlink" title="å†æ¬¡åˆ†æMapçš„è¯»"></a>å†æ¬¡åˆ†æMapçš„è¯»</h2><p>&emsp;&emsp;æˆ‘ä»¬å†æ¬¡é€šè¿‡ä¸€æ¬¡è¯»æ“ä½œä¸ºä¾‹ï¼Œçœ‹çœ‹è¯»å–æŸä¸ªkeyçš„å€¼çš„ä¸€ä¸ªå¤§è‡´è¿‡ç¨‹ï¼š<br><img lazyload src="/images/loading.svg" data-src="readmap.png" alt="avatar"><br>&emsp;&emsp;Go è¯­è¨€ä¸­ map é‡‡ç”¨çš„æ˜¯å“ˆå¸ŒæŸ¥æ‰¾è¡¨ï¼Œç”±ä¸€ä¸ª key é€šè¿‡å“ˆå¸Œå‡½æ•°å¾—åˆ°å“ˆå¸Œå€¼ï¼Œ64 ä½ç³»ç»Ÿä¸­å°±ç”Ÿæˆä¸€ä¸ª 64bit çš„å“ˆå¸Œå€¼ï¼Œç”±è¿™ä¸ªå“ˆå¸Œå€¼å°† key å¯¹åº”åˆ°ä¸åŒçš„æ¡¶ ï¼ˆbucketï¼‰ä¸­ï¼Œå½“æœ‰å¤šä¸ªå“ˆå¸Œæ˜ å°„åˆ°ç›¸åŒçš„çš„æ¡¶ä¸­æ—¶ï¼Œä½¿ç”¨é“¾è¡¨è§£å†³å“ˆå¸Œå†² çªã€‚key ç»è¿‡ hash åå…± 64 ä½ï¼Œæ ¹æ® hmap ä¸­ B çš„å€¼ï¼Œè®¡ç®—å®ƒåˆ°åº•è¦è½åœ¨å“ªä¸ªæ¡¶ æ—¶ï¼Œæ¡¶çš„æ•°é‡ä¸º 2^Bï¼Œå¦‚ B=5ï¼Œé‚£ä¹ˆç”¨ 64 ä½æœ€å 5 ä½è¡¨ç¤ºç¬¬å‡ å·æ¡¶ï¼Œåœ¨ç”¨ hash å€¼çš„é«˜ 8 ä½ç¡®å®šåœ¨ bucket ä¸­çš„å­˜å‚¨ä½ç½®ï¼Œå½“å‰ bmap ä¸­çš„ bucket æœªæ‰¾åˆ°ï¼Œåˆ™æŸ¥ è¯¢å¯¹åº”çš„ overflow bucketï¼Œå¯¹åº”ä½ç½®æœ‰æ•°æ®åˆ™å¯¹æ¯”å®Œæ•´çš„å“ˆå¸Œå€¼ï¼Œç¡®å®šæ˜¯å¦ æ˜¯è¦æŸ¥æ‰¾çš„æ•°æ®ã€‚ å¦‚æœä¸¤ä¸ªä¸åŒçš„ key è½åœ¨çš„åŒä¸€ä¸ªæ¡¶ä¸Šï¼Œhash å†²çªä½¿ç”¨é“¾è¡¨æ³•æ¥è¿‘ï¼Œéå† bucket ä¸­çš„ key å¦‚æœå½“å‰å¤„äº map è¿›è¡Œäº†æ‰©å®¹ï¼Œå¤„äºæ•°æ®æ¬ç§»çŠ¶æ€ï¼Œåˆ™ä¼˜å…ˆä» oldbuckets æŸ¥æ‰¾ã€‚</p><h2 id="Golang-Map-å¦‚ä½•æ‰©å®¹"><a href="#Golang-Map-å¦‚ä½•æ‰©å®¹" class="headerlink" title="Golang Map å¦‚ä½•æ‰©å®¹"></a>Golang Map å¦‚ä½•æ‰©å®¹</h2><p>è£…è½½å› å­ï¼šcount/2^B<br>è§¦å‘æ¡ä»¶ï¼š</p><ol><li>è£…å¡«å› å­æ˜¯å¦å¤§äº 6.5</li><li>overflow bucket æ˜¯å¦å¤ªå¤š</li></ol><p>è§£å†³æ–¹æ³•ï¼š</p><ol><li>åŒå€æ‰©å®¹ï¼šæ‰©å®¹é‡‡å–äº†ä¸€ç§ç§°ä¸ºâ€œæ¸è¿›å¼â€åœ°æ–¹å¼ï¼ŒåŸæœ‰çš„ key å¹¶ä¸ä¼šä¸€ æ¬¡æ€§æ¬è¿å®Œæ¯•ï¼Œæ¯æ¬¡æœ€å¤šåªä¼šæ¬è¿ 2 ä¸ª bucket</li><li>ç­‰é‡æ‰©å®¹ï¼šé‡æ–°æ’åˆ—ï¼Œæç«¯æƒ…å†µä¸‹ï¼Œé‡æ–°æ’åˆ—ä¹Ÿè§£å†³ä¸äº†ï¼Œmap æˆäº†é“¾è¡¨ï¼Œæ€§èƒ½å¤§å¤§é™ä½ï¼Œæ­¤æ—¶å“ˆå¸Œç§å­ hash0 çš„è®¾ç½®ï¼Œå¯ä»¥é™ä½æ­¤ç±»æç«¯åœºæ™¯çš„å‘ç”Ÿã€‚</li></ol><h1 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h1><p>&emsp;&emsp;åœ¨ Go è¯­è¨€ä¸­ï¼Œä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œè€Œè¦é€šè¿‡é€šä¿¡æ¥å®ç°å†…å­˜å…±äº«ã€‚Go çš„ CSPï¼ˆCommunicating Sequential Processï¼‰å¹¶å‘æ¨¡å‹ï¼Œä¸­æ–‡å«åšé€šä¿¡é¡ºåºè¿›ç¨‹ï¼Œæ˜¯é€šè¿‡ goroutine å’Œ channel æ¥å®ç°çš„ã€‚æ‰€ä»¥ channel æ”¶å‘éµå¾ªå…ˆè¿›å…ˆå‡º FIFOï¼Œåˆ†ä¸ºæœ‰ç¼“å­˜å’Œæ— ç¼“å­˜ï¼Œchannel ä¸­å¤§è‡´æœ‰ buffer(å½“ç¼“å†²åŒºå¤§å°ä¸ä¸º 0 æ—¶ï¼Œæ˜¯ä¸ª ring buffer)ã€sendqã€recvq å½“å‰ channel å› ä¸ºç¼“å†²åŒºä¸è¶³è€Œé˜»å¡çš„é˜Ÿåˆ—ã€ä½¿ç”¨åŒå‘é“¾è¡¨å­˜å‚¨ã€è¿˜æœ‰ä¸€ä¸ª mutex é”æ§åˆ¶å¹¶å‘ã€å…¶ä»–åŸå±ç­‰ã€‚</p><h2 id="channel-çš„åº•å±‚å®ç°"><a href="#channel-çš„åº•å±‚å®ç°" class="headerlink" title="channel çš„åº•å±‚å®ç°"></a>channel çš„åº•å±‚å®ç°</h2><p><img lazyload src="/images/loading.svg" data-src="hchan.png" alt="avatar"><br>ç®€å•è¯´æ˜ï¼š<br><code>buf</code>æ˜¯æœ‰ç¼“å†²çš„channelæ‰€ç‰¹æœ‰çš„ç»“æ„ï¼Œç”¨æ¥å­˜å‚¨ç¼“å­˜æ•°æ®ã€‚æ˜¯ä¸ªå¾ªç¯é“¾è¡¨<br><code>sendx</code>å’Œ<code>recvx</code>ç”¨äºè®°å½•<code>buf</code>è¿™ä¸ªå¾ªç¯é“¾è¡¨ä¸­çš„ index<br><code>lock</code>æ˜¯ä¸ªäº’æ–¥é”<br><code>recvq</code>å’Œ<code>sendq</code>åˆ†åˆ«æ˜¯æ¥æ”¶(&lt;-channel)æˆ–è€…å‘é€(channel &lt;- xxx)çš„goroutineæŠ½è±¡å‡ºæ¥çš„ç»“æ„ä½“(sudog)çš„é˜Ÿåˆ—ã€‚æ˜¯ä¸ªåŒå‘é“¾è¡¨</p><p>ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†ä»‹ç»<code>hchan</code>ä¸­å„éƒ¨åˆ†æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚</p><ol><li><p>å…ˆä»åˆ›å»ºå¼€å§‹<br>æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªchannelï¼šch := make(chan int, 3)<br><img lazyload src="/images/loading.svg" data-src="hchan1.png" alt="avatar"><br>åˆ›å»ºchannelå®é™…ä¸Šå°±æ˜¯åœ¨å†…å­˜ä¸­å®ä¾‹åŒ–äº†ä¸€ä¸ª<code>hchan</code>çš„ç»“æ„ä½“ï¼Œå¹¶è¿”å›ä¸€ä¸ªchæŒ‡é’ˆï¼Œæˆ‘ä»¬ä½¿ç”¨è¿‡ç¨‹ä¸­channelåœ¨å‡½æ•°ä¹‹é—´çš„ä¼ é€’éƒ½æ˜¯ç”¨çš„è¿™ä¸ªæŒ‡é’ˆï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå‡½æ•°ä¼ é€’ä¸­æ— éœ€ä½¿ç”¨channelçš„æŒ‡é’ˆï¼Œè€Œç›´æ¥ç”¨channelå°±è¡Œäº†ï¼Œå› ä¸ºchannelæœ¬èº«å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚</p></li><li><p>channelä¸­å‘é€send(ch &lt;- xxx)å’Œrecv(&lt;- ch)æ¥æ”¶<br>å…ˆè€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœä½ æƒ³è®©goroutineä»¥å…ˆè¿›å…ˆå‡º(FIFO)çš„æ–¹å¼è¿›å…¥ä¸€ä¸ªç»“æ„ä½“ä¸­ï¼Œä½ ä¼šæ€ä¹ˆæ“ä½œï¼Ÿ  åŠ é”ï¼å¯¹çš„ï¼channelå°±æ˜¯ç”¨äº†ä¸€ä¸ªé”ã€‚hchanæœ¬èº«åŒ…å«ä¸€ä¸ªäº’æ–¥é”<code>mutex</code></p></li></ol><ul><li>channelä¸­é˜Ÿåˆ—æ˜¯å¦‚ä½•å®ç°çš„<br>channelä¸­æœ‰ä¸ªç¼“å­˜bufï¼Œæ˜¯ç”¨æ¥ç¼“å­˜æ•°æ®çš„(å‡å¦‚å®ä¾‹åŒ–äº†å¸¦ç¼“å­˜çš„channelçš„è¯)é˜Ÿåˆ—ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ˜¯å¦‚ä½•å®ç°â€œé˜Ÿåˆ—â€çš„ã€‚å½“ä½¿ç”¨<code>send (ch &lt;- xx)</code>æˆ–è€…<code>recv ( &lt;-ch)</code>çš„æ—¶å€™ï¼Œé¦–å…ˆè¦é”ä½<code>hchan</code>è¿™ä¸ªç»“æ„ä½“ã€‚<br>æ‰€ä»¥ä¸éš¾çœ‹å‡ºï¼ŒGoä¸­é‚£å¥ç»å…¸çš„è¯ï¼š<code>Do not communicate by sharing memory; instead, share memory by communicating.</code>çš„å…·ä½“å®ç°å°±æ˜¯åˆ©ç”¨channelæŠŠæ•°æ®ä»ä¸€ç«¯copyåˆ°äº†å¦ä¸€ç«¯ï¼<br>è¿˜çœŸæ˜¯ç¬¦åˆ<code>channel</code>çš„è‹±æ–‡å«ä¹‰ï¼š<br><img lazyload src="/images/loading.svg" data-src="hchan_channl.gif" alt="avatar"></li></ul><ol start="3"><li>å½“channelç¼“å­˜æ»¡äº†ä¹‹åä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè¿™å…¶ä¸­çš„åŸç†æ˜¯æ€æ ·çš„ï¼Ÿ<br>ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå½“channelç¼“å­˜æ»¡äº†ï¼Œæˆ–è€…æ²¡æœ‰ç¼“å­˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»§ç»­send(ch &lt;- xxx)æˆ–è€…recv(&lt;- ch)ä¼šé˜»å¡å½“å‰goroutineï¼Œä½†æ˜¯ï¼Œæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼ŒGoçš„goroutineæ˜¯ç”¨æˆ·æ€çš„çº¿ç¨‹(<code>user-space threads</code>)ï¼Œç”¨æˆ·æ€çš„çº¿ç¨‹æ˜¯éœ€è¦è‡ªå·±å»è°ƒåº¦çš„ï¼ŒGoæœ‰è¿è¡Œæ—¶çš„schedulerå»å¸®æˆ‘ä»¬å®Œæˆè°ƒåº¦è¿™ä»¶äº‹æƒ…ã€‚goroutineçš„é˜»å¡æ“ä½œï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨<code>send (ch &lt;- xx)</code>æˆ–è€…<code>recv ( &lt;-ch)</code>çš„æ—¶å€™ä¸»åŠ¨è§¦å‘çš„ï¼Œå…·ä½“è¯·çœ‹ä»¥ä¸‹å†…å®¹ï¼š<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">3</span>)  </span><br><span class="line">  </span><br><span class="line">ch &lt;- <span class="number">1</span>  </span><br><span class="line">ch &lt;- <span class="number">1</span>  </span><br><span class="line">ch &lt;- <span class="number">1</span></span><br></pre></td></tr></table></figure><img lazyload src="/images/loading.svg" data-src="hchan_block.png" alt="avatar"><br><img lazyload src="/images/loading.svg" data-src="hchan_block1.png" alt="avatar"><br>è¿™ä¸ªæ—¶å€™G1æ­£åœ¨æ­£å¸¸è¿è¡Œ,å½“å†æ¬¡è¿›è¡Œsendæ“ä½œ(ch&lt;-1)çš„æ—¶å€™ï¼Œä¼šä¸»åŠ¨è°ƒç”¨Goçš„è°ƒåº¦å™¨(G0)ï¼Œé€šè¿‡ runtime.gopark å‡½æ•°è®©G1ç­‰å¾…ï¼Œå¹¶ä»è®©å‡ºMï¼Œè®©å…¶ä»–Gå»ä½¿ç”¨<br><img lazyload src="/images/loading.svg" data-src="hchan_block2.png" alt="avatar"><br>åŒæ—¶G1ä¹Ÿä¼šè¢«æŠ½è±¡æˆå«æœ‰G1æŒ‡é’ˆå’Œsendå…ƒç´ çš„<code>sudog</code>ç»“æ„ä½“ä¿å­˜åˆ°hchançš„<code>sendq</code>ä¸­ç­‰å¾…è¢«å”¤é†’ã€‚<br><img lazyload src="/images/loading.svg" data-src="hchan_blok3.gif" alt="avatar"><br>é‚£ä¹ˆï¼ŒG1ä»€ä¹ˆæ—¶å€™è¢«å”¤é†’å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™G2éš†é‡ç™»åœºã€‚<br><img lazyload src="/images/loading.svg" data-src="hchan_block4.png" alt="avatar"><br>G2æ‰§è¡Œäº†recvæ“ä½œ<code>p := &lt;-ch</code>ï¼Œäºæ˜¯ä¼šå‘ç”Ÿä»¥ä¸‹çš„æ“ä½œï¼š<br><img lazyload src="/images/loading.svg" data-src="hchan_block5.gif" alt="avatar"><br>G2ä»ç¼“å­˜é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ®ï¼Œchannelä¼šå°†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„G1æ¨å‡ºï¼Œå°†G1å½“æ—¶sendçš„æ•°æ®æ¨åˆ°ç¼“å­˜ä¸­ï¼Œç„¶åè°ƒç”¨Goçš„schedulerï¼Œå”¤é†’G1(runtime.goready)ï¼Œå¹¶æŠŠG1æ”¾åˆ°å¯è¿è¡Œçš„Goroutineé˜Ÿåˆ—ä¸­ã€‚é€šè¿‡è¿™ç§åä½œå¼çš„è°ƒåº¦æ¥å®ç° goroutine çš„è°ƒåº¦ã€‚<br><img lazyload src="/images/loading.svg" data-src="hchan_block6.gif" alt="avatar"></li></ol><ul><li>å‡å¦‚æ˜¯å…ˆè¿›è¡Œæ‰§è¡Œrecvæ“ä½œçš„G2ä¼šæ€ä¹ˆæ ·ï¼Ÿ<br><img lazyload src="/images/loading.svg" data-src="hchan_block7_1.png" alt="avatar"><br>è¿™ä¸ªæ—¶å€™G2ä¼šä¸»åŠ¨è°ƒç”¨Goçš„è°ƒåº¦å™¨,è®©G2ç­‰å¾…ï¼Œå¹¶ä»è®©å‡ºMï¼Œè®©å…¶ä»–Gå»ä½¿ç”¨ã€‚<br>G2è¿˜ä¼šè¢«æŠ½è±¡æˆå«æœ‰G2æŒ‡é’ˆå’Œrecvç©ºå…ƒç´ çš„<code>sudog</code>ç»“æ„ä½“ä¿å­˜åˆ°hchançš„<code>recvq</code>ä¸­ç­‰å¾…è¢«å”¤é†’<br><img lazyload src="/images/loading.svg" data-src="hchan_block7.gif" alt="avatar"><br>æ­¤æ—¶æ°å¥½æœ‰ä¸ªgoroutine G1å¼€å§‹å‘channelä¸­æ¨é€æ•°æ® <code>ch &lt;- 1</code>ã€‚<br>æ­¤æ—¶ï¼Œéå¸¸æœ‰æ„æ€çš„äº‹æƒ…å‘ç”Ÿäº†ï¼š<br><img lazyload src="/images/loading.svg" data-src="hchan_block8.gif" alt="avatar"><br>G1å¹¶æ²¡æœ‰é”ä½channelï¼Œç„¶åå°†æ•°æ®æ”¾åˆ°ç¼“å­˜ä¸­ï¼Œè€Œæ˜¯ç›´æ¥æŠŠæ•°æ®ä»G1ç›´æ¥copyåˆ°äº†G2çš„æ ˆä¸­ã€‚è¿™ç§æ–¹å¼éå¸¸çš„èµï¼åœ¨å”¤é†’è¿‡ç¨‹ä¸­ï¼ŒG2æ— éœ€å†è·å¾—channelçš„é”ï¼Œç„¶åä»ç¼“å­˜ä¸­å–æ•°æ®ã€‚å‡å°‘äº†å†…å­˜çš„copyï¼Œæé«˜äº†æ•ˆç‡ã€‚<strong>å½“ç„¶è¿™ç§æ–¹æ³•åªèƒ½åœ¨ runtime ä¸‹è‡ªåŠ¨æ‰§è¡Œï¼Œéœ€è¦ runtime è°ƒåº¦ G2 çš„æ ˆä¸Šçš„å˜é‡ç›´æ¥å» G1 çš„æ ˆä¸Šè·å–æ•°æ®</strong>ã€‚<br><img lazyload src="/images/loading.svg" data-src="hchan_block9.gif" alt="avatar"><br>ä¹‹åå’Œä¹‹å‰ä¸€æ ·ï¼ŒG2 å˜æˆ runnable çš„çŠ¶æ€ï¼Œè¢«æŒ‚åˆ°åŸå§‹çš„ P é˜Ÿåˆ—ä¸­ã€‚æ–°ç‰ˆæœ¬è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¸ºäº†é¿å… G2 è¢«æ”¾åˆ° P  é˜Ÿåˆ—æœ«å°¾ä¼šè¢«å…¶ä»–çš„ P çªƒå–ï¼ˆwork-stealingï¼‰ï¼ŒG2 ä¼šè¢«ä¼˜å…ˆæŒ‚è½½åˆ°å½“å‰é˜Ÿåˆ—æ­£åœ¨æ‰§è¡Œçš„ goroutine åé¢ï¼Œå¾ˆå¿«å°±èƒ½å¾—åˆ°æ‰§è¡Œã€‚</li></ul><h2 id="channel-çš„ç‰¹æ€§"><a href="#channel-çš„ç‰¹æ€§" class="headerlink" title="channel çš„ç‰¹æ€§"></a>channel çš„ç‰¹æ€§</h2><ol><li>ç»™ä¸€ä¸ª nil channel å‘é€æ•°æ®ï¼Œé€ æˆæ°¸è¿œé˜»å¡</li><li>ä»ä¸€ä¸ª nil channel æ¥æ”¶æ•°æ®ï¼Œé€ æˆæ°¸è¿œé˜»å¡</li><li>ç»™ä¸€ä¸ªå·²ç»å…³é—­çš„ channel å‘é€æ•°æ®ï¼Œå¼•èµ· panic</li><li>ä»ä¸€ä¸ªå·²ç»å…³é—­çš„ channel æ¥æ”¶æ•°æ®ï¼Œå¦‚æœç¼“å†²åŒºä¸­ä¸ºç©ºï¼Œåˆ™è¿”å›ä¸€ä¸ªé›¶å€¼</li><li>æ— ç¼“å†²çš„ channel æ˜¯åŒæ­¥çš„ï¼Œè€Œæœ‰ç¼“å†²çš„ channel æ˜¯éåŒæ­¥çš„</li><li>å…³é—­ä¸€ä¸ª nil channel å°†ä¼šå‘ç”Ÿ panic<br><img lazyload src="/images/loading.svg" data-src="channel.jpg" alt="avatar"></li></ol><h2 id="Channel-çš„-ring-buffer-å®ç°"><a href="#Channel-çš„-ring-buffer-å®ç°" class="headerlink" title="Channel çš„ ring buffer å®ç°"></a>Channel çš„ ring buffer å®ç°</h2><p>&emsp;&emsp;channel ä¸­ä½¿ç”¨äº† ring buffer(ç¯å½¢ç¼“å†²åŒº) æ¥ç¼“å­˜å†™å…¥çš„æ•°æ®ã€‚ring buffer æœ‰å¾ˆå¤šå¥½å¤„ï¼Œè€Œä¸”éå¸¸é€‚åˆç”¨æ¥å®ç° FIFO å¼çš„å›ºå®šé•¿åº¦é˜Ÿåˆ—ã€‚åœ¨ channel ä¸­ï¼Œring buffer çš„å®ç°å¦‚ä¸‹ï¼š<br><img lazyload src="/images/loading.svg" data-src="ring_buffer.jpg" alt="avatar"><br>&emsp;&emsp;æœ‰ä¸¤ä¸ªä¸ buffer ç›¸å…³çš„å˜é‡:recvx å’Œ sendxã€‚å…¶ä¸­ sendx è¡¨ç¤º buffer ä¸­å¯å†™çš„ indexï¼Œrecvx è¡¨ç¤º buffer ä¸­å¯è¯»çš„ indexã€‚ ä» recvx åˆ° sendx ä¹‹é—´çš„å…ƒç´ ï¼Œè¡¨ç¤ºå·²æ­£å¸¸å­˜æ”¾å…¥ buffer ä¸­çš„æ•°æ®ã€‚ æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ buf[recvx]æ¥è¯»å–åˆ°é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä½¿ç”¨ buf[sendx] = x æ¥å°†å…ƒç´ æ”¾åˆ°é˜Ÿå°¾ã€‚</p><h1 id="Go-å¹¶å‘ç¼–ç¨‹"><a href="#Go-å¹¶å‘ç¼–ç¨‹" class="headerlink" title="Go å¹¶å‘ç¼–ç¨‹"></a>Go å¹¶å‘ç¼–ç¨‹</h1><h2 id="Mutex"><a href="#Mutex" class="headerlink" title="Mutex"></a>Mutex</h2><h3 id="Mutex-çš„å‡ ç§çŠ¶æ€"><a href="#Mutex-çš„å‡ ç§çŠ¶æ€" class="headerlink" title="Mutex çš„å‡ ç§çŠ¶æ€"></a>Mutex çš„å‡ ç§çŠ¶æ€</h3><ol><li>mutexLocked â€” è¡¨ç¤ºäº’æ–¥é”çš„é”å®šçŠ¶æ€ï¼›</li><li>mutexWoken â€” è¡¨ç¤ºä»æ­£å¸¸æ¨¡å¼è¢«ä»å”¤é†’ï¼›</li><li>mutexStarving â€” å½“å‰çš„äº’æ–¥é”è¿›å…¥é¥¥é¥¿çŠ¶æ€ï¼›</li><li>waitersCount â€” å½“å‰äº’æ–¥é”ä¸Šç­‰å¾…çš„ Goroutine ä¸ªæ•°ï¼›</li></ol><h3 id="Mutex-æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼"><a href="#Mutex-æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼" class="headerlink" title="Mutex æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼"></a>Mutex æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼</h3><ul><li><p><strong>æ­£å¸¸æ¨¡å¼(éå…¬å¹³é”)</strong><br>&emsp;&emsp;æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ç­‰å¾…é”çš„ goroutine æŒ‰ç…§ FIFO(å…ˆè¿›å…ˆå‡º)é¡ºåºç­‰å¾…ã€‚å”¤é†’çš„ goroutine ä¸ä¼šç›´æ¥æ‹¥æœ‰é”ï¼Œè€Œæ˜¯ä¼šå’Œæ–°è¯·æ±‚é”çš„ goroutine ç«äº‰é”çš„æ‹¥æœ‰ã€‚æ–°è¯·æ±‚é”çš„ goroutine å…·æœ‰ä¼˜åŠ¿ï¼šå®ƒæ­£åœ¨ CPU ä¸Šæ‰§è¡Œï¼Œè€Œä¸”å¯èƒ½æœ‰å¥½å‡ ä¸ªï¼Œæ‰€ä»¥åˆšåˆšå”¤é†’çš„ goroutine æœ‰å¾ˆå¤§å¯èƒ½åœ¨é”ç«äº‰ä¸­å¤±è´¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¢« å”¤é†’çš„ goroutine ä¼šåŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—çš„å‰é¢ã€‚ å¦‚æœä¸€ä¸ªç­‰å¾…çš„ goroutine è¶…è¿‡ 1ms æ²¡æœ‰è·å–é”ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šæŠŠé”è½¬å˜ä¸ºé¥¥é¥¿æ¨¡å¼ã€‚</p></li><li><p><strong>é¥¥é¥¿æ¨¡å¼(å…¬å¹³é”)</strong><br>&emsp;&emsp;ä¸ºäº†è§£å†³äº†ç­‰å¾… G é˜Ÿåˆ—çš„é•¿å°¾é—®é¢˜ã€‚é¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œç›´æ¥ç”± unlock æŠŠé”äº¤ç»™ç­‰å¾…é˜Ÿåˆ—ä¸­æ’åœ¨ç¬¬ä¸€ä½çš„ G(é˜Ÿå¤´)ï¼ŒåŒæ—¶ï¼Œé¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œæ–°è¿›æ¥çš„ G ä¸ä¼šå‚ä¸æŠ¢é”ä¹Ÿä¸ä¼šè¿›å…¥è‡ªæ—‹çŠ¶æ€ï¼Œä¼šç›´æ¥è¿›å…¥ç­‰å¾…é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œè¿™æ ·å¾ˆå¥½çš„è§£å†³äº†è€çš„ G ä¸€ç›´æŠ¢ä¸åˆ°é”çš„åœºæ™¯ã€‚ é¥¥é¥¿æ¨¡å¼çš„è§¦å‘æ¡ä»¶ï¼Œå½“ä¸€ä¸ª G ç­‰å¾…é”æ—¶é—´è¶…è¿‡ 1 æ¯«ç§’æ—¶ï¼Œæˆ–è€…å½“å‰é˜Ÿåˆ—åªå‰© ä¸‹ä¸€ä¸ª G çš„æ—¶å€™ï¼ŒMutex åˆ‡æ¢åˆ°é¥¥é¥¿æ¨¡å¼ã€‚</p></li></ul><blockquote><p>æ€»ç»“ï¼šå¯¹äºä¸¤ç§æ¨¡å¼ï¼Œæ­£å¸¸æ¨¡å¼ä¸‹çš„æ€§èƒ½æ˜¯æœ€å¥½çš„ï¼Œgoroutine å¯ä»¥è¿ç»­å¤šæ¬¡è·å– é”ï¼Œé¥¥é¥¿æ¨¡å¼è§£å†³äº†å–é”å…¬å¹³çš„é—®é¢˜ï¼Œä½†æ˜¯æ€§èƒ½ä¼šä¸‹é™ï¼Œå…¶å®æ˜¯æ€§èƒ½å’Œå…¬å¹³çš„ ä¸€ä¸ªå¹³è¡¡æ¨¡å¼ã€‚</p></blockquote><h3 id="Mutex-å…è®¸è‡ªæ—‹çš„æ¡ä»¶"><a href="#Mutex-å…è®¸è‡ªæ—‹çš„æ¡ä»¶" class="headerlink" title="Mutex å…è®¸è‡ªæ—‹çš„æ¡ä»¶"></a>Mutex å…è®¸è‡ªæ—‹çš„æ¡ä»¶</h3><p>&emsp;&emsp;åœ¨1ä¸ªåç¨‹è·å–é”æ—¶ï¼Œå¦ä¸€ä¸ªåç¨‹ä¸€ç›´å°è¯•ï¼Œç›´åˆ°èƒ½å¤Ÿè·å–é”ï¼ˆä¸æ–­å¾ªç¯ï¼‰ï¼Œè¿™å°±æ˜¯è‡ªæ—‹é”ã€‚</p><ol><li>é”å·²è¢«å ç”¨ï¼Œå¹¶ä¸”é”ä¸å¤„äºé¥¥é¥¿æ¨¡å¼ã€‚</li><li>ç§¯ç´¯çš„è‡ªæ—‹æ¬¡æ•°å°äºæœ€å¤§è‡ªæ—‹æ¬¡æ•°ï¼ˆactive_spin=4ï¼‰ã€‚</li><li>cpu æ ¸æ•°å¤§äº 1ã€‚</li><li>æœ‰ç©ºé—²çš„ Pã€‚</li><li>å½“å‰ goroutine æ‰€æŒ‚è½½çš„ P ä¸‹ï¼Œæœ¬åœ°å¾…è¿è¡Œé˜Ÿåˆ—ä¸ºç©ºã€‚</li></ol><h3 id="RWMutex"><a href="#RWMutex" class="headerlink" title="RWMutex"></a>RWMutex</h3><ul><li><p>å®ç°åŸç†<br>&emsp;&emsp;é€šè¿‡è®°å½• readerCount è¯»é”çš„æ•°é‡æ¥è¿›è¡Œæ§åˆ¶ï¼Œå½“æœ‰ä¸€ä¸ªå†™é”çš„æ—¶å€™ï¼Œä¼šå°†è¯»é”æ•°é‡è®¾ç½®ä¸ºè´Ÿæ•° 1&lt;&lt;30ã€‚ç›®çš„æ˜¯è®©æ–°è¿›å…¥çš„è¯»é”ç­‰å¾…å†™é”ä¹‹åé‡Šæ”¾é€šçŸ¥è¯»é”ã€‚åŒæ ·çš„å†™é”ä¹Ÿä¼šç­‰ç­‰å¾…ä¹‹å‰çš„è¯»é”éƒ½é‡Šæ”¾å®Œæ¯•ï¼Œæ‰ä¼šå¼€å§‹è¿›è¡Œåç»­çš„æ“ä½œã€‚ è€Œç­‰å†™é”é‡Šæ”¾å®Œä¹‹åï¼Œä¼šå°†å€¼é‡æ–°åŠ ä¸Š 1&lt;&lt;30, å¹¶é€šçŸ¥åˆšæ‰æ–°è¿›å…¥çš„è¯»é” (rw.readerSem)ï¼Œä¸¤è€…äº’ç›¸é™åˆ¶ã€‚</p></li><li><p>æ³¨æ„äº‹é¡¹</p></li></ul><ol><li>RWMutex æ˜¯å•å†™å¤šè¯»é”ï¼Œè¯¥é”å¯ä»¥åŠ å¤šä¸ªè¯»é”æˆ–è€…ä¸€ä¸ªå†™é”</li><li>è¯»é”å ç”¨çš„æƒ…å†µä¸‹ä¼šé˜»æ­¢å†™ï¼Œä¸ä¼šé˜»æ­¢è¯»ï¼Œå¤šä¸ª goroutine å¯ä»¥åŒæ—¶è·å–è¯»é”</li><li>å†™é”ä¼šé˜»æ­¢å…¶ä»– goroutineï¼ˆæ— è®ºè¯»å’Œå†™ï¼‰è¿›æ¥ï¼Œæ•´ä¸ªé”ç”±è¯¥ goroutine ç‹¬å </li><li>é€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯</li><li>RWMutex çš„ä¸€ä¸ªå†™é” Lock å»é”å®šä¸´ç•ŒåŒºçš„å…±äº«èµ„æºï¼Œå¦‚æœä¸´ç•ŒåŒºçš„å…±äº«èµ„æºå·²è¢«ï¼ˆè¯»é”æˆ–å†™é”ï¼‰é”å®šï¼Œè¿™ä¸ªå†™é”æ“ä½œçš„ goroutine å°†è¢«é˜»å¡ç›´åˆ° è§£é”ã€‚</li><li>RWMutex çš„è¯»é”æˆ–å†™é”åœ¨æœªé”å®šçŠ¶æ€ï¼Œè§£é”æ“ä½œéƒ½ä¼šå¼•å‘ panic</li><li>RWMutex åœ¨é¦–æ¬¡è¢«ä½¿ç”¨ä¹‹åå°±ä¸èƒ½å†è¢«æ‹·è´</li><li>å†™é”è¢«è§£é”åï¼Œæ‰€æœ‰å› æ“ä½œé”å®šè¯»é”è€Œè¢«é˜»å¡çš„ goroutine ä¼šè¢«å”¤é†’ï¼Œå¹¶éƒ½å¯ä»¥æˆåŠŸé”å®šè¯»é”ã€‚</li><li>è¯»é”è¢«è§£é”åï¼Œåœ¨æ²¡æœ‰è¢«å…¶ä»–è¯»é”é”å®šçš„å‰æä¸‹ï¼Œæ‰€æœ‰å› æ“ä½œé”å®šå†™é”è€Œè¢«é˜»å¡çš„ goroutineï¼Œå…¶ä¸­ç­‰å¾…æ—¶é—´æœ€é•¿çš„ä¸€ä¸ª goroutine ä¼šè¢«å”¤é†’ã€‚</li></ol><h2 id="sync-åŒ…ä¸­çš„ä¸¤ä¸ªå¯¹è±¡"><a href="#sync-åŒ…ä¸­çš„ä¸¤ä¸ªå¯¹è±¡" class="headerlink" title="sync åŒ…ä¸­çš„ä¸¤ä¸ªå¯¹è±¡"></a>sync åŒ…ä¸­çš„ä¸¤ä¸ªå¯¹è±¡</h2><h3 id="sync-Once"><a href="#sync-Once" class="headerlink" title="sync.Once"></a>sync.Once</h3><ol><li>Once å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸”ä»…ä»…æ‰§è¡Œä¸€æ¬¡åŠ¨ä½œï¼Œå¸¸å¸¸ç”¨äºå•ä¾‹å¯¹è±¡çš„åˆå§‹åŒ–åœºæ™¯ã€‚</li><li>Once å¸¸å¸¸ç”¨æ¥åˆå§‹åŒ–å•ä¾‹èµ„æºï¼Œæˆ–è€…å¹¶å‘è®¿é—®åªéœ€åˆå§‹åŒ–ä¸€æ¬¡çš„å…±äº«èµ„æºï¼Œæˆ–è€…åœ¨æµ‹è¯•çš„æ—¶å€™åˆå§‹åŒ–ä¸€æ¬¡æµ‹è¯•èµ„æºã€‚</li><li>sync.Once åªæš´éœ²äº†ä¸€ä¸ªæ–¹æ³• Doï¼Œä½ å¯ä»¥å¤šæ¬¡è°ƒç”¨ Do æ–¹æ³•ï¼Œä½†æ˜¯åªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨ Do æ–¹æ³•æ—¶ f å‚æ•°æ‰ä¼šæ‰§è¡Œï¼Œè¿™é‡Œçš„ f æ˜¯ä¸€ä¸ªæ— å‚æ•°æ— è¿”å›å€¼çš„å‡½æ•°ã€‚</li></ol><h3 id="sync-Pool"><a href="#sync-Pool" class="headerlink" title="sync.Pool"></a>sync.Pool</h3><p>&emsp;&emsp;å¯¹äºå¾ˆå¤šéœ€è¦é‡å¤åˆ†é…ã€å›æ”¶å†…å­˜çš„åœ°æ–¹ï¼Œsync.Pool æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚é¢‘ç¹åœ°åˆ†é…ã€å›æ”¶å†…å­˜ä¼šç»™ GC å¸¦æ¥ä¸€å®šçš„è´Ÿæ‹…ï¼Œä¸¥é‡çš„æ—¶å€™ä¼šå¼•èµ· CPU çš„æ¯›åˆºï¼Œè€Œ sync.Pool å¯ä»¥å°†æš‚æ—¶ä¸ç”¨çš„å¯¹è±¡ç¼“å­˜èµ·æ¥ï¼Œå¾…ä¸‹æ¬¡éœ€è¦çš„æ—¶å€™ç›´æ¥ä½¿ç”¨ï¼Œä¸ç”¨å†æ¬¡ç»è¿‡å†…å­˜åˆ†é…ï¼Œå¤ç”¨å¯¹è±¡çš„å†…å­˜ï¼Œå‡è½» GC çš„å‹åŠ›ï¼Œæå‡ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p><h1 id="Switch-å’Œ-Select-çš„åŒºåˆ«"><a href="#Switch-å’Œ-Select-çš„åŒºåˆ«" class="headerlink" title="Switch å’Œ Select çš„åŒºåˆ«"></a>Switch å’Œ Select çš„åŒºåˆ«</h1><h2 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h2><p><code>select</code>åªèƒ½åº”ç”¨äºchannelçš„æ“ä½œï¼Œæ—¢å¯ä»¥ç”¨äºchannelçš„æ•°æ®æ¥æ”¶ï¼Œä¹Ÿå¯ä»¥ç”¨äºchannelçš„æ•°æ®å‘é€ã€‚å¦‚æœ<code>select</code>çš„å¤šä¸ªåˆ†æ”¯éƒ½æ»¡è¶³æ¡ä»¶ï¼Œåˆ™ä¼šéšæœºçš„é€‰å–å…¶ä¸­ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„åˆ†æ”¯ã€‚<br><code>default</code>: selectä¸­çš„defaultæ˜¯å½“selectå‘ç°æ²¡æœ‰caseæ»¡è¶³,è¦blockæ—¶çš„é€‰æ‹©</p><h2 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h2><p><code>switch</code>å¯ä»¥ä¸ºå„ç§ç±»å‹è¿›è¡Œåˆ†æ”¯æ“ä½œï¼Œ è®¾ç½®å¯ä»¥ä¸ºæ¥å£ç±»å‹è¿›è¡Œåˆ†æ”¯åˆ¤æ–­(é€šè¿‡i.(type))ã€‚<code>switch</code> åˆ†æ”¯æ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œè¿™å’Œ<code>select</code>ä¸åŒã€‚<br><code>default</code>:  switchä¸­çš„defaultæ˜¯é»˜è®¤çš„æ„æ€,å½“æ‰€æœ‰caseä¸æ»¡è¶³çš„æ—¶å€™,å°±ä¼šæ‰§è¡Œdefault</p><h1 id="Go-runtime"><a href="#Go-runtime" class="headerlink" title="Go runtime"></a>Go runtime</h1><h2 id="åç¨‹è°ƒåº¦"><a href="#åç¨‹è°ƒåº¦" class="headerlink" title="åç¨‹è°ƒåº¦"></a>åç¨‹è°ƒåº¦</h2><h3 id="Gorutine"><a href="#Gorutine" class="headerlink" title="Gorutine"></a>Gorutine</h3><p>&emsp;&emsp;Goroutine â€œGoroutine æ˜¯ä¸€ä¸ªä¸å…¶ä»– goroutines å¹¶è¡Œè¿è¡Œåœ¨åŒä¸€åœ°å€ç©ºé—´çš„ Go å‡½æ•°æˆ–æ–¹æ³•ã€‚ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºç”±ä¸€ä¸ªæˆ–æ›´å¤šä¸ª goroutine ç»„æˆã€‚å®ƒä¸çº¿ç¨‹ã€åç¨‹ã€è¿› ç¨‹ç­‰ä¸åŒã€‚å®ƒæ˜¯ä¸€ä¸ª goroutineâ€ â€”â€” Rob Pike<br>&emsp;&emsp;Goroutines åœ¨åŒä¸€ä¸ªç”¨æˆ·åœ°å€ç©ºé—´é‡Œå¹¶è¡Œç‹¬ç«‹æ‰§è¡Œ functionsï¼Œchannels åˆ™ç”¨äº goroutines é—´çš„é€šä¿¡å’ŒåŒæ­¥è®¿é—®æ§åˆ¶ã€‚</p><h3 id="GMP-æ¨¡å‹"><a href="#GMP-æ¨¡å‹" class="headerlink" title="GMP æ¨¡å‹"></a>GMP æ¨¡å‹</h3><ol><li>Gï¼ˆGoroutineï¼‰ï¼šæˆ‘ä»¬æ‰€è¯´çš„åç¨‹ï¼Œä¸ºç”¨æˆ·çº§çš„è½»é‡çº§çº¿ç¨‹ï¼Œæ¯ä¸ª Goroutine å¯¹è±¡ä¸­çš„ sched ä¿å­˜ç€å…¶ä¸Šä¸‹æ–‡ä¿¡æ¯.</li><li>Mï¼ˆMachineï¼‰ï¼šå¯¹å†…æ ¸çº§çº¿ç¨‹çš„å°è£…ï¼Œæ•°é‡å¯¹åº”çœŸå®çš„ CPU æ•°ï¼ˆçœŸæ­£å¹²æ´»çš„å¯¹è±¡ï¼‰</li><li>Pï¼ˆProcessorï¼‰ï¼šå³ä¸º G å’Œ M çš„è°ƒåº¦å¯¹è±¡ï¼Œç”¨æ¥è°ƒåº¦ G å’Œ M ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œ å…¶æ•°é‡å¯é€šè¿‡ GOMAXPROCS()æ¥è®¾ç½®ï¼Œé»˜è®¤ä¸ºæ ¸å¿ƒæ•°ã€‚</li></ol><p>&emsp;&emsp;è°ƒåº¦å™¨æŠŠ G éƒ½åˆ†é…åˆ° M ä¸Šï¼Œä¸åŒçš„ G åœ¨ä¸åŒçš„ M å¹¶å‘è¿è¡Œæ—¶ï¼Œéƒ½éœ€è¦å‘ç³»ç»Ÿç”³è¯·èµ„æºï¼Œæ¯”å¦‚å †æ ˆå†…å­˜ç­‰ï¼Œå› ä¸ºèµ„æºæ˜¯å…¨å±€çš„ï¼Œå°±ä¼šå› ä¸ºèµ„æºç«äº‰ç…§æˆå¾ˆå¤šæ€§èƒ½æŸè€—ã€‚ä¸ºäº†è§£å†³è¿™ä¸€çš„é—®é¢˜ go ä» 1.1 ç‰ˆæœ¬å¼•å…¥ï¼Œåœ¨è¿è¡Œæ—¶ç³»ç»Ÿçš„æ—¶å€™åŠ å…¥ p å¯¹è±¡ï¼Œè®© P å»ç®¡ç†è¿™ä¸ª G å¯¹è±¡ï¼ŒM æƒ³è¦è¿è¡Œ Gï¼Œå¿…é¡»ç»‘å®š Pï¼Œæ‰èƒ½è¿è¡Œ P æ‰€ç®¡ç†çš„ Gã€‚å•çº¯çš„ GM æ¨¡å‹ä¼šå¼•èµ·ä»¥ä¸‹é—®é¢˜ï¼š</p><ol><li>å•ä¸€å…¨å±€äº’æ–¥é”(Sched.Lock)å’Œé›†ä¸­çŠ¶æ€å­˜å‚¨ï¼›</li><li>Goroutine ä¼ é€’é—®é¢˜ï¼ˆM ç»å¸¸åœ¨ M ä¹‹é—´ä¼ é€’â€å¯è¿è¡Œâ€çš„ goroutineï¼‰</li><li>æ¯ä¸ª M åšå†…å­˜ç¼“å­˜ï¼Œå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ï¼Œæ•°æ®å±€éƒ¨æ€§è¾ƒå·®</li><li>é¢‘ç¹ syscall è°ƒç”¨ï¼Œå¯¼è‡´ä¸¥é‡çš„çº¿ç¨‹é˜»å¡/è§£é”ï¼ŒåŠ å‰§é¢å¤–çš„æ€§èƒ½æŸè€—ã€‚</li></ol><h4 id="GMP-è°ƒåº¦æµç¨‹"><a href="#GMP-è°ƒåº¦æµç¨‹" class="headerlink" title="GMP è°ƒåº¦æµç¨‹"></a>GMP è°ƒåº¦æµç¨‹</h4><p>&emsp;&emsp;åœ¨ Go ä¸­ï¼Œ<strong>çº¿ç¨‹æ˜¯è¿è¡Œ goroutine çš„å®ä½“ï¼Œè°ƒåº¦å™¨çš„åŠŸèƒ½æ˜¯æŠŠå¯è¿è¡Œçš„ goroutine åˆ†é…åˆ°å·¥ä½œçº¿ç¨‹ä¸Š</strong>ã€‚<br><img lazyload src="/images/loading.svg" data-src="goroutine.jpg" alt="avatar"></p><ol><li>å…¨å±€é˜Ÿåˆ—ï¼ˆGlobal Queueï¼‰ï¼šå­˜æ”¾ç­‰å¾…è¿è¡Œçš„ Gã€‚</li><li>P çš„æœ¬åœ°é˜Ÿåˆ—ï¼šåŒå…¨å±€é˜Ÿåˆ—ç±»ä¼¼ï¼Œå­˜æ”¾çš„ä¹Ÿæ˜¯ç­‰å¾…è¿è¡Œçš„ Gï¼Œå­˜çš„æ•°é‡æœ‰é™ï¼Œä¸è¶…è¿‡ 256 ä¸ªã€‚æ–°å»º Gâ€™æ—¶ï¼ŒGâ€™ä¼˜å…ˆåŠ å…¥åˆ° P çš„æœ¬åœ°é˜Ÿåˆ—ï¼Œå¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œåˆ™ä¼šæŠŠæœ¬åœ°é˜Ÿåˆ—ä¸­ä¸€åŠçš„ G ç§»åŠ¨åˆ°å…¨å±€é˜Ÿåˆ—ã€‚</li><li>P åˆ—è¡¨ï¼šæ‰€æœ‰çš„ P éƒ½åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºï¼Œå¹¶ä¿å­˜åœ¨æ•°ç»„ä¸­ï¼Œæœ€å¤šæœ‰ GOMAXPROCS(å¯é…ç½®) ä¸ªã€‚</li><li>Mï¼šçº¿ç¨‹æƒ³è¿è¡Œä»»åŠ¡å°±å¾—è·å– Pï¼Œä» P çš„æœ¬åœ°é˜Ÿåˆ—è·å– Gï¼ŒP é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼ŒM ä¹Ÿä¼šå°è¯•ä»å…¨å±€é˜Ÿåˆ—æ‹¿ä¸€æ‰¹ G æ”¾åˆ° P çš„æœ¬åœ°é˜Ÿåˆ—ï¼Œæˆ–ä»å…¶ä»– P çš„æœ¬åœ°é˜Ÿåˆ—å·ä¸€åŠæ”¾åˆ°è‡ªå·± P çš„æœ¬åœ°é˜Ÿåˆ—ã€‚M è¿è¡Œ Gï¼ŒG æ‰§è¡Œä¹‹åï¼ŒM ä¼šä» P è·å–ä¸‹ä¸€ä¸ª Gï¼Œä¸æ–­é‡å¤ä¸‹å»ã€‚</li></ol><p><strong>Goroutine è°ƒåº¦å™¨å’Œ OS è°ƒåº¦å™¨æ˜¯é€šè¿‡ M ç»“åˆèµ·æ¥çš„ï¼Œæ¯ä¸ª M éƒ½ä»£è¡¨äº† 1 ä¸ªå†…æ ¸çº¿ç¨‹ï¼ŒOS è°ƒåº¦å™¨è´Ÿè´£æŠŠå†…æ ¸çº¿ç¨‹åˆ†é…åˆ° CPU çš„æ ¸ä¸Šæ‰§è¡Œ</strong>ã€‚</p><blockquote><p>æœ‰å…³ P å’Œ M çš„ä¸ªæ•°é—®é¢˜</p><ol><li>P çš„æ•°é‡ï¼šç”±å¯åŠ¨æ—¶ç¯å¢ƒå˜é‡ $GOMAXPROCS æˆ–è€…æ˜¯ç”± runtime çš„æ–¹æ³• GOMAXPROCS() å†³å®šã€‚è¿™æ„å‘³ç€åœ¨ç¨‹åºæ‰§è¡Œçš„<strong>ä»»æ„æ—¶åˆ»éƒ½åªæœ‰ $GOMAXPROCS ä¸ª goroutine åœ¨åŒæ—¶è¿è¡Œ</strong>ã€‚</li><li>M çš„æ•°é‡ï¼šï¼ˆ1ï¼‰ go è¯­è¨€æœ¬èº«çš„é™åˆ¶ï¼šgo ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¼šè®¾ç½® M çš„æœ€å¤§æ•°é‡ï¼Œé»˜è®¤ 10000. ä½†æ˜¯å†…æ ¸å¾ˆéš¾æ”¯æŒè¿™ä¹ˆå¤šçš„çº¿ç¨‹æ•°ï¼Œæ‰€ä»¥è¿™ä¸ªé™åˆ¶å¯ä»¥å¿½ç•¥ã€‚<br>ï¼ˆ2ï¼‰ runtime/debug ä¸­çš„ SetMaxThreads å‡½æ•°ï¼Œè®¾ç½® M çš„æœ€å¤§æ•°é‡<br>ï¼ˆ3ï¼‰ä¸€ä¸ª M é˜»å¡äº†ï¼Œä¼šåˆ›å»ºæ–°çš„ M</li></ol><p> <strong>M ä¸ P çš„æ•°é‡æ²¡æœ‰ç»å¯¹å…³ç³»ï¼Œä¸€ä¸ª M é˜»å¡ï¼ŒP å°±ä¼šå»åˆ›å»ºæˆ–è€…åˆ‡æ¢å¦ä¸€ä¸ª Mï¼Œæ‰€ä»¥ï¼Œå³ä½¿ P çš„é»˜è®¤æ•°é‡æ˜¯ 1ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šåˆ›å»ºå¾ˆå¤šä¸ª M å‡ºæ¥ã€‚</strong></p></blockquote><blockquote><p>P å’Œ M ä½•æ—¶è¢«åˆ›å»º</p><ol><li>P ä½•æ—¶åˆ›å»ºï¼šåœ¨ç¡®å®šäº† P çš„æœ€å¤§æ•°é‡ n åï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šæ ¹æ®è¿™ä¸ªæ•°é‡åˆ›å»º n ä¸ª Pã€‚</li><li>M ä½•æ—¶åˆ›å»ºï¼šæ²¡æœ‰è¶³å¤Ÿçš„ M æ¥å…³è” P å¹¶è¿è¡Œå…¶ä¸­çš„å¯è¿è¡Œçš„ Gã€‚æ¯”å¦‚æ‰€æœ‰çš„ M æ­¤æ—¶éƒ½é˜»å¡ä½äº†ï¼Œè€Œ P ä¸­è¿˜æœ‰å¾ˆå¤šå°±ç»ªä»»åŠ¡ï¼Œå°±ä¼šå»å¯»æ‰¾ç©ºé—²çš„ Mï¼Œè€Œæ²¡æœ‰ç©ºé—²çš„ï¼Œå°±ä¼šå»åˆ›å»ºæ–°çš„ Mã€‚</li></ol></blockquote><h5 id="è°ƒåº¦å™¨çš„è®¾è®¡ç­–ç•¥"><a href="#è°ƒåº¦å™¨çš„è®¾è®¡ç­–ç•¥" class="headerlink" title="è°ƒåº¦å™¨çš„è®¾è®¡ç­–ç•¥"></a>è°ƒåº¦å™¨çš„è®¾è®¡ç­–ç•¥</h5><ol><li>work stealing æœºåˆ¶ï¼šå½“æœ¬çº¿ç¨‹æ— å¯è¿è¡Œçš„ G æ—¶ï¼Œå°è¯•ä»å…¶ä»–çº¿ç¨‹ç»‘å®šçš„ P å·å– Gï¼Œè€Œä¸æ˜¯é”€æ¯çº¿ç¨‹ã€‚</li><li>hand off æœºåˆ¶ï¼šå½“æœ¬çº¿ç¨‹å› ä¸º G è¿›è¡Œç³»ç»Ÿè°ƒç”¨é˜»å¡æ—¶ï¼Œçº¿ç¨‹é‡Šæ”¾ç»‘å®šçš„ Pï¼ŒæŠŠ P è½¬ç§»ç»™å…¶ä»–ç©ºé—²çš„çº¿ç¨‹æ‰§è¡Œã€‚</li></ol><p><img lazyload src="/images/loading.svg" data-src="gmp.jpg" alt="avatar"></p><ol><li>æ¯ä¸ª P æœ‰ä¸ªå±€éƒ¨é˜Ÿåˆ—ï¼Œå±€éƒ¨é˜Ÿåˆ—ä¿å­˜å¾…æ‰§è¡Œçš„ goroutine(æµç¨‹ 2)ï¼Œå½“ M ç»‘å®šçš„ P çš„çš„å±€éƒ¨é˜Ÿåˆ—å·²ç»æ»¡äº†ä¹‹åå°±ä¼šæŠŠ goroutine æ”¾åˆ°å…¨å±€é˜Ÿåˆ—(æµç¨‹ 2-1)</li><li>æ¯ä¸ª P å’Œä¸€ä¸ª M ç»‘å®šï¼ŒM æ˜¯çœŸæ­£çš„æ‰§è¡Œ P ä¸­ goroutine çš„å®ä½“(æµç¨‹ 3)ï¼ŒM ä»ç»‘å®šçš„ P ä¸­çš„å±€éƒ¨é˜Ÿåˆ—è·å– G æ¥æ‰§è¡Œ</li><li>å½“ M ç»‘å®šçš„ P çš„å±€éƒ¨é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼ŒM ä¼šä»å…¨å±€é˜Ÿåˆ—è·å–åˆ°æœ¬åœ°é˜Ÿåˆ—æ¥æ‰§è¡Œ G(æµç¨‹ 3.1)ï¼Œå½“ä»å…¨å±€é˜Ÿåˆ—ä¸­æ²¡æœ‰è·å–åˆ°å¯æ‰§è¡Œçš„ G æ—¶å€™ï¼ŒM ä¼šä»å…¶ä»– P çš„å±€éƒ¨é˜Ÿåˆ—ä¸­å·å– G æ¥æ‰§è¡Œ(æµç¨‹ 3.2)ï¼Œè¿™ç§ä»å…¶ä»– P å·çš„æ–¹å¼ç§°ä¸º work stealing</li><li>å½“ G å› ç³»ç»Ÿè°ƒç”¨(syscall)é˜»å¡æ—¶ä¼šé˜»å¡ Mï¼Œæ­¤æ—¶ P ä¼šå’Œ M è§£ç»‘å³ hand offï¼Œå¹¶å¯»æ‰¾æ–°çš„ idle çš„ Mï¼Œè‹¥æ²¡æœ‰ idle çš„ M å°±ä¼šæ–°å»ºä¸€ä¸ª M(æµç¨‹ 5.1)ã€‚</li><li>å½“ G å›  channel æˆ–è€… network I/O é˜»å¡æ—¶ï¼Œä¸ä¼šé˜»å¡ Mï¼ŒM ä¼šå¯»æ‰¾å…¶ä»– runnable çš„ Gï¼›å½“é˜»å¡çš„ G æ¢å¤åä¼šé‡æ–°è¿›å…¥ runnable è¿›å…¥ P é˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œ(æµç¨‹ 5.3)</li><li>å½“ M ç³»ç»Ÿè°ƒç”¨ç»“æŸæ—¶å€™ï¼Œè¿™ä¸ª G ä¼šå°è¯•è·å–ä¸€ä¸ªç©ºé—²çš„ P æ‰§è¡Œï¼Œå¹¶æ”¾å…¥åˆ°è¿™ä¸ª P çš„æœ¬åœ°é˜Ÿåˆ—ã€‚å¦‚æœè·å–ä¸åˆ° Pï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹ M å˜æˆä¼‘çœ çŠ¶æ€ï¼Œ åŠ å…¥åˆ°ç©ºé—²çº¿ç¨‹ä¸­ï¼Œç„¶åè¿™ä¸ª G ä¼šè¢«æ”¾å…¥å…¨å±€é˜Ÿåˆ—ä¸­ã€‚</li></ol><h5 id="ç‰¹æ®Šçš„-M0-å’Œ-G0"><a href="#ç‰¹æ®Šçš„-M0-å’Œ-G0" class="headerlink" title="ç‰¹æ®Šçš„ M0 å’Œ G0"></a>ç‰¹æ®Šçš„ M0 å’Œ G0</h5><p>M0ï¼šå¯åŠ¨ç¨‹åºåçš„ç¼–å·ä¸º 0 çš„ä¸»çº¿ç¨‹ï¼Œè¿™ä¸ª M å¯¹åº”çš„å®ä¾‹ä¼šåœ¨å…¨å±€å˜é‡ runtime.m0 ä¸­ï¼Œä¸éœ€è¦åœ¨ heap ä¸Šåˆ†é…ï¼ŒM0 è´Ÿè´£æ‰§è¡Œåˆå§‹åŒ–æ“ä½œå’Œå¯åŠ¨ç¬¬ä¸€ä¸ª Gï¼Œ åœ¨ä¹‹å M0 å°±å’Œå…¶ä»–çš„ M ä¸€æ ·äº†ã€‚<br>G0ï¼šæ˜¯æ¯æ¬¡å¯åŠ¨ä¸€ä¸ª M éƒ½ä¼šç¬¬ä¸€ä¸ªåˆ›å»ºçš„ goroutineï¼ŒG0 ä»…ç”¨äºè´Ÿè´£è°ƒåº¦çš„ Gï¼ŒG0 ä¸æŒ‡å‘ä»»ä½•å¯æ‰§è¡Œçš„å‡½æ•°ï¼Œæ¯ä¸ª M éƒ½ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„ G0ã€‚åœ¨è°ƒåº¦æˆ–ç³»ç»Ÿè°ƒç”¨æ—¶ä¼šä½¿ç”¨ G0 çš„æ ˆç©ºé—´ï¼Œå…¨å±€å˜é‡çš„ G0 æ˜¯ M0 çš„ G0ã€‚</p><h3 id="Go-è°ƒåº¦å™¨è°ƒåº¦åœºæ™¯è¿‡ç¨‹å…¨è§£æ"><a href="#Go-è°ƒåº¦å™¨è°ƒåº¦åœºæ™¯è¿‡ç¨‹å…¨è§£æ" class="headerlink" title="Go è°ƒåº¦å™¨è°ƒåº¦åœºæ™¯è¿‡ç¨‹å…¨è§£æ"></a>Go è°ƒåº¦å™¨è°ƒåº¦åœºæ™¯è¿‡ç¨‹å…¨è§£æ</h3><ol><li><p>åœºæ™¯ 1<br>P æ‹¥æœ‰ G1ï¼ŒM1 è·å– P åå¼€å§‹è¿è¡Œ G1ï¼ŒG1 ä½¿ç”¨ <code>go func()</code> åˆ›å»ºäº† G2ï¼Œä¸ºäº†å±€éƒ¨æ€§ G2 ä¼˜å…ˆåŠ å…¥åˆ° P1 çš„æœ¬åœ°é˜Ÿåˆ—ã€‚<br><img lazyload src="/images/loading.svg" data-src="q1.jpg" alt="avatar"></p></li><li><p>åœºæ™¯ 2<br>G1 è¿è¡Œå®Œæˆå (å‡½æ•°ï¼šgoexit)ï¼ŒM ä¸Šè¿è¡Œçš„ goroutine åˆ‡æ¢ä¸º G0ï¼ŒG0 è´Ÿè´£è°ƒåº¦æ—¶åç¨‹çš„åˆ‡æ¢ï¼ˆå‡½æ•°ï¼šscheduleï¼‰ã€‚ä» P çš„æœ¬åœ°é˜Ÿåˆ—å– G2ï¼Œä» G0 åˆ‡æ¢åˆ° G2ï¼Œå¹¶å¼€å§‹è¿è¡Œ G2 (å‡½æ•°ï¼šexecute)ã€‚å®ç°äº†çº¿ç¨‹ M1 çš„å¤ç”¨ã€‚<br><img lazyload src="/images/loading.svg" data-src="q2.jpg" alt="avatar"></p></li><li><p>åœºæ™¯ 3<br>å‡è®¾æ¯ä¸ª P çš„æœ¬åœ°é˜Ÿåˆ—åªèƒ½å­˜ 3 ä¸ª Gã€‚G2 è¦åˆ›å»ºäº† 6 ä¸ª Gï¼Œå‰ 3 ä¸ª Gï¼ˆG3, G4, G5ï¼‰å·²ç»åŠ å…¥ p1 çš„æœ¬åœ°é˜Ÿåˆ—ï¼Œp1 æœ¬åœ°é˜Ÿåˆ—æ»¡äº†ã€‚<br><img lazyload src="/images/loading.svg" data-src="q3.jpg" alt="avatar"></p></li><li><p>åœºæ™¯ 4<br>G2 åœ¨åˆ›å»º G7 çš„æ—¶å€™ï¼Œå‘ç° P1 çš„æœ¬åœ°é˜Ÿåˆ—å·²æ»¡ï¼Œéœ€è¦æ‰§è¡Œ<strong>è´Ÿè½½å‡è¡¡</strong> (æŠŠ P1 ä¸­æœ¬åœ°é˜Ÿåˆ—ä¸­å‰ä¸€åŠçš„ Gï¼Œè¿˜æœ‰æ–°åˆ›å»º G <strong>è½¬ç§»</strong>åˆ°å…¨å±€é˜Ÿåˆ—)<br><img lazyload src="/images/loading.svg" data-src="q4.jpg" alt="avatar"></p></li><li><p>G2 åˆ›å»º G8 æ—¶ï¼ŒP1 çš„æœ¬åœ°é˜Ÿåˆ—æœªæ»¡ï¼Œæ‰€ä»¥ G8 ä¼šè¢«åŠ å…¥åˆ° P1 çš„æœ¬åœ°é˜Ÿåˆ—ã€‚G8 åŠ å…¥åˆ° P1 ç‚¹æœ¬åœ°é˜Ÿåˆ—çš„åŸå› è¿˜æ˜¯å› ä¸º P1 æ­¤æ—¶åœ¨ä¸ M1 ç»‘å®šï¼Œè€Œ G2 æ­¤æ—¶æ˜¯ M1 åœ¨æ‰§è¡Œã€‚æ‰€ä»¥ G2 åˆ›å»ºçš„æ–°çš„ G ä¼šä¼˜å…ˆæ”¾ç½®åˆ°è‡ªå·±çš„ M ç»‘å®šçš„ P ä¸Šã€‚<br><img lazyload src="/images/loading.svg" data-src="q5.jpg" alt="avatar"></p></li><li><p>åœºæ™¯ 6<br>è§„å®šï¼šåœ¨åˆ›å»º G æ—¶ï¼Œè¿è¡Œçš„ G ä¼šå°è¯•å”¤é†’å…¶ä»–ç©ºé—²çš„ P å’Œ M ç»„åˆå»æ‰§è¡Œã€‚<br><img lazyload src="/images/loading.svg" data-src="q6.jpg" alt="avatar"><br>å‡å®š G2 å”¤é†’äº† M2ï¼ŒM2 ç»‘å®šäº† P2ï¼Œå¹¶è¿è¡Œ G0ï¼Œä½† P2 æœ¬åœ°é˜Ÿåˆ—æ²¡æœ‰ Gï¼ŒM2 æ­¤æ—¶ä¸ºè‡ªæ—‹çº¿ç¨‹<strong>ï¼ˆæ²¡æœ‰ G ä½†ä¸ºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ï¼Œä¸æ–­å¯»æ‰¾ Gï¼‰</strong>ã€‚</p></li><li><p>åœºæ™¯ 7<br>M2 å°è¯•ä»å…¨å±€é˜Ÿåˆ— (ç®€ç§° â€œGQâ€) å–ä¸€æ‰¹ G æ”¾åˆ° P2 çš„æœ¬åœ°é˜Ÿåˆ—ï¼ˆå‡½æ•°ï¼š<code>findrunnable()</code>ï¼‰ã€‚è‡³å°‘ä»å…¨å±€é˜Ÿåˆ—å– 1 ä¸ª gï¼Œä½†æ¯æ¬¡ä¸è¦ä»å…¨å±€é˜Ÿåˆ—ç§»åŠ¨å¤ªå¤šçš„ g åˆ° p æœ¬åœ°é˜Ÿåˆ—ï¼Œç»™å…¶ä»– p ç•™ç‚¹ã€‚è¿™æ˜¯<strong>ä»å…¨å±€é˜Ÿåˆ—åˆ° P æœ¬åœ°é˜Ÿåˆ—çš„è´Ÿè½½å‡è¡¡</strong>ã€‚<br><img lazyload src="/images/loading.svg" data-src="q7.jpg" alt="avatar"></p></li><li><p>åœºæ™¯ 8<br>å‡è®¾ G2 ä¸€ç›´åœ¨ M1 ä¸Šè¿è¡Œï¼Œç»è¿‡ 2 è½®åï¼ŒM2 å·²ç»æŠŠ G7ã€G4 ä»å…¨å±€é˜Ÿåˆ—è·å–åˆ°äº† P2 çš„æœ¬åœ°é˜Ÿåˆ—å¹¶å®Œæˆè¿è¡Œï¼Œå…¨å±€é˜Ÿåˆ—å’Œ P2 çš„æœ¬åœ°é˜Ÿåˆ—éƒ½ç©ºäº†ï¼Œå¦‚åœºæ™¯ 8 å›¾çš„å·¦åŠéƒ¨åˆ†ã€‚<br><img lazyload src="/images/loading.svg" data-src="q8.jpg" alt="avatar"></p></li><li><p>åœºæ™¯ 9<br>G1 æœ¬åœ°é˜Ÿåˆ— G5ã€G6 å·²ç»è¢«å…¶ä»– M å·èµ°å¹¶è¿è¡Œå®Œæˆï¼Œå½“å‰ M1 å’Œ M2 åˆ†åˆ«åœ¨è¿è¡Œ G2 å’Œ G8ï¼ŒM3 å’Œ M4 æ²¡æœ‰ goroutine å¯ä»¥è¿è¡Œï¼ŒM3 å’Œ M4 å¤„äºè‡ªæ—‹çŠ¶æ€ï¼Œå®ƒä»¬ä¸æ–­å¯»æ‰¾ goroutineã€‚<br><img lazyload src="/images/loading.svg" data-src="q9.jpg" alt="avatar"></p></li><li><p>åœºæ™¯ 10<br>å‡å®šå½“å‰é™¤äº† M3 å’Œ M4 ä¸ºè‡ªæ—‹çº¿ç¨‹ï¼Œè¿˜æœ‰ M5 å’Œ M6 ä¸ºç©ºé—²çš„çº¿ç¨‹ (æ²¡æœ‰å¾—åˆ° P çš„ç»‘å®šï¼Œæ³¨æ„æˆ‘ä»¬è¿™é‡Œæœ€å¤šå°±åªèƒ½å¤Ÿå­˜åœ¨ 4 ä¸ª Pï¼Œæ‰€ä»¥ P çš„æ•°é‡åº”è¯¥æ°¸è¿œæ˜¯ M&gt;=P, å¤§éƒ¨åˆ†éƒ½æ˜¯ M åœ¨æŠ¢å éœ€è¦è¿è¡Œçš„ P)ï¼ŒG8 åˆ›å»ºäº† G9ï¼ŒG8 è¿›è¡Œäº†é˜»å¡çš„ç³»ç»Ÿè°ƒç”¨ï¼ŒM2 å’Œ P2 ç«‹å³è§£ç»‘ï¼ŒP2 ä¼šæ‰§è¡Œä»¥ä¸‹åˆ¤æ–­ï¼šå¦‚æœ P2 æœ¬åœ°é˜Ÿåˆ—æœ‰ Gã€å…¨å±€é˜Ÿåˆ—æœ‰ G æˆ–æœ‰ç©ºé—²çš„ Mï¼ŒP2 éƒ½ä¼šç«‹é©¬å”¤é†’ 1 ä¸ª M å’Œå®ƒç»‘å®šï¼Œå¦åˆ™ P2 åˆ™ä¼šåŠ å…¥åˆ°ç©ºé—² P åˆ—è¡¨ï¼Œç­‰å¾… M æ¥è·å–å¯ç”¨çš„ pã€‚æœ¬åœºæ™¯ä¸­ï¼ŒP2 æœ¬åœ°é˜Ÿåˆ—æœ‰ G9ï¼Œå¯ä»¥å’Œå…¶ä»–ç©ºé—²çš„çº¿ç¨‹ M5 ç»‘å®šã€‚<br><img lazyload src="/images/loading.svg" data-src="q10.jpg" alt="avatar"></p></li><li><p>åœºæ™¯ 11<br>G8 åˆ›å»ºäº† G9ï¼Œå‡å¦‚ G8 è¿›è¡Œäº†<strong>éé˜»å¡ç³»ç»Ÿè°ƒç”¨</strong>ã€‚<br><img lazyload src="/images/loading.svg" data-src="q11.jpg" alt="avatar"><br>M2 å’Œ P2 ä¼šè§£ç»‘ï¼Œä½† M2 ä¼šè®°ä½ P2ï¼Œç„¶å G8 å’Œ M2 è¿›å…¥ç³»ç»Ÿè°ƒç”¨çŠ¶æ€ã€‚å½“ G8 å’Œ M2 é€€å‡ºç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œä¼šå°è¯•è·å– P2ï¼Œå¦‚æœæ— æ³•è·å–ï¼Œåˆ™è·å–ç©ºé—²çš„ Pï¼Œå¦‚æœä¾ç„¶æ²¡æœ‰ï¼ŒG8 ä¼šè¢«è®°ä¸ºå¯è¿è¡ŒçŠ¶æ€ï¼Œå¹¶åŠ å…¥åˆ°å…¨å±€é˜Ÿåˆ—ï¼ŒM2 å› ä¸ºæ²¡æœ‰ P çš„ç»‘å®šè€Œå˜æˆä¼‘çœ çŠ¶æ€ (é•¿æ—¶é—´ä¼‘çœ ç­‰å¾… GC å›æ”¶é”€æ¯)ã€‚</p></li></ol><h3 id="è°ƒåº¦"><a href="#è°ƒåº¦" class="headerlink" title="è°ƒåº¦"></a>è°ƒåº¦</h3><h4 id="åä½œå¼çš„è°ƒåº¦"><a href="#åä½œå¼çš„è°ƒåº¦" class="headerlink" title="åä½œå¼çš„è°ƒåº¦"></a>åä½œå¼çš„è°ƒåº¦</h4><p>&emsp;&emsp;åœ¨ 1.14 ç‰ˆæœ¬ä¹‹å‰ï¼Œç¨‹åºåªèƒ½ä¾é  Goroutine ä¸»åŠ¨è®©å‡º CPU èµ„æºæ‰èƒ½è§¦å‘è°ƒåº¦ï¼Œå­˜åœ¨é—®é¢˜:</p><ol><li>æŸäº› Goroutine å¯ä»¥é•¿æ—¶é—´å ç”¨çº¿ç¨‹ï¼Œé€ æˆå…¶å®ƒ Goroutine çš„é¥¥é¥¿</li><li>åƒåœ¾å›æ”¶éœ€è¦æš‚åœæ•´ä¸ªç¨‹åºï¼ˆStop-the-worldï¼ŒSTWï¼‰ï¼Œæœ€é•¿å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿçš„æ—¶é—´ï¼Œå¯¼è‡´æ•´ä¸ªç¨‹åºæ— æ³•å·¥ä½œã€‚</li></ol><h4 id="åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦"><a href="#åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦" class="headerlink" title="åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦"></a>åŸºäºä¿¡å·çš„æŠ¢å å¼è°ƒåº¦</h4><p>&emsp;&emsp;GO çš„è°ƒåº¦å™¨æ˜¯è¿Ÿé’çš„ï¼Œå®ƒå¾ˆå¯èƒ½ä»€ä¹ˆéƒ½æ²¡åšï¼Œç›´åˆ° M é˜»å¡äº†ç›¸å½“é•¿æ—¶é—´ä»¥åï¼Œæ‰ä¼šå‘ç°æœ‰ä¸€ä¸ª P/M è¢« syscall é˜»å¡äº†ã€‚ç„¶åï¼Œæ‰ä¼šç”¨ç©ºé—²çš„ M æ¥å¼ºè¿™ä¸ª Pã€‚é€šè¿‡ sysmon ç›‘æ§å®ç°çš„æŠ¢å å¼è°ƒåº¦ï¼Œæœ€å¿«åœ¨ 20usï¼Œæœ€æ…¢åœ¨ 10-20ms æ‰ ä¼šå‘ç°æœ‰ä¸€ä¸ª M æŒæœ‰ P å¹¶é˜»å¡äº†ã€‚æ“ä½œç³»ç»Ÿåœ¨ 1ms å†…å¯ä»¥å®Œæˆå¾ˆå¤šæ¬¡çº¿ç¨‹è°ƒåº¦ï¼ˆä¸€èˆ¬æƒ…å†µ 1ms å¯ä»¥å®Œæˆå‡ åæ¬¡çº¿ç¨‹è°ƒåº¦ï¼‰ï¼ŒGo å‘èµ· IO/syscall çš„æ—¶å€™æ‰§ è¡Œè¯¥ G çš„ M ä¼šé˜»å¡ç„¶åè¢« OS è°ƒåº¦èµ°ï¼ŒP ä»€ä¹ˆä¹Ÿä¸å¹²ï¼Œsysmon æœ€æ…¢è¦ 10-20ms æ‰èƒ½å‘ç°è¿™ä¸ªé˜»å¡ï¼Œè¯´ä¸å®šé‚£æ—¶å€™é˜»å¡å·²ç»ç»“æŸäº†ï¼Œå®è´µçš„ P èµ„æºå°±è¿™ä¹ˆè¢«é˜»å¡çš„ M æµªè´¹äº†ã€‚</p><h3 id="GMP-è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡"><a href="#GMP-è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡" class="headerlink" title="GMP è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡"></a>GMP è°ƒåº¦è¿‡ç¨‹ä¸­å­˜åœ¨å“ªäº›é˜»å¡</h3><ol><li>I/Oï¼Œselect</li><li>block on syscall</li><li>channel</li><li>ç­‰å¾…é”</li><li>runtime.Gosched() (G0 è°ƒåº¦ goroutine)</li></ol><h2 id="å†…å­˜åˆ†é…"><a href="#å†…å­˜åˆ†é…" class="headerlink" title="å†…å­˜åˆ†é…"></a>å†…å­˜åˆ†é…</h2><h3 id="Golang-ç®€è¦å†…å­˜åˆ’åˆ†"><a href="#Golang-ç®€è¦å†…å­˜åˆ’åˆ†" class="headerlink" title="Golang ç®€è¦å†…å­˜åˆ’åˆ†"></a>Golang ç®€è¦å†…å­˜åˆ’åˆ†</h3><p><img lazyload src="/images/loading.svg" data-src="mem.jpg" alt="avatar"><br>&emsp;&emsp;å¯ä»¥ç®€å•çš„è®¤ä¸º Golang ç¨‹åºåœ¨å¯åŠ¨æ—¶ï¼Œä¼šå‘æ“ä½œç³»ç»Ÿç”³è¯·ä¸€å®šåŒºåŸŸçš„å†…å­˜ï¼Œåˆ†ä¸ºæ ˆï¼ˆStackï¼‰å’Œå †ï¼ˆHeapï¼‰ã€‚æ ˆå†…å­˜ä¼šéšç€å‡½æ•°çš„è°ƒç”¨åˆ†é…å’Œå›æ”¶ï¼›å †å†…å­˜ç”±ç¨‹åºç”³è¯·åˆ†é…ï¼Œç”±åƒåœ¾å›æ”¶å™¨ï¼ˆGarbage Collectorï¼‰è´Ÿè´£å›æ”¶ã€‚æ€§èƒ½ä¸Šï¼Œæ ˆå†…å­˜çš„ä½¿ç”¨å’Œå›æ”¶æ›´è¿…é€Ÿä¸€äº›ï¼›å°½ç®¡Golang çš„ GC å¾ˆé«˜æ•ˆï¼Œä½†ä¹Ÿä¸å¯é¿å…çš„ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½æŸè€—ã€‚å› æ­¤ï¼ŒGo ä¼˜å…ˆä½¿ç”¨æ ˆå†…å­˜è¿›è¡Œå†…å­˜åˆ†é…ã€‚åœ¨ä¸å¾—ä¸å°†å¯¹è±¡åˆ†é…åˆ°å †ä¸Šæ—¶ï¼Œæ‰å°†ç‰¹å®šçš„å¯¹è±¡æ”¾åˆ°å †ä¸­ã€‚</p><h3 id="æ ˆå’Œå †"><a href="#æ ˆå’Œå †" class="headerlink" title="æ ˆå’Œå †"></a>æ ˆå’Œå †</h3><p><img lazyload src="/images/loading.svg" data-src="stackHeap.png" alt="avatar"><br>&emsp;&emnsp;ä¸Šå›¾å±•ç¤ºäº†ä¸€ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜åˆ’åˆ†ï¼Œä»£ç ä¸­ä½¿ç”¨çš„å†…å­˜åœ°å€éƒ½æ˜¯è™šæ‹Ÿå†…å­˜åœ°å€ï¼Œè€Œä¸æ˜¯å®é™…çš„ç‰©ç†å†…å­˜åœ°å€ã€‚æ ˆå’Œå †åªæ˜¯è™šæ‹Ÿå†…å­˜ä¸Š2å—ä¸åŒåŠŸèƒ½çš„å†…å­˜åŒºåŸŸï¼š</p><ul><li>æ ˆåœ¨é«˜åœ°å€ï¼Œä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿ã€‚</li><li>å †åœ¨ä½åœ°å€ï¼Œä»ä½åœ°å€å‘é«˜åœ°å€å¢é•¿ã€‚</li></ul><blockquote><p><strong>æ ˆå’Œå †ç›¸æ¯”æœ‰è¿™ä¹ˆå‡ ä¸ªå¥½å¤„</strong>ï¼š</p><ol><li> æ ˆçš„å†…å­˜ç®¡ç†ç®€å•ï¼Œåˆ†é…æ¯”å †ä¸Šå¿«ã€‚</li><li>æ ˆçš„å†…å­˜ä¸éœ€è¦å›æ”¶ï¼Œè€Œå †éœ€è¦ï¼Œæ— è®ºæ˜¯ä¸»åŠ¨freeï¼Œè¿˜æ˜¯è¢«åŠ¨çš„åƒåœ¾å›æ”¶ï¼Œè¿™éƒ½éœ€è¦èŠ±è´¹é¢å¤–çš„CPUã€‚ </li><li>æ ˆä¸Šçš„å†…å­˜æœ‰æ›´å¥½çš„å±€éƒ¨æ€§ï¼Œå †ä¸Šå†…å­˜è®¿é—®å°±ä¸é‚£ä¹ˆå‹å¥½äº†ï¼ŒCPUè®¿é—®çš„2å—æ•°æ®å¯èƒ½åœ¨ä¸åŒçš„é¡µä¸Šï¼ŒCPUè®¿é—®æ•°æ®çš„æ—¶é—´å¯èƒ½å°±ä¸Šå»äº†ã€‚</li></ol></blockquote><h3 id="æ ˆå†…å­˜åˆ†é…"><a href="#æ ˆå†…å­˜åˆ†é…" class="headerlink" title="æ ˆå†…å­˜åˆ†é…"></a>æ ˆå†…å­˜åˆ†é…</h3><ol><li>ä»¥ä¸€æ®µç®€å•çš„ä»£ç ä½œä¸ºç¤ºä¾‹ï¼Œåˆ†æè¿™æ®µä»£ç çš„å†…å­˜åˆ†é…è¿‡ç¨‹ã€‚<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">n := <span class="number">4</span>  </span><br><span class="line">n2 := square(n)  </span><br><span class="line">fmt.Println(n2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">square</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span>&#123;  </span><br><span class="line"><span class="keyword">return</span> n * n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>&emsp;&emsp;ä»£ç çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œä¸€ä¸ª main å‡½æ•°ä½œä¸ºç¨‹åºå…¥å£ï¼Œå®šä¹‰äº†ä¸€ä¸ªå˜é‡nï¼Œå®šä¹‰äº†å¦ä¸€ä¸ªå‡½æ•° squire ï¼Œè¿”å›ä¹˜æ–¹æ“ä½œåçš„ int å€¼ã€‚æœ€åï¼Œå°†è¿”å›çš„å€¼æ‰“å°åˆ°æ§åˆ¶å°ã€‚ç¨‹åºè¾“å‡ºä¸º16ã€‚ä¸‹é¢å¼€å§‹é€è¡Œè¿›è¡Œåˆ†æï¼Œè§£æè°ƒç”¨æ—¶ï¼Œgo è¿è¡Œæ—¶æ˜¯å¦‚ä½•å¯¹å†…å­˜è¿›è¡Œåˆ†é…çš„ã€‚<br><img lazyload src="/images/loading.svg" data-src="code1.jpg" alt="avatar"><br>&emsp;&emsp;å½“ä»£ç è¿è¡Œåˆ°ç¬¬6è¡Œï¼Œè¿›å…¥ main å‡½æ•°æ—¶ï¼Œä¼šåœ¨æ ˆä¸Šåˆ›å»ºä¸€ä¸ª Stack frameï¼Œå­˜æ”¾æœ¬å‡½æ•°ä¸­çš„å˜é‡ä¿¡æ¯ã€‚åŒ…æ‹¬å‡½æ•°åç§°ï¼Œå˜é‡ç­‰ã€‚</li></ol><p><img lazyload src="/images/loading.svg" data-src="code2.jpg" alt="avatar"><br>&emsp;&emsp;å½“ä»£ç è¿è¡Œåˆ°ç¬¬7è¡Œæ—¶ï¼Œgo ä¼šåœ¨æ ˆä¸­å‹å…¥ä¸€ä¸ªæ–°çš„ Stack Frameï¼Œç”¨äºå­˜æ”¾è°ƒç”¨ square å‡½æ•°çš„ä¿¡æ¯ï¼›åŒ…æ‹¬å‡½æ•°åã€å˜é‡ n çš„å€¼ç­‰ã€‚æ­¤æ—¶ï¼Œè®¡ç®—4 * 4 çš„å€¼ï¼Œå¹¶è¿”å›ã€‚</p><p><img lazyload src="/images/loading.svg" data-src="code3.jpg" alt="avatar"><br>&emsp;&emsp;å½“ square å‡½æ•°è°ƒç”¨å®Œæˆï¼Œè¿”å›16åˆ° main å‡½æ•°åï¼Œå°†16èµ‹å€¼ç»™ n2å˜é‡ã€‚æ³¨æ„ï¼ŒåŸæ¥çš„ stack frame å¹¶ä¸ä¼šè¢« go æ¸…ç†æ‰ï¼Œè€Œæ˜¯å¦‚æ ˆå·¦ä¾§çš„ç®­å¤´æ‰€ç¤ºï¼Œè¢«æ ‡è®°ä¸ºä¸åˆæ³•ã€‚ä¸Šå›¾å¤¹åœ¨çº¢è‰²ç®­å¤´å’Œç»¿è‰²ç®­å¤´ä¹‹é—´çš„æ¨ªçº¿å¯ä»¥ç†è§£ä¸º go æ±‡ç¼–ä»£ç ä¸­çš„ SP æ ˆå¯„å­˜å™¨çš„å€¼ï¼Œå½“ç¨‹åºç”³è¯·æˆ–é‡Šæ”¾æ ˆå†…å­˜æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹ SP å¯„å­˜å™¨çš„å€¼ï¼Œè¿™ç§æ ˆå†…å­˜åˆ†é…æ–¹å¼çœæ‰äº†æ¸…ç†æ ˆå†…å­˜ç©ºé—´çš„è€—æ—¶ã€‚</p><p><img lazyload src="/images/loading.svg" data-src="code4.jpg" alt="avatar"><br>&emsp;&emsp;æ¥ä¸‹æ¥ï¼Œè°ƒç”¨ fmt.Println æ—¶ï¼ŒSP å¯„å­˜å™¨çš„å€¼ä¼šè¿›ä¸€æ­¥å¢åŠ ï¼Œè¦†ç›–æ‰åŸæ¥ square å‡½æ•°çš„ stack frameï¼Œå®Œæˆ print åï¼Œç¨‹åºæ­£å¸¸é€€å‡ºã€‚</p><ol start="2"><li>æŒ‡é’ˆä½œä¸ºå‚æ•°æƒ…å†µä¸‹çš„æ ˆå†…å­˜åˆ†é…<br>è¿˜æ˜¯åŒæ ·çš„è¿‡ç¨‹ï¼Œçœ‹å¦‚ä¸‹è¿™æ®µä»£ç ã€‚<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">n := <span class="number">4</span>  </span><br><span class="line">increase(&amp;n)  </span><br><span class="line">fmt.Println(n)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">increase</span><span class="params">(i *<span class="keyword">int</span>)</span></span> &#123;  </span><br><span class="line">*i++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>&emsp;&emsp;main ä½œä¸ºç¨‹åºå…¥å£ï¼Œå£°æ˜äº†ä¸€ä¸ªå˜é‡ nï¼Œèµ‹å€¼ä¸º4ã€‚å£°æ˜äº†ä¸€ä¸ªå‡½æ•°Â  Â increaseï¼Œä½¿ç”¨ä¸€ä¸ª int ç±»å‹çš„æŒ‡é’ˆ i ä½œä¸ºå‚æ•°ï¼Œincrease å‡½æ•°å†…ï¼Œå¯¹æŒ‡é’ˆ i å¯¹åº”çš„å€¼è¿›è¡Œè‡ªå¢æ“ä½œã€‚æœ€å main å‡½æ•°ä¸­æ‰“å°äº† n çš„å€¼ã€‚ç¨‹åºè¾“å‡ºä¸º5ã€‚</p><p><img lazyload src="/images/loading.svg" data-src="code5.jpg" alt="avatar"><br>&emsp;&emsp;å½“ç¨‹åºè¿è¡Œåˆ° main å‡½æ•°çš„ç¬¬6è¡Œæ—¶ï¼Œgo åœ¨æ ˆä¸Šåˆ†é…äº†ä¸€ä¸ª stack frame ï¼Œå¯¹å˜é‡ n è¿›è¡Œäº†èµ‹å€¼ï¼Œn åœ¨å†…å­˜ä¸­å¯¹åº”çš„åœ°å€ä¸º0xc0008771ï¼Œæ­¤æ—¶ç¨‹åºå°†ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œè°ƒç”¨ increase å‡½æ•°ã€‚</p><p><img lazyload src="/images/loading.svg" data-src="code6.jpg" alt="avatar"><br>&emsp;&emsp;è¿™æ—¶ï¼Œincrease å‡½æ•°å¯¹åº”çš„ stack fream è¢«åˆ›å»ºï¼Œi è¢«èµ‹å€¼ä¸ºå˜é‡ nå¯¹åº”çš„åœ°å€å€¼0xc0008771ï¼Œç„¶åè¿›è¡Œè‡ªå¢æ“ä½œã€‚</p><p><img lazyload src="/images/loading.svg" data-src="code7.jpg" alt="avatar"><br>&emsp;&emsp;å½“ increase å‡½æ•°è¿è¡Œç»“æŸåï¼ŒSP å¯„å­˜å™¨ä¼šä¸Šç§»ï¼Œå°†ä¹‹å‰åˆ†é…çš„ stack freme æ ‡è®°ä¸ºä¸åˆæ³•ã€‚æ­¤æ—¶ï¼Œç¨‹åºè¿è¡Œæ­£å¸¸ï¼Œå¹¶æ²¡æœ‰å› ä¸º SP å¯„å­˜å™¨çš„æ”¹åŠ¨è€Œå½±å“ç¨‹åºçš„æ­£ç¡®æ€§ï¼Œå†…å­˜ä¸­çš„å€¼ä¹Ÿè¢«æ­£ç¡®çš„ä¿®æ”¹äº†ã€‚</p><ol start="3"><li>æŒ‡é’ˆä½œä¸ºè¿”å›å€¼æƒ…å†µä¸‹çš„æ ˆå†…å­˜åˆ†é…<br>&emsp;&emsp;ä¹‹å‰çš„éƒ¨åˆ†åˆ†åˆ«ä»‹ç»äº†æ™®é€šå˜é‡ä½œä¸ºå‚æ•°å’Œå°†æŒ‡é’ˆä½œä¸ºå‚æ•°æƒ…å†µä¸‹çš„æ ˆå†…å­˜ä½¿ç”¨ï¼Œæœ¬éƒ¨åˆ†æ¥ä»‹ç»å°†æŒ‡é’ˆä½œä¸ºè¿”å›å€¼ï¼Œè¿”å›ç»™è°ƒç”¨æ–¹çš„æƒ…å†µä¸‹ï¼Œå†…å­˜æ˜¯å¦‚ä½•åˆ†é…çš„ï¼Œå¹¶å¼•å‡ºå†…å­˜é€ƒé€¸ç›¸å…³å†…å®¹ã€‚æ¥çœ‹è¿™æ®µä»£ç ï¼š<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">n := initValue()  </span><br><span class="line">fmt.Println(*n/<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">initValue</span><span class="params">()</span> *<span class="title">int</span></span> &#123;  </span><br><span class="line">i := <span class="number">4</span>  </span><br><span class="line"><span class="keyword">return</span> &amp;i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>&emsp;&emsp;main å‡½æ•°ä¸­ï¼Œè°ƒç”¨äº† initValue å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ª int æŒ‡é’ˆå¹¶èµ‹å€¼ç»™ nï¼ŒæŒ‡é’ˆå¯¹åº”çš„å€¼ä¸º4ã€‚éšåï¼Œmain å‡½æ•°è°ƒç”¨ fmt.Println æ‰“å°äº†æŒ‡é’ˆ n / 2å¯¹åº”çš„å€¼ã€‚ç¨‹åºè¾“å‡ºä¸º2ã€‚</li></ol><p><img lazyload src="/images/loading.svg" data-src="code8.jpg" alt="avatar"><br>&emsp;&emsp;ç¨‹åºè°ƒç”¨ initValue åï¼Œå°† i çš„åœ°å€èµ‹å€¼ç»™å˜é‡ n ã€‚æ³¨æ„ï¼Œå¦‚æœè¿™æ—¶ï¼Œå˜é‡ i çš„ä½ç½®åœ¨æ ˆä¸Šï¼Œåˆ™å¯èƒ½ä¼šéšæ—¶è¢«è¦†ç›–æ‰ã€‚</p><p><img lazyload src="/images/loading.svg" data-src="code9.jpg" alt="avatar"><br>åœ¨è°ƒç”¨ fmt.Println æ—¶ï¼ŒStack Frame ä¼šè¢«é‡æ–°åˆ›å»ºï¼Œå˜é‡ i è¢«èµ‹å€¼ä¸º*n/2ä¹Ÿå°±æ˜¯2ï¼Œä¼šè¦†ç›–æ‰åŸæ¥ n æ‰€æŒ‡å‘çš„å˜é‡å€¼ã€‚è¿™ä¼šå¯¼è‡´åŠå…¶ä¸¥é‡çš„é—®é¢˜ã€‚åœ¨é¢å¯¹ sharing up åœºæ™¯æ—¶ï¼Œgo é€šå¸¸ä¼šå°†å˜é‡åˆ†é…åˆ°å †ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img lazyload src="/images/loading.svg" data-src="code10.jpg" alt="avatar"><br>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œå¯ä»¥çœ‹åˆ°åœ¨é¢å¯¹è¢«è°ƒç”¨çš„å‡½æ•°è¿”å›ä¸€ä¸ªæŒ‡é’ˆç±»å‹æ—¶å°†å¯¹è±¡åˆ†é…åˆ°æ ˆä¸Šä¼šå¸¦æ¥ä¸¥é‡çš„é—®é¢˜ï¼Œå› æ­¤ Go å°†å˜é‡åˆ†é…åˆ°äº†å †ä¸Šã€‚è¿™ç§åˆ†é…æ–¹å¼ä¿è¯äº†ç¨‹åºçš„å®‰å…¨æ€§ï¼Œä½†ä¹Ÿä¸å¯é¿å…çš„å¢åŠ äº†å †å†…å­˜åˆ›å»ºï¼Œå¹¶éœ€è¦åœ¨å°†æ¥çš„æŸä¸ªæ—¶å€™ï¼Œéœ€è¦ GC å°†ä¸å†ä½¿ç”¨çš„å†…å­˜æ¸…ç†æ‰ã€‚</p><blockquote><p>æ ˆä¸Šå†…å­˜åˆ†é…åŸåˆ™</p><ul><li>åœ¨è°ƒç”¨æ–¹åˆ›å»ºçš„å˜é‡æˆ–å¯¹è±¡ï¼Œé€šè¿‡å‚æ•°çš„å½¢å¼ä¼ é€’ç»™è¢«è°ƒç”¨å‡½æ•°ï¼Œè¿™æ—¶ï¼Œåœ¨è°ƒç”¨æ–¹åˆ›å»ºçš„å†…å­˜ç©ºé—´é€šå¸¸åœ¨æ ˆä¸Šã€‚è¿™ç§åœ¨è°ƒç”¨æ–¹åˆ›å»ºå†…å­˜ï¼Œåœ¨è¢«è°ƒç”¨æ–¹ä½¿ç”¨è¯¥å†…å­˜çš„â€œå†…å­˜å…±äº«â€æ–¹å¼ï¼Œç§°ä¹‹ä¸º Sharing down</li><li>åœ¨è¢«è°ƒç”¨å‡½æ•°å†…åˆ›å»ºçš„å¯¹è±¡ï¼Œä»¥æŒ‡é’ˆçš„å½¢å¼è¿”å›ç»™è°ƒç”¨æ–¹çš„æƒ…å†µä¸‹ï¼Œé€šå¸¸ï¼Œåˆ›å»ºçš„å†…å­˜ç©ºé—´åœ¨å †ä¸Šã€‚è¿™ç§åœ¨è¢«è°ƒç”¨æ–¹åˆ›å»ºï¼Œåœ¨è°ƒç”¨æ–¹ä½¿ç”¨çš„â€œå†…å­˜å…±äº«â€æ–¹å¼ï¼Œç§°ä¹‹ä¸º Sharing upã€‚</li><li>æ€»ç»“ï¼š1. å› ä¸ºæ ˆæ¯”å †æ›´é«˜æ•ˆï¼Œä¸éœ€è¦ GCï¼Œå› æ­¤ Go ä¼šå°½å¯èƒ½çš„å°†å†…å­˜åˆ†é…åˆ°æ ˆä¸Šã€‚<ol start="2"><li>å½“åˆ†é…åˆ°æ ˆä¸Šå¯èƒ½å¼•èµ·éæ³•å†…å­˜è®¿é—®ç­‰é—®é¢˜åï¼Œä¼šä½¿ç”¨å †ï¼Œä¸»è¦åœºæ™¯æœ‰ï¼š<br>ï¼ˆ1ï¼‰å½“ä¸€ä¸ªå€¼å¯èƒ½åœ¨å‡½æ•°è¢«è°ƒç”¨åè®¿é—®ï¼Œè¿™ä¸ªå€¼ææœ‰å¯èƒ½è¢«åˆ†é…åˆ°å †ä¸Š<br>ï¼ˆ2ï¼‰å½“ç¼–è¯‘å™¨æ£€æµ‹åˆ°æŸä¸ªå€¼è¿‡å¤§ï¼Œè¿™ä¸ªå€¼ä¼šè¢«åˆ†é…åˆ°å †ä¸Š<br>ï¼ˆ3ï¼‰<strong>å½“ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“è¿™ä¸ªå€¼çš„å¤§å°ï¼ˆsliceã€mapâ€¦ï¼‰è¿™ä¸ªå€¼ä¼šè¢«åˆ†é…åˆ°å †ä¸Š</strong></li></ol></li></ul></blockquote><h3 id="å †å†…å­˜ç®¡ç†"><a href="#å †å†…å­˜ç®¡ç†" class="headerlink" title="å †å†…å­˜ç®¡ç†"></a>å †å†…å­˜ç®¡ç†</h3><p><img lazyload src="/images/loading.svg" data-src="heapmacllo.png" alt="avatar"><br>&emsp;&emsp;å½“æˆ‘ä»¬è¯´å†…å­˜ç®¡ç†çš„æ—¶å€™ï¼Œä¸»è¦æ˜¯æŒ‡å †å†…å­˜çš„ç®¡ç†ï¼Œå› ä¸ºæ ˆçš„å†…å­˜ç®¡ç†ä¸éœ€è¦ç¨‹åºå»æ“å¿ƒã€‚è¿™å°èŠ‚çœ‹ä¸‹å †å†…å­˜ç®¡ç†å¹²çš„æ˜¯å•¥ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºä¸»è¦æ˜¯3éƒ¨åˆ†ï¼š<strong>åˆ†é…å†…å­˜å—ï¼Œå›æ”¶å†…å­˜å—å’Œç»„ç»‡å†…å­˜å—</strong>ã€‚<br>&emsp;&emsp;åœ¨ä¸€ä¸ªæœ€ç®€å•çš„å†…å­˜ç®¡ç†ä¸­ï¼Œå †å†…å­˜æœ€åˆä¼šæ˜¯ä¸€ä¸ªå®Œæ•´çš„å¤§å—ï¼Œå³æœªåˆ†é…å†…å­˜ï¼Œå½“æ¥ç”³è¯·çš„æ—¶å€™ï¼Œå°±ä¼šä»æœªåˆ†é…å†…å­˜ï¼Œåˆ†å‰²å‡ºä¸€ä¸ªå°å†…å­˜å—(block)ï¼Œç„¶åç”¨é“¾è¡¨æŠŠæ‰€æœ‰å†…å­˜å—è¿æ¥èµ·æ¥ã€‚éœ€è¦ä¸€äº›ä¿¡æ¯æè¿°æ¯ä¸ªå†…å­˜å—çš„åŸºæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚å¤§å°(size)ã€æ˜¯å¦ä½¿ç”¨ä¸­(used)å’Œä¸‹ä¸€ä¸ªå†…å­˜å—çš„åœ°å€(next)ï¼Œå†…å­˜å—å®é™…æ•°æ®å­˜å‚¨åœ¨dataä¸­ã€‚<br><img lazyload src="/images/loading.svg" data-src="usemem.png" alt="avatar"><br>&emsp;&emsp;ä¸€ä¸ªå†…å­˜å—åŒ…å«äº†3ç±»ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…ƒæ•°æ®ã€ç”¨æˆ·æ•°æ®å’Œå¯¹é½å­—æ®µï¼Œå†…å­˜å¯¹é½æ˜¯ä¸ºäº†æé«˜è®¿é—®æ•ˆç‡ã€‚ä¸‹å›¾ç”³è¯·5Byteå†…å­˜çš„æ—¶å€™ï¼Œå°±éœ€è¦è¿›è¡Œå†…å­˜å¯¹é½ã€‚</p><p><img lazyload src="/images/loading.svg" data-src="malloc.png" alt="avatar"><br>&emsp;&emsp;é‡Šæ”¾å†…å­˜å®è´¨æ˜¯æŠŠä½¿ç”¨çš„å†…å­˜å—ä»é“¾è¡¨ä¸­å–å‡ºæ¥ï¼Œç„¶åæ ‡è®°ä¸ºæœªä½¿ç”¨ï¼Œå½“åˆ†é…å†…å­˜å—çš„æ—¶å€™ï¼Œå¯ä»¥ä»æœªä½¿ç”¨å†…å­˜å—ä¸­æœ‰å…ˆæŸ¥æ‰¾å¤§å°ç›¸è¿‘çš„å†…å­˜å—ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå†ä»æœªåˆ†é…çš„å†…å­˜ä¸­åˆ†é…å†…å­˜ã€‚ä¸Šé¢è¿™ä¸ªç®€å•çš„è®¾è®¡ä¸­è¿˜æ²¡è€ƒè™‘å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Œå› ä¸ºéšç€å†…å­˜ä¸æ–­çš„ç”³è¯·å’Œé‡Šæ”¾ï¼Œå†…å­˜ä¸Šä¼šå­˜åœ¨å¤§é‡çš„ç¢ç‰‡ï¼Œé™ä½å†…å­˜çš„ä½¿ç”¨ç‡ã€‚ä¸ºäº†è§£å†³å†…å­˜ç¢ç‰‡ï¼Œå¯ä»¥å°†2ä¸ªè¿ç»­çš„æœªä½¿ç”¨çš„å†…å­˜å—åˆå¹¶ï¼Œå‡å°‘ç¢ç‰‡ã€‚</p><h4 id="TCMalloc"><a href="#TCMalloc" class="headerlink" title="TCMalloc"></a>TCMalloc</h4><p>&emsp;&emsp;TCMalloc æ˜¯ Thread Cache Malloc çš„ç®€ç§°ï¼Œæ˜¯ Go å†…å­˜ç®¡ç†çš„èµ·æºã€‚å¼•å…¥è™šæ‹Ÿå†…å­˜åï¼Œè®©å†…å­˜çš„å¹¶å‘è®¿é—®é—®é¢˜çš„ç²’åº¦ä»å¤šè¿›ç¨‹çº§åˆ«ï¼Œé™ä½åˆ°å¤šçº¿ç¨‹çº§åˆ«ã€‚åŒä¸€è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹å…±äº«ç›¸åŒçš„å†…å­˜ç©ºé—´ï¼Œä»–ä»¬ç”³è¯·å†…å­˜æ—¶éœ€è¦åŠ é”ï¼Œå¦‚æœä¸åŠ é”å°±å­˜åœ¨åŒä¸€å—å†…å­˜è¢«2ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®çš„é—®é¢˜ã€‚TCMallocçš„åšæ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<strong>ä¸ºæ¯ä¸ªçº¿ç¨‹é¢„åˆ†é…ä¸€å—ç¼“å­˜ï¼Œçº¿ç¨‹ç”³è¯·å°å†…å­˜æ—¶ï¼Œå¯ä»¥ä»ç¼“å­˜åˆ†é…å†…å­˜</strong>ï¼Œè¿™æ ·æœ‰2ä¸ªå¥½å¤„ï¼š</p><ol><li>ä¸ºçº¿ç¨‹é¢„åˆ†é…ç¼“å­˜éœ€è¦è¿›è¡Œ1æ¬¡ç³»ç»Ÿè°ƒç”¨ï¼Œåç»­çº¿ç¨‹ç”³è¯·å°å†…å­˜æ—¶ï¼Œä»ç¼“å­˜åˆ†é…ï¼Œéƒ½æ˜¯åœ¨ç”¨æˆ·æ€æ‰§è¡Œï¼Œæ²¡æœ‰ç³»ç»Ÿè°ƒç”¨ï¼Œ<strong>ç¼©çŸ­äº†å†…å­˜æ€»ä½“çš„åˆ†é…å’Œé‡Šæ”¾æ—¶é—´ï¼Œè¿™æ˜¯å¿«é€Ÿåˆ†é…å†…å­˜çš„ç¬¬äºŒä¸ªå±‚æ¬¡</strong>ã€‚</li><li>å¤šä¸ªçº¿ç¨‹åŒæ—¶ç”³è¯·å°å†…å­˜æ—¶ï¼Œä»å„è‡ªçš„ç¼“å­˜åˆ†é…ï¼Œè®¿é—®çš„æ˜¯ä¸åŒçš„åœ°å€ç©ºé—´ï¼Œæ— éœ€åŠ é”ï¼Œ<strong>æŠŠå†…å­˜å¹¶å‘è®¿é—®çš„ç²’åº¦è¿›ä¸€æ­¥é™ä½äº†ï¼Œè¿™æ˜¯å¿«é€Ÿåˆ†é…å†…å­˜çš„ç¬¬ä¸‰ä¸ªå±‚æ¬¡</strong>ã€‚</li></ol><h2 id="Go-GCï¼ˆåƒåœ¾å›æ”¶ï¼‰"><a href="#Go-GCï¼ˆåƒåœ¾å›æ”¶ï¼‰" class="headerlink" title="Go GCï¼ˆåƒåœ¾å›æ”¶ï¼‰"></a>Go GCï¼ˆåƒåœ¾å›æ”¶ï¼‰</h2><h3 id="åƒåœ¾å›æ”¶"><a href="#åƒåœ¾å›æ”¶" class="headerlink" title="åƒåœ¾å›æ”¶"></a>åƒåœ¾å›æ”¶</h3><p>&emsp;&emsp;ç¨‹åºåœ¨åˆ›å»ºå¼•ç”¨ç±»å‹å®ä½“æ—¶ä¼šåœ¨è™šæ‹Ÿå†…å­˜ä¸­åˆ†é…ç»™ä»–ä»¬ä¸€å—ç©ºé—´ï¼ˆå †ï¼‰ï¼Œå¦‚æœè¯¥å†…å­˜ç©ºé—´ä¸å†è¢«ä»»ä½•å¼•ç”¨å˜é‡å¼•ç”¨å°±ç§°ä¸ºéœ€è¦è¢«å›æ”¶çš„åƒåœ¾ã€‚æ“ä½œç³»ç»Ÿä¼šè®°å½•ä¸€ä¸ªè¿›ç¨‹è¿è¡Œæ—¶çš„æ‰€å ç”¨çš„å†…å­˜ã€CPUå’Œå¯„å­˜å™¨ç­‰èµ„æºï¼Œå½“è¿›ç¨‹ç»“æŸåä¾¿ç”±æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨å›æ”¶èµ„æºã€‚ä½†æ˜¯å¯¹äºä¸€ä¸ªè¿è¡Œè¾ƒé•¿æ—¶é—´çš„ç¨‹åºï¼Œå¦‚æœä½¿ç”¨å®Œå†…å­˜èµ„æºåæ²¡æœ‰åŠæ—¶é‡Šæ”¾å°±ä¼šé€ æˆå†…å­˜æ³„æ¼ç”šè‡³ç³»ç»Ÿé”™è¯¯ã€‚<br>&emsp;&emsp;ä»¥ä¸æ”¯æŒè‡ªåŠ¨åƒåœ¾å›æ”¶çš„ C++ ä¸ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">char</span> *p = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">128</span>];</span><br><span class="line">  <span class="comment">// å¯¹æŒ‡é’ˆçš„ä½¿ç”¨</span></span><br><span class="line">  <span class="keyword">delete</span>[] p; <span class="comment">// deleteè¯­å¥é‡Šæ”¾å¯¹è±¡æ•°ç»„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;å¦‚æœç”±äºä¸€åœºæˆ–è€…å…¶ä»–åŸå› å¯¼è‡´ delete è¯­å¥æ²¡æœ‰æ­£å¸¸æ‰§è¡Œï¼Œä¸”è¯¥å‡½æ•°è¢«é¢‘ç¹è°ƒç”¨ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“å ç”¨æ‰€æœ‰çš„å†…å­˜ä»è€Œå¯¼è‡´ç¨‹åºå´©æºƒï¼Œå¦‚æœæ³„æ¼çš„æ—¶ç³»ç»Ÿèµ„æºè¿˜ä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚å¦ä¸€æ–¹é¢å¦‚æœæˆ‘ä»¬åœ¨ä¸è¯¥é‡Šæ”¾å†…å­˜çš„æ—¶å€™é‡Šæ”¾å†…å­˜ï¼Œé‚£ä¹ˆä»ç„¶åœ¨ä½¿ç”¨è¿™å—å†…å­˜çš„æŒ‡é’ˆå°±ä¼šå˜æˆé‡æŒ‡é’ˆ <code>wild pointer</code>ï¼Œä½¿ç”¨è¯¥æŒ‡é’ˆå¯¹å†…å­˜è¿›è¡Œè¯»å†™æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚</p><ol><li><p>åƒåœ¾å›æ”¶è¿‡ç¨‹<br>&emsp;&emsp;ç”¨æˆ·ç¨‹åº<code>Mutator</code>é€šè¿‡å†…å­˜åˆ†é…å™¨<code>Allocator</code>åœ¨å †<code>Heap</code>ä¸Šç”³è¯·å†…å­˜ï¼Œåƒåœ¾å›æ”¶å™¨<code>Collector</code>ä¼šå®šæ—¶æ¸…ç†å †ä¸Šçš„å†…å­˜ã€‚<br><img lazyload src="/images/loading.svg" data-src="collector.jpg" alt="avatar"></p></li><li><p>è‡ªåŠ¨åƒåœ¾å›æ”¶ä¸æ‰‹åŠ¨åƒåœ¾å›æ”¶<br>&emsp;&emsp;<code>C</code>è¯­è¨€è¿™ç§è¾ƒä¸ºä¼ ç»Ÿçš„è¯­è¨€é€šè¿‡<code>malloc</code>å’Œ<code>free</code>æ‰‹åŠ¨å‘æ“ä½œç³»ç»Ÿç”³è¯·å’Œé‡Šæ”¾å†…å­˜ï¼Œè¿™ç§è‡ªç”±ç®¡ç†å†…å­˜çš„æ–¹å¼ç»™äºˆç¨‹åºå‘˜æå¤§çš„è‡ªç”±åº¦ï¼Œä½†æ˜¯ä¹Ÿç›¸åº”åœ°æé«˜äº†å¯¹ç¨‹åºå‘˜çš„è¦æ±‚ã€‚<code>C</code>è¯­è¨€çš„å†…å­˜åˆ†é…å’Œå›æ”¶æ–¹å¼ä¸»è¦åŒ…æ‹¬ä¸‰ç§ï¼š</p></li></ol><ul><li>å‡½æ•°ä½“å†…çš„å±€éƒ¨å˜é‡ï¼šåœ¨æ ˆä¸Šåˆ›å»ºï¼Œå‡½æ•°ä½œç”¨åŸŸç»“æŸåè‡ªåŠ¨é‡Šæ”¾å†…å­˜</li><li>é™æ€å˜é‡ï¼šåœ¨é™æ€å­˜å‚¨åŒºåŸŸä¸Šåˆ†é…å†…å­˜ï¼Œæ•´ä¸ªç¨‹åºè¿è¡Œç»“æŸåé‡Šæ”¾ï¼ˆå…¨å±€ç”Ÿå‘½å‘¨æœŸï¼‰</li><li>åŠ¨æ€åˆ†é…å†…å­˜çš„å˜é‡ï¼šåœ¨å †ä¸Šåˆ†é…ï¼Œé€šè¿‡<code>malloc</code>ç”³è¯·ï¼Œ<code>free</code>é‡Šæ”¾</li></ul><p>&emsp;&emsp;<code>C</code>ã€<code>C++</code>ç­‰è¾ƒæ—©çš„è¯­è¨€é‡‡ç”¨çš„æ˜¯æ‰‹åŠ¨åƒåœ¾å›æ”¶ï¼Œéœ€è¦ç¨‹åºå‘˜é€šè¿‡å‘æ“ä½œç³»ç»Ÿç”³è¯·å’Œé‡Šæ”¾å†…å­˜æ¥æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œç¨‹åºå‘˜æå®¹æ˜“å¿˜è®°é‡Šæ”¾è‡ªå·±ç”³è¯·çš„å†…å­˜ï¼Œå¯¹äºä¸€ä¸ªé•¿æœŸè¿è¡Œçš„ç¨‹åºå¾€å¾€æ˜¯ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ã€‚<code>Python</code>ã€<code>Java</code>å’Œ<code>Golang</code>ç­‰è¾ƒæ–°çš„è¯­è¨€é‡‡å–çš„éƒ½æ˜¯è‡ªåŠ¨åƒåœ¾å›æ”¶æ–¹å¼ï¼Œç¨‹åºå‘˜åªéœ€è¦è´Ÿè´£ç”³è¯·å†…å­˜ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šå‘¨æœŸæ€§é‡Šæ”¾ç»“æŸç”Ÿå‘½å‘¨æœŸçš„å˜é‡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p><ol start="3"><li>åƒåœ¾å›æ”¶ç›®æ ‡<br>åƒåœ¾å›æ”¶å™¨ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªç›®æ ‡ï¼š</li></ol><ul><li><strong>æ— å†…å­˜æ³„æ¼</strong>ï¼šåƒåœ¾å›æ”¶å™¨æœ€åŸºæœ¬çš„ç›®æ ‡å°±æ˜¯å‡å°‘é˜²æ­¢ç¨‹åºå‘˜æœªåŠæ—¶é‡Šæ”¾å¯¼è‡´çš„å†…å­˜æ³„æ¼ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šè¯†åˆ«å¹¶æ¸…ç†å†…å­˜ä¸­çš„åƒåœ¾</li><li>è‡ªåŠ¨<strong>å›æ”¶æ— ç”¨å†…å­˜</strong>ï¼šåƒåœ¾å›æ”¶å™¨ä½œä¸ºç‹¬ç«‹çš„å­ä»»åŠ¡ï¼Œä¸éœ€è¦ç¨‹åºå‘˜æ˜¾å¼è°ƒç”¨å³å¯è‡ªåŠ¨æ¸…ç†å†…å­˜åƒåœ¾</li><li>å†…å­˜æ•´ç†ï¼šå¦‚æœåªæ˜¯ç®€å•å›æ”¶æ— ç”¨å†…å­˜ï¼Œé‚£ä¹ˆå †ä¸Šçš„å†…å­˜ç©ºé—´ä¼šå­˜åœ¨è¾ƒå¤š<strong>å†…å­˜ç¢ç‰‡</strong>è€Œæ— æ³•æ»¡è¶³åˆ†é…è¾ƒå¤§å¯¹è±¡çš„éœ€æ±‚ï¼Œå› æ­¤åƒåœ¾å›æ”¶å™¨éœ€è¦é‡æ•´å†…å­˜ç©ºé—´ï¼Œæé«˜å†…å­˜åˆ©ç”¨ç‡</li></ul><h3 id="å¸¸è§çš„åƒåœ¾å›æ”¶æ–¹æ³•"><a href="#å¸¸è§çš„åƒåœ¾å›æ”¶æ–¹æ³•" class="headerlink" title="å¸¸è§çš„åƒåœ¾å›æ”¶æ–¹æ³•"></a>å¸¸è§çš„åƒåœ¾å›æ”¶æ–¹æ³•</h3><p>&emsp;&emsp;æ ¹æ®åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»çš„æ–¹æ³•ï¼Œå¯ä»¥ç®€å•å°†<code>GC</code>ç®—æ³•åˆ†ä¸ºâ€œ<strong>å¼•ç”¨è®¡æ•°å¼</strong>â€åƒåœ¾å›æ”¶å’Œâ€œ<strong>è¿½è¸ªå›æ”¶å¼</strong>â€åƒåœ¾å›æ”¶ã€‚å‰è€…æ ¹æ®æ¯ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å™¨æ˜¯å¦ä¸º<code>0</code>æ¥åˆ¤æ–­è¯¥å¯¹è±¡æ˜¯å¦ä¸ºæœªå¼•ç”¨çš„åƒåœ¾å¯¹è±¡ï¼Œåè€…å…ˆåˆ¤æ–­å“ªäº›å¯¹è±¡å­˜æ´»ï¼Œç„¶åå°†å…¶ä½™çš„æ‰€æœ‰å¯¹è±¡ä½œä¸ºåƒåœ¾è¿›è¡Œå›æ”¶ã€‚è¿½è¸ªå›æ”¶æœ¬èº«åŒ…æ‹¬æ ‡è®°-æ¸…é™¤<code>Mark-Sweep</code>ã€æ ‡è®°-å¤åˆ¶<code>Mark-Copy</code>å’Œæ ‡è®°-æ•´ç†<code>Mark-Compact</code>ä¸‰ç§å›æ”¶ç®—æ³•ã€‚</p><h4 id="å¼•ç”¨è®¡æ•°æ³•"><a href="#å¼•ç”¨è®¡æ•°æ³•" class="headerlink" title="å¼•ç”¨è®¡æ•°æ³•"></a>å¼•ç”¨è®¡æ•°æ³•</h4><p>&emsp;&emsp;å¼•ç”¨è®¡æ•°<code>Reference counting</code>ä¼šä¸ºæ¯ä¸ªå¯¹è±¡ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå½“è¯¥å¯¹è±¡è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨æ—¶åŠ ä¸€ï¼Œå¼•ç”¨å¤±æ•ˆæ—¶å‡ä¸€ï¼Œå½“å¼•ç”¨æ¬¡æ•°å½’é›¶åå³å¯å›æ”¶å¯¹è±¡ã€‚ä½¿ç”¨è¿™ç±»<code>GC</code>æ–¹æ³•çš„è¯­è¨€åŒ…æ‹¬<code>python</code>ã€<code>php</code>ã€<code>objective-C</code>å’Œ<code>C++</code>æ ‡å‡†åº“ä¸­çš„<code>std::shared_ptr</code>ç­‰ã€‚<br>ä¼˜ç‚¹ï¼š</p><ul><li>åŸç†å’Œå®ç°éƒ½æ¯”è¾ƒç®€å•</li><li>å›æ”¶çš„å³æ—¶æ€§ï¼šå½“å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º<code>0</code>æ—¶ç«‹å³å›æ”¶ï¼Œä¸åƒå…¶ä»–<code>GC</code>æœºåˆ¶éœ€è¦ç­‰å¾…ç‰¹å®šæ—¶æœºå†å›æ”¶ï¼Œæé«˜äº†å†…å­˜çš„åˆ©ç”¨ç‡</li><li>ä¸éœ€è¦æš‚åœåº”ç”¨å³å¯å®Œæˆå›æ”¶</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>æ— æ³•è§£å†³å¾ªç¯å¼•ç”¨çš„å›æ”¶é—®é¢˜ï¼šå½“<code>ObjA</code>å¼•ç”¨äº†<code>ObjB</code>ï¼Œ<code>ObjB</code>ä¹Ÿå¼•ç”¨<code>ObjA</code>æ—¶ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨æ¬¡æ•°ä½¿ç”¨å¤§äº<code>0</code>ï¼Œä»è€Œå ç”¨çš„å†…å­˜æ— æ³•è¢«å›æ”¶</li><li>æ—¶é—´å’Œç©ºé—´æˆæœ¬è¾ƒé«˜ï¼šä¸€æ–¹é¢æ˜¯å› ä¸ºæ¯ä¸ªå¯¹è±¡éœ€è¦é¢å¤–çš„ç©ºé—´å­˜å‚¨å¼•ç”¨è®¡æ•°å™¨å˜é‡ï¼Œå¦ä¸€æ–¹é¢æ˜¯åœ¨æ ˆä¸Šçš„èµ‹å€¼æ—¶ä¿®æ”¹å¼•ç”¨æ¬¡æ•°æ—¶é—´æˆæœ¬è¾ƒé«˜ï¼ˆåŸæœ¬åªéœ€è¦ä¿®æ”¹å¯„å­˜å™¨ä¸­çš„å€¼ï¼Œç°åœ¨è®¡æ•°å™¨éœ€è¦ä¸æ–­æ›´æ–°å› æ­¤ä¸æ˜¯åªè¯»çš„ï¼Œéœ€è¦é¢å¤–çš„åŸå­æ“ä½œæ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼‰</li><li>å¼•ç”¨è®¡æ•°æ˜¯ä¸€ç§æ‘Šé”€ç®—æ³•ï¼Œä¼šå°†å†…å­˜çš„å›æ”¶åˆ†æ‘Šåˆ°æ•´ä¸ªç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ï¼Œä½†æ˜¯å½“é”€æ¯ä¸€ä¸ªå¾ˆå¤§çš„æ ‘å½¢ç»“æ„æ—¶æ— æ³•ä¿è¯å“åº”æ—¶é—´</li></ul><h4 id="è¿½è¸ªå›æ”¶å¼"><a href="#è¿½è¸ªå›æ”¶å¼" class="headerlink" title="è¿½è¸ªå›æ”¶å¼"></a>è¿½è¸ªå›æ”¶å¼</h4><p>è¿½è¸ªåŸºç¡€ï¼šå¯è¾¾æ€§åˆ†æç®—æ³•<br>&emsp;&emsp;å°½ç®¡å‰é¢æåˆ°çš„ä¸‰ç§è¿½è¸ªå¼åƒåœ¾å›æ”¶ç®—æ³•å®ç°èµ·æ¥å„ä¸ç›¸åŒï¼Œä½†æ˜¯ç¬¬ä¸€æ­¥éƒ½æ˜¯é€šè¿‡å¯è¾¾æ€§åˆ†æç®—æ³•æ ‡è®°<code>Mark</code>å¯¹è±¡æ˜¯å¦â€œå¯è¾¾â€ã€‚ä¸€èˆ¬å¯åˆ°è¾¾çš„å¯¹è±¡ä¸»è¦åŒ…æ‹¬ä¸¤ç±»ï¼š</p><ul><li><code>GC Root</code>å¯¹è±¡ï¼šåŒ…æ‹¬å…¨å±€å¯¹è±¡ã€æ ˆä¸Šçš„å¯¹è±¡ï¼ˆå‡½æ•°å‚æ•°ä¸å†…éƒ¨å˜é‡ï¼‰</li><li>ä¸<code>GC Root</code>å¯¹è±¡é€šè¿‡å¼•ç”¨é“¾<code>Reference Chain</code>ç›¸è¿çš„å¯¹è±¡</li></ul><p>å¯¹äºâ€œä¸å¯è¾¾â€çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¯¥å¯¹è±¡ä¸ºåƒåœ¾å¯¹è±¡å¹¶å›æ”¶å¯¹åº”çš„å†…å­˜ç©ºé—´ã€‚<br><img lazyload src="/images/loading.svg" data-src="reachable.jpg" alt="avatar"></p><p>åŒå¼•ç”¨è®¡æ•°æ³•ç›¸æ¯”ï¼Œè¿½è¸ªå¼ç®—æ³•å…·æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li>è§£å†³äº†å¾ªç¯å¼•ç”¨å¯¹è±¡çš„å›æ”¶é—®é¢˜</li><li>å ç”¨ç©ºé—´æ›´å°‘</li></ul><p>ç¼ºç‚¹åŒ…æ‹¬ï¼š</p><ul><li>åŒå¼•ç”¨è®¡æ•°ç›¸æ¯”æ— æ³•ç«‹åˆ»è¯†åˆ«å‡ºåƒåœ¾å¯¹è±¡ï¼Œéœ€è¦ä¾èµ–<code>GC</code>çº¿ç¨‹(ä¸‹æ–‡çš„ç®—æ³•)</li><li>ç®—æ³•åœ¨æ ‡è®°æ—¶å¿…é¡»æš‚åœæ•´ä¸ªç¨‹åºï¼Œå³<code>Stop The World, STW</code>ï¼Œå¦åˆ™å…¶ä»–çº¿ç¨‹çš„ä»£ç ä¼šä¿®æ”¹å¯¹è±¡çŠ¶æ€ä»è€Œå›æ”¶ä¸è¯¥å›æ”¶çš„å¯¹è±¡</li></ul><ol><li>æ ‡è®°-æ¸…é™¤ç®—æ³•<br>æ ‡è®°-æ¸…é™¤<code>Mark-Sweep</code>ç®—æ³•æ˜¯æœ€åŸºç¡€çš„è¿½è¸ªå¼ç®—æ³•ï¼Œåˆ†ä¸ºâ€œæ ‡è®°â€å’Œâ€œæ¸…é™¤â€ä¸¤ä¸ªæ­¥éª¤ï¼š</li></ol><ul><li>æ ‡è®°ï¼šè®°å½•éœ€è¦å›æ”¶çš„åƒåœ¾å¯¹è±¡</li><li>æ¸…é™¤ï¼šåœ¨æ ‡è®°å®Œæˆåå›æ”¶åƒåœ¾å¯¹è±¡çš„å†…å­˜ç©ºé—´</li></ul><p><img lazyload src="/images/loading.svg" data-src="mark-sweep.jpg" alt="avatar"><br>ä¼˜ç‚¹åŒ…æ‹¬ï¼š</p><ul><li>ç®—æ³•ååé‡è¾ƒé«˜ï¼Œå³è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ / ï¼ˆè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ + è¿è¡Œåƒåœ¾æ”¶é›†æ—¶é—´ï¼‰è¾ƒé«˜</li><li>ç©ºé—´åˆ©ç”¨ç‡é«˜ï¼šåŒæ ‡è®°-å¤åˆ¶ç›¸æ¯”ä¸éœ€è¦é¢å¤–ç©ºé—´å¤åˆ¶å¯¹è±¡ï¼Œä¹Ÿä¸éœ€è¦åƒå¼•ç”¨è®¡æ•°ç®—æ³•ä¸ºæ¯ä¸ªå¯¹è±¡è®¾ç½®å¼•ç”¨è®¡æ•°å™¨</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>æ¸…é™¤åä¼š<strong>äº§ç”Ÿå¤§é‡çš„å†…å­˜ç¢ç‰‡</strong>ç©ºé—´ï¼Œå¯¼è‡´ç¨‹åºåœ¨è¿è¡Œæ—¶å¯èƒ½æ²¡æ³•ä¸ºè¾ƒå¤§çš„å¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´ï¼Œå¯¼è‡´æå‰è¿›è¡Œä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶</li></ul><ol start="2"><li>æ ‡è®°-å¤åˆ¶ç®—æ³•<br>æ ‡è®°-å¤åˆ¶<code>Mark-Copy</code>ç®—æ³•å°†å†…å­˜åˆ†æˆå¤§å°ç›¸åŒçš„ä¸¤å—ï¼Œå½“æŸä¸€å—çš„å†…å­˜ä½¿ç”¨å®Œäº†ä¹‹åå°±å°†ä½¿ç”¨ä¸­çš„å¯¹è±¡æŒ¨ä¸ªå¤åˆ¶åˆ°å¦ä¸€å—å†…å­˜ä¸­ï¼Œæœ€åå°†å½“å‰å†…å­˜æ¢å¤æœªä½¿ç”¨çš„çŠ¶æ€ã€‚<br><img lazyload src="/images/loading.svg" data-src="mark-copy.jpg" alt="avatar"></li></ol><p>ä¼˜ç‚¹ï¼š</p><ul><li>æ ‡è®°-æ¸…é™¤æ³•éœ€è¦åœ¨æ¸…é™¤é˜¶æ®µå¯¹å¤§é‡åƒåœ¾å¯¹è±¡è¿›è¡Œæ‰«æï¼Œæ ‡è®°-å¤åˆ¶åˆ™åªéœ€è¦ä»<code>GC Root</code>å¯¹è±¡å‡ºå‘ï¼Œå°†â€œå¯åˆ°è¾¾â€çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—å†…å­˜åç›´æ¥æ¸…ç†å½“å‰è¿™å—çš„å†…å­˜ï¼Œå› æ­¤æå‡äº†åƒåœ¾å›æ”¶çš„æ•ˆç‡</li><li>è§£å†³äº†å†…å­˜ç¢ç‰‡åŒ–çš„é—®é¢˜ï¼Œé˜²æ­¢åˆ†é…è¾ƒå¤§è¿ç»­ç©ºé—´æ—¶çš„æå‰<code>GC</code>é—®é¢˜</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>åŒæ ‡è®°-æ¸…é™¤æ³•ç›¸æ¯”ï¼Œåœ¨â€œå¯è¾¾â€å¯¹è±¡å æ¯”è¾ƒé«˜çš„æƒ…å†µä¸‹æœ‰å¤åˆ¶å¯¹è±¡çš„å¼€é”€</li><li>å†…å­˜åˆ©ç”¨ç‡è¾ƒä½ï¼Œç›¸å½“äºå¯åˆ©ç”¨çš„å†…å­˜ä»…æœ‰ä¸€åŠ</li></ul><ol start="3"><li>æ ‡è®°-æ•´ç†ç®—æ³•<br>&emsp;&emsp;æ ‡è®°-æ•´ç†<code>Mark-Compact</code>ç®—æ³•ç»¼åˆäº†æ ‡è®°-æ¸…é™¤æ³•å’Œæ ‡è®°-å¤åˆ¶æ³•çš„ä¼˜åŠ¿ï¼Œæ—¢ä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡åŒ–çš„é—®é¢˜ï¼Œä¹Ÿä¸ä¼šæœ‰ä¸€åŠå†…å­˜ç©ºé—´æµªè´¹çš„é—®é¢˜ã€‚è¯¥æ–¹æ³•é¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰â€œå¯è¾¾â€çš„å¯¹è±¡ï¼Œç„¶åå°†å­˜æ´»çš„å¯¹è±¡ç§»åŠ¨åˆ°å†…å­˜ç©ºé—´çš„ä¸€ç«¯ï¼Œæœ€åæ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚<br><img lazyload src="/images/loading.svg" data-src="mark-compact.jpg" alt="avatar"><br>ä¼˜ç‚¹åŒ…æ‹¬ï¼š</li></ol><ul><li>é¿å…äº†å†…å­˜ç¢ç‰‡åŒ–çš„é—®é¢˜</li><li>åœ¨å¯¹è±¡å­˜æ´»ç‡è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œæ ‡è®°-æ•´ç†ç®—æ³•ç”±äºä¸éœ€è¦å¤åˆ¶å¯¹è±¡æ•ˆç‡æ›´é«˜ï¼Œå› æ­¤æ›´åŠ é€‚åˆè€å¹´ä»£ç®—æ³•</li></ul><p>ç¼ºç‚¹åŒ…æ‹¬ï¼š</p><ul><li>æ•´ç†è¿‡ç¨‹è¾ƒä¸ºå¤æ‚ï¼Œéœ€è¦å¤šæ¬¡éå†å†…å­˜å¯¼è‡´<code>STW</code>æ—¶é—´æ¯”æ ‡è®°-æ¸…é™¤ç®—æ³•æ›´é•¿</li></ul><h3 id="Golang-çš„-GC-ç®—æ³•"><a href="#Golang-çš„-GC-ç®—æ³•" class="headerlink" title="Golang çš„ GC ç®—æ³•"></a>Golang çš„ GC ç®—æ³•</h3><h4 id="ä¸‰è‰²æ ‡è®°æ³•ï¼ˆgo-1-3ï¼‰"><a href="#ä¸‰è‰²æ ‡è®°æ³•ï¼ˆgo-1-3ï¼‰" class="headerlink" title="ä¸‰è‰²æ ‡è®°æ³•ï¼ˆgo 1.3ï¼‰"></a>ä¸‰è‰²æ ‡è®°æ³•ï¼ˆgo 1.3ï¼‰</h4><p>&emsp;&emsp;å‰é¢æåˆ°çš„â€œæ ‡è®°â€ç±»ç®—æ³•éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‘•ç–µï¼Œå³åœ¨è¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™ä¼šæš‚åœæ•´ä¸ªç¨‹åºï¼ˆ<code>STW</code>é—®é¢˜ï¼‰ã€‚ä¸‰è‰²æ ‡è®°æ³•æ˜¯å¯¹â€œæ ‡è®°â€é˜¶æ®µçš„æ”¹è¿›ï¼Œåœ¨ä¸æš‚åœç¨‹åºçš„æƒ…å†µä¸‹å³å¯å®Œæˆå¯¹è±¡çš„å¯è¾¾æ€§åˆ†æã€‚<code>GC</code>çº¿ç¨‹å°†æ‰€æœ‰å¯¹è±¡åˆ†ä¸ºä¸‰ç±»ï¼š</p><ul><li>ç™½è‰²ï¼šæœªæœç´¢çš„å¯¹è±¡ï¼Œåœ¨å›æ”¶å‘¨æœŸå¼€å§‹æ—¶æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç™½è‰²ï¼Œåœ¨å›æ”¶å‘¨æœŸç»“æŸæ—¶æ‰€æœ‰çš„ç™½è‰²éƒ½æ˜¯åƒåœ¾å¯¹è±¡</li><li>ç°è‰²ï¼šæ­£åœ¨æœç´¢çš„å¯¹è±¡ï¼Œä½†æ˜¯å¯¹è±¡èº«ä¸Šè¿˜æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¼•ç”¨æ²¡æœ‰æ‰«æ</li><li>é»‘è‰²ï¼šå·²æœç´¢å®Œçš„å¯¹è±¡ï¼Œæ‰€æœ‰çš„å¼•ç”¨å·²ç»è¢«æ‰«æå®Œ</li></ul><p>&emsp;&emsp;ä¸‰è‰²æ ‡è®°æ³•å±äºå¢é‡å¼<code>GC</code>ç®—æ³•ï¼Œå›æ”¶å™¨é¦–å…ˆå°†æ‰€æœ‰çš„å¯¹è±¡ç€è‰²æˆç™½è‰²ï¼Œç„¶åä»<code>GC Root</code>å‡ºå‘ï¼Œé€æ­¥æŠŠæ‰€æœ‰â€œå¯è¾¾â€çš„å¯¹è±¡å˜æˆç°è‰²å†åˆ°é»‘è‰²ï¼Œæœ€ç»ˆæ‰€æœ‰çš„ç™½è‰²å¯¹è±¡å³æ˜¯â€œä¸å¯è¾¾â€å¯¹è±¡ã€‚</p><blockquote><p><code>GC Root</code> å¯¹è±¡åŒ…æ‹¬ï¼š</p><ol><li>å…¨å±€å˜é‡ï¼šç¨‹åºåœ¨ç¼–è¯‘æœŸå°±èƒ½ç¡®å®šçš„é‚£äº›å­˜åœ¨äºç¨‹åºæ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„å˜é‡ã€‚</li><li>æ‰§è¡Œæ ˆï¼šæ¯ä¸ª goroutine éƒ½åŒ…å«è‡ªå·±çš„æ‰§è¡Œæ ˆï¼Œè¿™äº›æ‰§è¡Œæ ˆä¸ŠåŒ…å«æ ˆä¸Šçš„å˜é‡åŠæŒ‡å‘åˆ†é…çš„å †å†…å­˜åŒºå—çš„æŒ‡é’ˆã€‚</li><li> å¯„å­˜å™¨ï¼šå¯„å­˜å™¨çš„å€¼å¯èƒ½è¡¨ç¤ºä¸€ä¸ªæŒ‡é’ˆï¼Œå‚ä¸è®¡ç®—çš„è¿™äº›æŒ‡é’ˆå¯èƒ½æŒ‡å‘æŸäº›èµ‹å€¼å™¨åˆ†é…çš„å †å†…å­˜åŒºå—ã€‚</li></ol></blockquote><p>å…·ä½“çš„å®ç°å¦‚ä¸‹ï¼š</p><ol><li>åˆå§‹æ—¶æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç™½è‰²å¯¹è±¡</li><li>ä»<code>GC Root</code>å¯¹è±¡å‡ºå‘ï¼Œæ‰«ææ‰€æœ‰å¯è¾¾å¯¹è±¡å¹¶æ ‡è®°ä¸ºç°è‰²ï¼Œæ”¾å…¥å¾…å¤„ç†é˜Ÿåˆ—</li><li>ä»é˜Ÿåˆ—å–å‡ºä¸€ä¸ªç°è‰²å¯¹è±¡å¹¶æ ‡è®°ä¸ºé»‘è‰²ï¼Œå°†å…¶å¼•ç”¨å¯¹è±¡æ ‡è®°ä¸ºç°è‰²æ”¾å…¥é˜Ÿåˆ—</li><li>é‡å¤ä¸Šä¸€æ­¥éª¤ï¼Œç›´åˆ°ç°è‰²å¯¹è±¡é˜Ÿåˆ—ä¸ºç©º</li><li>æ­¤æ—¶æ‰€æœ‰å‰©ä¸‹çš„ç™½è‰²å¯¹è±¡å°±æ˜¯åƒåœ¾å¯¹è±¡</li></ol><p><img lazyload src="/images/loading.svg" data-src="three_color.gif" alt="gif"></p><p>ä¼˜ç‚¹ï¼šä¸éœ€è¦æš‚åœæ•´ä¸ªç¨‹åºè¿›è¡Œåƒåœ¾å›æ”¶<br>ç¼ºç‚¹ï¼š</p><ul><li>å¦‚æœç¨‹åºåƒåœ¾å¯¹è±¡çš„äº§ç”Ÿé€Ÿåº¦å¤§äºåƒåœ¾å¯¹è±¡çš„å›æ”¶é€Ÿåº¦æ—¶ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºä¸­çš„åƒåœ¾å¯¹è±¡è¶Šæ¥è¶Šå¤šè€Œæ— æ³•åŠæ—¶æ”¶é›†</li><li>çº¿ç¨‹åˆ‡æ¢å’Œä¸Šä¸‹æ–‡è½¬æ¢çš„æ¶ˆè€—ä¼šä½¿å¾—åƒåœ¾å›æ”¶çš„æ€»ä½“æˆæœ¬ä¸Šå‡ï¼Œä»è€Œé™ä½ç³»ç»Ÿååé‡</li></ul><h4 id="å±éšœæœºåˆ¶"><a href="#å±éšœæœºåˆ¶" class="headerlink" title="å±éšœæœºåˆ¶"></a>å±éšœæœºåˆ¶</h4><ol><li><p>STW<br>&emsp;&emsp;STW å¯ä»¥æ˜¯Stop The Worldçš„ç¼©å†™ï¼Œä¹Ÿå¯ä»¥æ˜¯Start The Worldçš„ç¼©å†™ã€‚é€šå¸¸æ„ä¹‰ä¸ŠæŒ‡çš„æ˜¯ä»Stop The Worldåˆ°Start The Worldè¿™ä¸€æ®µæ—¶é—´é—´éš”ã€‚åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ä¸ºäº†ä¿è¯å‡†ç¡®æ€§ã€é˜²æ­¢æ— æ­¢å¢ƒçš„å†…å­˜å¢é•¿ç­‰é—®é¢˜è€Œä¸å¯é¿å…çš„éœ€è¦åœæ­¢èµ‹å€¼å™¨è¿›ä¸€æ­¥æ“ä½œå¯¹è±¡å›¾ä»¥å®Œæˆåƒåœ¾å›æ”¶ã€‚STWæ—¶é—´è¶Šé•¿ï¼Œå¯¹ç”¨æˆ·ä»£ç é€ æˆçš„å½±å“è¶Šå¤§ã€‚</p></li><li><p>No STW å­˜åœ¨çš„é—®é¢˜<br>&emsp;&emsp;å‡è®¾ä¸‹é¢çš„åœºæ™¯ï¼Œå·²ç»è¢«æ ‡è®°ä¸ºç°è‰²çš„å¯¹è±¡2ï¼Œæœªè¢«æ ‡è®°çš„å¯¹è±¡3è¢«å¯¹è±¡2ç”¨æŒ‡é’ˆpå¼•ç”¨ï¼›æ­¤æ—¶å·²ç»è¢«æ ‡è®°ä¸ºé»‘è‰²çš„å¯¹è±¡4åˆ›å»ºæŒ‡é’ˆq æŒ‡å‘æœªè¢«æ ‡è®°çš„å¯¹è±¡3ï¼ŒåŒæ—¶å¯¹è±¡2å°†æŒ‡é’ˆpç§»é™¤ï¼›å¯¹è±¡4å·²ç»è¢«æ ‡è®°ä¸ºé»‘è‰²ï¼Œå¯¹è±¡3æœªè¢«å¼•ç”¨ï¼Œå¯¹è±¡2åˆ é™¤ä¸å¯¹è±¡3çš„å¼•ç”¨ï¼Œå¯¼è‡´æœ€åå¯¹è±¡3è¢«è¯¯æ¸…é™¤ï¼›<br><img lazyload src="/images/loading.svg" data-src="stw.png" alt="avatar"></p></li></ol><ul><li>åƒåœ¾å›æ”¶çš„åŸåˆ™æ˜¯ä¸åº”å‡ºç°å¯¹è±¡çš„ä¸¢å¤±ï¼Œä¹Ÿä¸åº”é”™è¯¯çš„å›æ”¶è¿˜ä¸éœ€è¦å›æ”¶çš„å¯¹è±¡ã€‚å¦‚æœåŒæ—¶æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ä¼šç ´åå›æ”¶å™¨çš„æ­£ç¡®æ€§ï¼š<ul><li>æ¡ä»¶ 1: èµ‹å€¼å™¨ä¿®æ”¹å¯¹è±¡å›¾ï¼Œå¯¼è‡´æŸä¸€é»‘è‰²å¯¹è±¡å¼•ç”¨ç™½è‰²å¯¹è±¡ï¼›ï¼ˆé€šä¿—çš„è¯´å°±æ˜¯Açªç„¶æŒæœ‰äº†Bçš„æŒ‡é’ˆï¼Œè€ŒBåœ¨å¹¶å‘æ ‡è®°çš„è¿‡ç¨‹ä¸­å·²ç»è¢«åˆ¤å®šä¸ºç™½è‰²å¯¹è±¡è¦è¢«æ¸…ç†æ‰çš„ï¼‰</li><li>æ¡ä»¶ 2: ä»ç°è‰²å¯¹è±¡å‡ºå‘ï¼Œåˆ°è¾¾ç™½è‰²å¯¹è±¡ä¸”æœªç»è®¿é—®è¿‡çš„è·¯å¾„è¢«èµ‹å€¼å™¨ç ´åï¼›ï¼ˆé€šä¿—çš„è¯´å°±æ˜¯AæŒæœ‰Bçš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒæœ‰å…³ç³»è¢«é‡Šæ”¾ï¼‰</li></ul></li></ul><blockquote><p>åªè¦èƒ½å¤Ÿé¿å…å…¶ä¸­ä»»ä½•ä¸€ä¸ªæ¡ä»¶ï¼Œåˆ™ä¸ä¼šå‡ºç°å¯¹è±¡ä¸¢å¤±çš„æƒ…å†µï¼Œå› ä¸ºï¼š</p><ul><li>  å¦‚æœæ¡ä»¶ 1è¢«é¿å…ï¼Œåˆ™æ‰€æœ‰ç™½è‰²å¯¹è±¡å‡è¢«ç°è‰²å¯¹è±¡å¼•ç”¨ï¼Œæ²¡æœ‰ç™½è‰²å¯¹è±¡ä¼šè¢«é—æ¼ï¼›<strong>å¼ºä¸‰è‰²ä¸å˜æ€§</strong></li><li>  å¦‚æœæ¡ä»¶ 2 è¢«é¿å…ï¼Œå³ä¾¿ç™½è‰²å¯¹è±¡çš„æŒ‡é’ˆè¢«å†™å…¥åˆ°é»‘è‰²å¯¹è±¡ä¸­ï¼Œä½†ä»ç°è‰²å¯¹è±¡å‡ºå‘ï¼Œæ€»å­˜åœ¨ä¸€æ¡æ²¡æœ‰è®¿é—®è¿‡çš„è·¯å¾„ï¼Œä»è€Œæ‰¾åˆ°åˆ°è¾¾ç™½è‰²å¯¹è±¡çš„è·¯å¾„ï¼Œç™½è‰²å¯¹è±¡æœ€ç»ˆä¸ä¼šè¢«é—æ¼ã€‚<strong>å¼±ä¸‰è‰²ä¸å˜æ€§</strong></li></ul></blockquote><p><strong>å¯èƒ½çš„è§£å†³æ–¹æ³•ï¼š</strong> æ•´ä¸ªè¿‡ç¨‹STWï¼Œæµªè´¹èµ„æºï¼Œä¸”å¯¹ç”¨æˆ·ç¨‹åºå½±å“è¾ƒå¤§ï¼Œç”±æ­¤å¼•å…¥äº†<strong>å±éšœæœºåˆ¶</strong>ï¼›</p><ol start="3"><li>å±éšœæœºåˆ¶<br>&emsp;&emsp;æŠŠå›æ”¶å™¨è§†ä¸ºå¯¹è±¡ï¼ŒæŠŠèµ‹å€¼å™¨è§†ä¸ºå½±å“å›æ”¶å™¨è¿™ä¸€å¯¹è±¡çš„å®é™…è¡Œä¸ºï¼ˆå³å½±å“ GC å‘¨æœŸçš„é•¿çŸ­ï¼‰ï¼Œä»è€Œå¼•å…¥èµ‹å€¼å™¨çš„é¢œè‰²ï¼š</li></ol><ul><li>é»‘è‰²èµ‹å€¼å™¨ï¼šå·²ç»ç”±å›æ”¶å™¨æ‰«æè¿‡ï¼Œä¸ä¼šå†æ¬¡å¯¹å…¶è¿›è¡Œæ‰«æã€‚</li><li>ç°è‰²èµ‹å€¼å™¨ï¼šå°šæœªè¢«å›æ”¶å™¨æ‰«æè¿‡æˆ–å°½ç®¡å·²ç»æ‰«æè¿‡ï¼Œä½†ä»éœ€è¦é‡æ–°æ‰«æã€‚</li></ul><h5 id="Dijkstraæ’å…¥å†™å±éšœï¼ˆgo-1-5ï¼‰"><a href="#Dijkstraæ’å…¥å†™å±éšœï¼ˆgo-1-5ï¼‰" class="headerlink" title="Dijkstraæ’å…¥å†™å±éšœï¼ˆgo 1.5ï¼‰"></a>Dijkstraæ’å…¥å†™å±éšœï¼ˆgo 1.5ï¼‰</h5><p>&emsp;&emsp;<code>Dijkstra</code>æ’å…¥å†™å±éšœé¿å…äº†å‰é¢æåˆ°çš„æ¡ä»¶1ï¼Œå³é˜²æ­¢é»‘è‰²å¯¹è±¡æŒ‡å‘ç™½è‰²å¯¹è±¡ã€‚ä¸€ä¸ªå¯¹è±¡å¯ä»¥å­˜å‚¨åœ¨å†…å­˜ä¸­çš„â€œæ ˆâ€æˆ–è€…â€œå †â€ï¼Œ<strong>ç”±äºâ€œæ ˆâ€ç©ºé—´å®¹é‡å°ä¸”è¦æ±‚ç›¸åº”é€Ÿåº¦è¾ƒé«˜ï¼Œå› æ­¤â€œæ’å…¥å†™å±éšœâ€ä¸é€‚åˆç”¨äºâ€œæ ˆâ€ç©ºé—´</strong>ã€‚åœ¨â€œæ’å…¥å†™å±éšœâ€ä¿æŠ¤ä¸‹çš„ä¸‰è‰²æ ‡è®°æ³•æ‰§è¡Œä¾‹å­å¦‚ä¸‹ï¼š<br><img lazyload src="/images/loading.svg" data-src="step1.jpeg" alt="avatar"><br><img lazyload src="/images/loading.svg" data-src="step2.jpeg" alt="avatar"><br><img lazyload src="/images/loading.svg" data-src="step3.jpeg" alt="avatar"></p><p>&emsp;&emsp;å°½ç®¡<code>Dijkstra</code>æ’å…¥å†™å±éšœå¯ä»¥<strong>å®ç°åƒåœ¾å›æ”¶å’Œç”¨æˆ·ç¨‹åºçš„å¹¶å‘æ‰§è¡Œ</strong>ï¼Œä½†æ˜¯å®ƒå­˜åœ¨ä¸¤ä¸ªç¼ºç‚¹ã€‚ä¸€æ–¹é¢å®ƒæ˜¯ä¸€ç§æ¯”è¾ƒä¿å®ˆçš„åƒåœ¾å›æ”¶æ–¹æ³•ï¼Œ<strong>æŠŠæœ‰å¯èƒ½å­˜æ´»çš„å¯¹è±¡éƒ½æ ‡è®°æˆç°è‰²äº†ä»¥æ»¡è¶³â€œå¼ºä¸‰è‰²ä¸å˜æ€§â€</strong>ã€‚ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œç”¨æˆ·ç¨‹åº<code>Mutator</code>å°†å¯¹è±¡AåŸæœ¬æŒ‡å‘Bå¯¹è±¡çš„æŒ‡é’ˆæ”¹æˆæŒ‡å‘Cå¯¹è±¡ï¼Œå°½ç®¡åœ¨ä¿®æ”¹åBå¯¹è±¡å·²ç»æ˜¯ä¸€ä¸ªåƒåœ¾å¯¹è±¡ï¼Œä½†æ˜¯å®ƒåœ¨æœ¬è½®åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ä¸ä¼šè¢«å›æ”¶ã€‚<br><img lazyload src="/images/loading.svg" data-src="dj.jpeg" alt="avatra"></p><h5 id="Yuasaåˆ é™¤å±éšœ"><a href="#Yuasaåˆ é™¤å±éšœ" class="headerlink" title="Yuasaåˆ é™¤å±éšœ"></a>Yuasaåˆ é™¤å±éšœ</h5><p>&emsp;&emsp;<code>Yuasa</code>åˆ é™¤å†™å±éšœé¿å…äº†å‰é¢æåˆ°çš„æ¡ä»¶2ï¼Œé˜²æ­¢ä¸¢å¤±ç°è‰²å¯¹è±¡åˆ°ç™½è‰²å¯¹è±¡çš„å¯è¾¾è·¯å¾„ã€‚<strong>æ»¡è¶³äº†å¼±ä¸‰è‰²ä¸å˜æ€§</strong><br><img lazyload src="/images/loading.svg" data-src="yuasa.jpeg" alt="avatar"></p><p>ä¸‹å›¾ç®€å•ç»˜åˆ¶äº†<code>Yuasa</code>åˆ é™¤å†™å±éšœæ˜¯å¦‚ä½•ä¿è¯ç”¨æˆ·ç¨‹åº<code>Mutator</code>å’Œåƒåœ¾å›æ”¶å™¨<code>Collector</code>çš„å¹¶å‘æ‰§è¡Œçš„ï¼š</p><ul><li>  ç¬¬äºŒæ­¥ä¸­<code>Mutator</code>å°†å¯¹è±¡<code>A</code>åŸæœ¬æŒ‡å‘å¯¹è±¡<code>B</code>çš„æŒ‡é’ˆæŒ‡å‘<code>C</code>ï¼Œç”±äºå¯¹è±¡<code>B</code>æœ¬èº«å°±æ˜¯ç°è‰²çš„ï¼Œå› æ­¤ä¸éœ€è¦å¯¹å®ƒé‡æ–°ç€è‰²</li><li>  ç¬¬ä¸‰æ­¥ä¸­<code>Mutator</code>åˆ é™¤äº†å¯¹è±¡<code>B</code>æŒ‡å‘å¯¹è±¡<code>C</code>çš„æŒ‡é’ˆï¼Œåˆ é™¤å†™å±éšœå°†ä¸‹æ¸¸å¯¹è±¡<code>C</code>æ ‡è®°ä¸ºç°è‰²<br><img lazyload src="/images/loading.svg" data-src="yuasa1.jpeg" alt="avatar"><br>&emsp;&emsp;<code>Yuasa</code>åˆ é™¤å†™å±éšœå’Œ<code>Dijkstra</code>æ’å…¥å†™å±éšœç›¸æ¯”ä¼˜ç‚¹åœ¨äºä¸éœ€è¦åœ¨ä¸€è½®ä¸‰è‰²æ ‡è®°åå¯¹æ ˆç©ºé—´ä¸Šçš„å¯¹è±¡è¿›è¡Œé‡æ–°æ‰«æï¼Œç¼ºç‚¹åœ¨äº<code>Collector</code>ä¼šæ‚²è§‚åœ°è®¤ä¸ºæ‰€æœ‰è¢«åˆ é™¤çš„å¯¹è±¡éƒ½å¯èƒ½è¢«é»‘è‰²å¯¹è±¡å¼•ç”¨ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­ç¬¬ä¸‰æ­¥<code>Mutator</code>åˆ é™¤äº†å¯¹è±¡<code>B</code>æŒ‡å‘å¯¹è±¡<code>C</code>çš„æŒ‡é’ˆï¼Œå¦‚æœæ­¤æ—¶è¿˜æœ‰ä¸€ä¸ªå•ç‹¬çš„å¯¹è±¡<code>E</code>æŒ‡å‘<code>C</code>ï¼Œé‚£ä¹ˆæœ¬è¯¥è¢«åˆ é™¤çš„å¯¹è±¡<code>E</code>å´å¯ä»¥åœ¨æœ¬è½®åƒåœ¾å›æ”¶ä¸­å­˜æ´»ã€‚</li></ul><h5 id="æ··åˆå†™å±éšœï¼ˆgo-1-8ï¼‰"><a href="#æ··åˆå†™å±éšœï¼ˆgo-1-8ï¼‰" class="headerlink" title="æ··åˆå†™å±éšœï¼ˆgo 1.8ï¼‰"></a>æ··åˆå†™å±éšœï¼ˆgo 1.8ï¼‰</h5><blockquote><p><strong>æ··åˆå†™å±éšœä¹Ÿæ˜¯ä»…åœ¨å †ç©ºé—´å¯åŠ¨çš„ï¼Œé˜²æ­¢é™ä½æ ˆç©ºé—´çš„è¿è¡Œæ•ˆç‡</strong></p></blockquote><p>å›é¡¾ä¸€ä¸‹ä¹‹å‰æåˆ°çš„ä¸¤ç§å†™å±éšœçš„åŠ£åŠ¿ï¼š</p><ul><li><code>Dijkstra</code>æ’å…¥å†™å±éšœï¼šä¸€è½®æ ‡è®°ç»“æŸåéœ€è¦<code>STW</code>é‡æ–°æ‰«ææ ˆä¸Šå¯¹è±¡</li><li><code>Yuasa</code>åˆ é™¤å†™å±éšœï¼šå›æ”¶ç²¾åº¦ä½ï¼Œåœ¨åƒåœ¾å›æ”¶å¼€å§‹å‰ä½¿ç”¨<code>STW</code>æ‰«ææ‰€æœ‰<code>GC Root</code>å¯¹è±¡å½¢æˆåˆå§‹å¿«ç…§ï¼Œç”¨æˆ·ç¨‹åº<code>Mutator</code>ä»ç°è‰²/ç™½è‰²å¯¹è±¡ä¸­åˆ é™¤ç™½è‰²æŒ‡é’ˆæ—¶ä¼šå°†ä¸‹æ¸¸å¯¹è±¡æ ‡è®°ä¸ºç°è‰²ï¼Œç›¸å½“äºä¿æŠ¤äº†æ‰€æœ‰åˆå§‹å¿«ç…§ä¸­çš„ç™½è‰²å¯¹è±¡ä¸è¢«åˆ é™¤</li></ul><h6 id="å…·ä½“åœºæ™¯çš„å®ç°"><a href="#å…·ä½“åœºæ™¯çš„å®ç°" class="headerlink" title="å…·ä½“åœºæ™¯çš„å®ç°"></a><strong>å…·ä½“åœºæ™¯çš„å®ç°</strong></h6><p><code>GC</code>å¼€å§‹é˜¶æ®µä¼šå°†æ‰€æœ‰æ ˆç©ºé—´å¯è¾¾å¯¹è±¡éƒ½æ ‡è®°ä¸ºé»‘è‰²ï¼š<br><img lazyload src="/images/loading.svg" data-src="s11.jpeg" alt="avatar"></p><p>åœºæ™¯ä¸€ï¼šæŸä¸ªå¯¹è±¡ä»å †å¯¹è±¡çš„ä¸‹æ¸¸å˜æˆæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ï¼Œè¿™ç§æƒ…å†µä¸‹æ ‡è®°è¯¥å¯¹è±¡ä¸ºç°è‰²ï¼Œè¯¥å¯¹è±¡å°±ä¸ä¼šè¢«é”™è¯¯åœ°å›æ”¶<br><img lazyload src="/images/loading.svg" data-src="s12.jpeg" alt="avatar"></p><p>åœºæ™¯äºŒï¼šæŸä¸ªå¯¹è±¡ä»ä¸€ä¸ªæ ˆå¯¹è±¡çš„ä¸‹æ¸¸å˜æˆå¦ä¸€ä¸ªå¯¹è±¡çš„ä¸‹æ¸¸ï¼Œç”±äºå¯¹è±¡å…¨éƒ½åœ¨æ ˆç©ºé—´å¯¹è±¡çš„å¯è¾¾å¯¹è±¡ä¸­ï¼Œå› æ­¤æ··åˆå†™å±éšœä¸ä¼šå¯¹è¿™äº›å¯¹è±¡ç€è‰²ã€‚<br><img lazyload src="/images/loading.svg" data-src="s13.jpeg" alt="avatar"></p><p>åœºæ™¯ä¸‰ï¼šæŸä¸ªå¯¹è±¡ä»ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸å˜æˆå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ï¼Œæ¯”å¦‚ä¸‹å›¾ä¸­å¯¹è±¡Gä»Fçš„ä¸‹æ¸¸ç§»åŠ¨åˆ°Yçš„ä¸‹æ¸¸ï¼Œä¸ºäº†é¿å…å¯¹è±¡<code>G</code>è¢«é”™è¯¯å›æ”¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ ‡è®°ä¸ºç°è‰²<br><img lazyload src="/images/loading.svg" data-src="s14.jpeg" alt="avatar"></p><p>åœºæ™¯å››ï¼šæŸä¸ªå¯¹è±¡ä»æ ˆå¯¹è±¡çš„ä¸‹æ¸¸å˜æˆå †å¯¹è±¡çš„ä¸‹æ¸¸ï¼Œå¯¹äºæ ˆç©ºé—´å¯¹è±¡ä¸è§¦å‘å†™å±éšœï¼Œä½†æ˜¯å¯¹äºè¢«åˆ é™¤çš„å †ç©ºé—´å¯¹è±¡<code>G</code>éœ€è¦æ ‡è®°æˆç°è‰²ä»¥ä¿æŠ¤å®ƒå’Œå®ƒçš„ä¸‹æ¸¸å¯¹è±¡ä¸è¢«é”™è¯¯åˆ é™¤<br><img lazyload src="/images/loading.svg" data-src="s15.jpeg" alt="avatar"></p><ul><li>æ··åˆå†™å±éšœç»§æ‰¿äº†æ’å…¥å†™å±éšœçš„ä¼˜ç‚¹ï¼Œèµ·å§‹æ— éœ€ STW æ‰“å¿«ç…§ï¼Œç›´æ¥å¹¶å‘æ‰«æåƒåœ¾å³å¯ï¼›</li><li>æ··åˆå†™å±éšœç»§æ‰¿äº†åˆ é™¤å†™å±éšœçš„ä¼˜ç‚¹ï¼Œèµ‹å€¼å™¨æ˜¯é»‘è‰²èµ‹å€¼å™¨ï¼ŒGC æœŸé—´ï¼Œä»»ä½•åœ¨æ ˆä¸Šåˆ›å»ºçš„æ–°å¯¹è±¡ï¼Œå‡ä¸ºé»‘è‰²ã€‚æ‰«æè¿‡ä¸€æ¬¡å°±ä¸éœ€è¦æ‰«æäº†ï¼Œè¿™æ ·å°±æ¶ˆé™¤äº†æ’å…¥å†™å±éšœæ—¶æœŸæœ€å STW çš„é‡æ–°æ‰«ææ ˆï¼›</li><li>æ··åˆå†™å±éšœæ‰«æç²¾åº¦ç»§æ‰¿äº†åˆ é™¤å†™å±éšœï¼Œæ¯”æ’å…¥å†™å±éšœæ›´ä½ï¼Œéšç€å¸¦æ¥çš„ æ˜¯ GC è¿‡ç¨‹å…¨ç¨‹æ—  STWï¼›</li><li>æ··åˆå†™å±éšœæ‰«ææ ˆè™½ç„¶æ²¡æœ‰ STWï¼Œä½†æ˜¯æ‰«ææŸä¸€ä¸ªå…·ä½“çš„æ ˆçš„æ—¶å€™ï¼Œè¿˜æ˜¯ è¦åœæ­¢è¿™ä¸ª goroutine èµ‹å€¼å™¨çš„å·¥ä½œçš„</li></ul><h4 id="GC-è§¦å‘æ—¶æœº"><a href="#GC-è§¦å‘æ—¶æœº" class="headerlink" title="GC è§¦å‘æ—¶æœº"></a>GC è§¦å‘æ—¶æœº</h4><p>ä¸»åŠ¨è§¦å‘ï¼šè°ƒç”¨ runtime.GC<br>è¢«åŠ¨è§¦å‘ï¼š ä½¿ç”¨ç³»ç»Ÿç›‘æ§ï¼Œè¯¥è§¦å‘æ¡ä»¶ç”± runtime.forcegcperiod å˜é‡æ§åˆ¶ï¼Œé»˜è®¤ä¸º 2 åˆ†é’Ÿã€‚å½“è¶…è¿‡ä¸¤åˆ†é’Ÿæ²¡æœ‰äº§ç”Ÿä»»ä½• GC æ—¶ï¼Œå¼ºåˆ¶è§¦å‘ GCã€‚ ä½¿ç”¨æ­¥è°ƒï¼ˆPacingï¼‰ç®—æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯æ§åˆ¶å†…å­˜å¢é•¿çš„æ¯”ä¾‹ã€‚å¦‚ Go çš„ GC æ˜¯ä¸€ç§æ¯”ä¾‹ GC, ä¸‹ä¸€æ¬¡ GC ç»“æŸæ—¶çš„å †å¤§å°å’Œä¸Šä¸€æ¬¡ GC å­˜æ´»å †å¤§å°æˆæ¯”ä¾‹. ç”± GOGC æ§åˆ¶, é»˜è®¤ 100, å³ 2 å€çš„å…³ç³», 200 å°±æ˜¯ 3 å€, å½“ Go æ–°åˆ›å»ºçš„å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜å¤§å°ï¼Œé™¤ä»¥ä¸Šæ¬¡ GC ç»“æŸåä¿ç•™ä¸‹æ¥çš„å¯¹è±¡å ç”¨å†…å­˜å¤§å°ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Golang-Map-çš„åº•å±‚å®ç°&quot;&gt;&lt;a href=&quot;#Golang-Map-çš„åº•å±‚å®ç°&quot; class=&quot;headerlink&quot; title=&quot;Golang Map çš„åº•å±‚å®ç°&quot;&gt;&lt;/a&gt;Golang Map çš„åº•å±‚å®ç°&lt;/h1&gt;&lt;h2 id=&quot;ä¸€èˆ¬çš„-map-çš„</summary>
      
    
    
    
    <category term="goè¯­è¨€" scheme="http://jiahaohong1997.github.io/categories/go%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="golang" scheme="http://jiahaohong1997.github.io/tags/golang/"/>
    
  </entry>
  
</feed>
